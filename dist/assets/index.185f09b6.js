import{n as u,a_ as re,dY as Ae,dZ as Ze,s as p,v as ne,_ as g,N as ue,cc as pe,S as x,a3 as ke,K as Ee,a as W,F as Oe,d_ as Te,a5 as Ue,f as m,R as D,c7 as Ve,a6 as V,dd as ee,b$ as De,d6 as He,d7 as _e,T as k,d$ as Xe,G as Ye,X as Fe,J as ye}from"./index.976f028d.js";var Be={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M672 418H144c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H188V494h440v326z"}},{tag:"path",attrs:{d:"M819.3 328.5c-78.8-100.7-196-153.6-314.6-154.2l-.2-64c0-6.5-7.6-10.1-12.6-6.1l-128 101c-4 3.1-3.9 9.1 0 12.3L492 318.6c5.1 4 12.7.4 12.6-6.1v-63.9c12.9.1 25.9.9 38.8 2.5 42.1 5.2 82.1 18.2 119 38.7 38.1 21.2 71.2 49.7 98.4 84.3 27.1 34.7 46.7 73.7 58.1 115.8a325.95 325.95 0 016.5 140.9h74.9c14.8-103.6-11.3-213-81-302.3z"}}]},name:"rotate-left",theme:"outlined"},We=Be;function ge(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){qe(r,a,t[a])})}return r}function qe(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var se=function(e,t){var n=ge({},e,t.attrs);return u(re,ge({},n,{icon:We}),null)};se.displayName="RotateLeftOutlined";se.inheritAttrs=!1;var Je=se,Qe={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M480.5 251.2c13-1.6 25.9-2.4 38.8-2.5v63.9c0 6.5 7.5 10.1 12.6 6.1L660 217.6c4-3.2 4-9.2 0-12.3l-128-101c-5.1-4-12.6-.4-12.6 6.1l-.2 64c-118.6.5-235.8 53.4-314.6 154.2A399.75 399.75 0 00123.5 631h74.9c-.9-5.3-1.7-10.7-2.4-16.1-5.1-42.1-2.1-84.1 8.9-124.8 11.4-42.2 31-81.1 58.1-115.8 27.2-34.7 60.3-63.2 98.4-84.3 37-20.6 76.9-33.6 119.1-38.8z"}},{tag:"path",attrs:{d:"M880 418H352c-17.7 0-32 14.3-32 32v414c0 17.7 14.3 32 32 32h528c17.7 0 32-14.3 32-32V450c0-17.7-14.3-32-32-32zm-44 402H396V494h440v326z"}}]},name:"rotate-right",theme:"outlined"},Ke=Qe;function we(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){et(r,a,t[a])})}return r}function et(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ce=function(e,t){var n=we({},e,t.attrs);return u(re,we({},n,{icon:Ke}),null)};ce.displayName="RotateRightOutlined";ce.inheritAttrs=!1;var tt=ce,rt={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H519V309c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v134H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h118v134c0 4.4 3.6 8 8 8h60c4.4 0 8-3.6 8-8V519h118c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-in",theme:"outlined"},nt=rt;function he(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){at(r,a,t[a])})}return r}function at(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var ve=function(e,t){var n=he({},e,t.attrs);return u(re,he({},n,{icon:nt}),null)};ve.displayName="ZoomInOutlined";ve.inheritAttrs=!1;var it=ve,ot={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M637 443H325c-4.4 0-8 3.6-8 8v60c0 4.4 3.6 8 8 8h312c4.4 0 8-3.6 8-8v-60c0-4.4-3.6-8-8-8zm284 424L775 721c122.1-148.9 113.6-369.5-26-509-148-148.1-388.4-148.1-537 0-148.1 148.6-148.1 389 0 537 139.5 139.6 360.1 148.1 509 26l146 146c3.2 2.8 8.3 2.8 11 0l43-43c2.8-2.7 2.8-7.8 0-11zM696 696c-118.8 118.7-311.2 118.7-430 0-118.7-118.8-118.7-311.2 0-430 118.8-118.7 311.2-118.7 430 0 118.7 118.8 118.7 311.2 0 430z"}}]},name:"zoom-out",theme:"outlined"},lt=ot;function Pe(r){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?Object(arguments[e]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),n.forEach(function(a){ut(r,a,t[a])})}return r}function ut(r,e,t){return e in r?Object.defineProperty(r,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):r[e]=t,r}var fe=function(e,t){var n=Pe({},e,t.attrs);return u(re,Pe({},n,{icon:lt}),null)};fe.displayName="ZoomOutOutlined";fe.inheritAttrs=!1;var st=fe,ct="[object Number]";function vt(r){return typeof r=="number"||Ae(r)&&Ze(r)==ct}function ft(){var r=document.documentElement.clientWidth,e=window.innerHeight||document.documentElement.clientHeight;return{width:r,height:e}}function xe(r){var e=r.getBoundingClientRect(),t=document.documentElement;return{left:e.left+(window.pageXOffset||t.scrollLeft)-(t.clientLeft||document.body.clientLeft||0),top:e.top+(window.pageYOffset||t.scrollTop)-(t.clientTop||document.body.clientTop||0)}}function dt(r){var e=p(null),t=ne(g({},r)),n=p([]),a=function(s){e.value===null&&(n.value=[],e.value=pe(function(){var d;n.value.forEach(function(b){d=g(g({},d),b)}),g(t,d),e.value=null})),n.value.push(s)};return ue(function(){e.value&&pe.cancel(e.value)}),[t,a]}function Ce(r,e,t,n){var a=e+t,i=(t-n)/2;if(t>n){if(e>0)return x({},r,i);if(e<0&&a<n)return x({},r,-i)}else if(e<0||a>n)return x({},r,e<0?i:-i);return{}}function mt(r,e,t,n){var a=ft(),i=a.width,s=a.height,d=null;return r<=i&&e<=s?d={x:0,y:0}:(r>i||e>s)&&(d=g(g({},Ce("x",t,r,i)),Ce("y",n,e,s))),d}var be=Symbol("previewGroupContext"),de={provide:function(e){ke(be,e)},inject:function(){return Ee(be,{isPreviewGroup:p(!1),previewUrls:ne({}),setPreviewUrls:function(){},current:p(null),setCurrent:function(){},setShowPreview:function(){},setMousePosition:function(){},registerImage:null})}},pt=W({name:"PreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,t){var n=t.slots,a=ne({}),i=p(),s=p(!1),d=p(null),b=function(l){g(a,l)},P=function(l){i.value=l},h=function(l){d.value=l},E=function(l){s.value=l},S=function(l,O){return a[l]=O,function(){delete a[l]}},C=function(l){l==null||l.stopPropagation(),s.value=!1,d.value=null};return de.provide({isPreviewGroup:p(!0),previewUrls:a,setPreviewUrls:b,current:i,setCurrent:P,setShowPreview:E,setMousePosition:h,registerImage:S}),function(){return u(Oe,null,[n.default&&n.default(),u(Me,{"ria-hidden":!s.value,visible:s.value,prefixCls:e.previewPrefixCls,onClose:C,mousePosition:d.value,src:a[i.value]},null)])}}}),Se=pt,gt=Te(),te={x:0,y:0},wt=g({src:String,alt:String},gt),ht=W({name:"Preview",inheritAttrs:!1,props:wt,emits:["close","afterClose"],setup:function(e,t){var n=t.emit,a=t.attrs,i=p(1),s=p(0),d=dt(te),b=Ue(d,2),P=b[0],h=b[1],E=function(){return n("close")},S=p(),C=ne({originX:0,originY:0,deltaX:0,deltaY:0}),c=p(!1),l=de.inject(),O=l.previewUrls,M=l.current,R=l.isPreviewGroup,N=l.setCurrent,H=m(function(){return Object.keys(O).length}),_=m(function(){return Object.keys(O)}),I=m(function(){return _.value.indexOf(String(M.value))}),ae=m(function(){return R.value?O[M.value]:e.src}),X=m(function(){return R.value&&H.value>1}),T=function(){i.value=1,s.value=0,h(te)},q=function(){i.value++,h(te)},ie=function(){i.value>1&&i.value--,h(te)},oe=function(){s.value+=90},le=function(){s.value-=90},A=function(o){o.preventDefault(),o.stopPropagation(),I.value>0&&N(_.value[String(I.value-1)])},Y=function(o){o.preventDefault(),o.stopPropagation(),I.value<H.value-1&&N(_.value[String(I.value+1)])},J=D(x({},"".concat(e.prefixCls,"-moving"),c.value)),v="".concat(e.prefixCls,"-operations-operation"),w="".concat(e.prefixCls,"-operations-icon"),y=[{icon:Ve,onClick:E,type:"close"},{icon:it,onClick:q,type:"zoomIn"},{icon:st,onClick:ie,type:"zoomOut",disabled:m(function(){return i.value===1})},{icon:tt,onClick:oe,type:"rotateRight"},{icon:Je,onClick:le,type:"rotateLeft"}],j=function(){if(e.visible&&c.value){var o=S.value.offsetWidth*i.value,L=S.value.offsetHeight*i.value,z=xe(S.value),G=z.left,$=z.top,Q=s.value%180!==0;c.value=!1;var K=mt(Q?L:o,Q?o:L,G,$);K&&h(g({},K))}},U=function(o){o.preventDefault(),o.stopPropagation(),C.deltaX=o.pageX-P.x,C.deltaY=o.pageY-P.y,C.originX=P.x,C.originY=P.y,c.value=!0},F=function(o){e.visible&&c.value&&h({x:o.pageX-C.deltaX,y:o.pageY-C.deltaY})},B=function(){};return ue(function(){V([function(){return e.visible},c],function(){B();var f,o,L=ee(window,"mouseup",j,!1),z=ee(window,"mousemove",F,!1);try{window.top!==window.self&&(f=ee(window.top,"mouseup",j,!1),o=ee(window.top,"mousemove",F,!1))}catch(G){}B=function(){L.remove(),z.remove(),f&&f.remove(),o&&o.remove()}},{flush:"post",immediate:!0})}),De(function(){B()}),function(){return u(Xe,k(k({},a),{},{transitionName:"zoom",maskTransitionName:"fade",closable:!1,keyboard:!0,prefixCls:e.prefixCls,onClose:E,afterClose:T,visible:e.visible,wrapClassName:J,getContainer:e.getContainer}),{default:function(){return[u("ul",{class:"".concat(e.prefixCls,"-operations")},[y.map(function(o){var L=o.icon,z=o.onClick,G=o.type,$=o.disabled;return u("li",{class:D(v,x({},"".concat(e.prefixCls,"-operations-operation-disabled"),$&&($==null?void 0:$.value))),onClick:z,key:G},[u(L,{class:w},null)])})]),u("div",{class:"".concat(e.prefixCls,"-img-wrapper"),style:{transform:"translate3d(".concat(P.x,"px, ").concat(P.y,"px, 0)")}},[u("img",{onMousedown:U,ref:S,class:"".concat(e.prefixCls,"-img"),src:ae.value,alt:e.alt,style:{transform:"scale3d(".concat(i.value,", ").concat(i.value,", 1) rotate(").concat(s.value,"deg)")}},null)]),X.value&&u("div",{class:D("".concat(e.prefixCls,"-switch-left"),x({},"".concat(e.prefixCls,"-switch-left-disabled"),I.value<=0)),onClick:A},[u(He,null,null)]),X.value&&u("div",{class:D("".concat(e.prefixCls,"-switch-right"),x({},"".concat(e.prefixCls,"-switch-right-disabled"),I.value>=H.value-1)),onClick:Y},[u(_e,null,null)])]}})}}}),Me=ht,Re=function(){return{src:String,wrapperClassName:String,wrapperStyle:{type:Object,default:void 0},prefixCls:String,previewPrefixCls:String,placeholder:Ye.any,fallback:String,preview:{type:[Boolean,Object],default:!0}}},Pt=function(e,t){var n=g({},e);return Object.keys(t).forEach(function(a){e[a]===void 0&&(n[a]=t[a])}),n},Ct=0,Ie=W({name:"Image",inheritAttrs:!1,props:Re(),emits:["click"],setup:function(e,t){var n=t.attrs,a=t.slots,i=t.emit,s=m(function(){return e.prefixCls}),d=m(function(){return"".concat(s.value,"-preview")}),b=m(function(){var v={visible:void 0,onVisibleChange:function(){},getContainer:void 0};return Fe(e.preview)==="object"?Pt(e.preview,v):v}),P=m(function(){return e.placeholder&&e.placeholder!==!0||a.placeholder}),h=m(function(){return b.value.visible}),E=m(function(){return b.value.onVisibleChange}),S=m(function(){return b.value.getContainer}),C=m(function(){return h.value!==void 0}),c=p(!!h.value);V(h,function(){c.value=!!h.value}),V(c,function(v,w){E.value(v,w)});var l=p(P.value?"loading":"normal");V(function(){return e.src},function(){l.value=P.value?"loading":"normal"});var O=p(null),M=m(function(){return l.value==="error"}),R=de.inject(),N=R.isPreviewGroup,H=R.setCurrent,_=R.setShowPreview,I=R.setMousePosition,ae=R.registerImage,X=p(Ct++),T=m(function(){return e.preview&&!M.value}),q=function(){l.value="normal"},ie=function(){l.value="error"},oe=function(w){if(!C.value){var y=xe(w.target),j=y.left,U=y.top;N.value?(H(X.value),I({x:j,y:U})):O.value={x:j,y:U}}N.value?_(!0):c.value=!0,i("click",w)},le=function(){c.value=!1,C.value||(O.value=null)},A=p(null);V(function(){return A},function(){l.value==="loading"&&A.value.complete&&(A.value.naturalWidth||A.value.naturalHeight)&&q()});var Y=function(){};ue(function(){V([function(){return e.src},T],function(){if(Y(),!N.value)return function(){};Y=ae(X.value,e.src),T.value||Y()},{flush:"post",immediate:!0})});var J=function(w){return vt(w)?w+"px":w};return function(){var v=e.prefixCls,w=e.wrapperClassName,y=e.fallback,j=e.src,U=e.preview,F=e.placeholder,B=e.wrapperStyle,f=n.width,o=n.height,L=n.crossorigin,z=n.decoding,G=n.alt,$=n.sizes,Q=n.srcset,K=n.usemap,je=n.class,Le=n.style,ze=D(v,w,x({},"".concat(v,"-error"),M.value)),Ge=M.value&&y?y:j,me=a.previewMask&&a.previewMask(),$e={crossorigin:L,decoding:z,alt:G,sizes:$,srcset:Q,usemap:K,class:D("".concat(v,"-img"),x({},"".concat(v,"-img-placeholder"),F===!0),je),style:g({height:o},Le)};return u(Oe,null,[u("div",{class:ze,onClick:U&&!M.value?oe:function(Ne){i("click",Ne)},style:g({width:J(f),height:J(o)},B)},[u("img",k(k(k({},$e),M.value&&y?{src:y}:{onLoad:q,onError:ie,src:j}),{},{ref:A}),null),l.value==="loading"&&u("div",{"aria-hidden":"true",class:"".concat(v,"-placeholder")},[F||a.placeholder&&a.placeholder()]),me&&T.value&&u("div",{class:"".concat(v,"-mask")},[me])]),!N.value&&T.value&&u(Me,{"aria-hidden":!c.value,visible:c.value,prefixCls:d.value,onClose:le,mousePosition:O.value,src:Ge,alt:G,getContainer:S.value},null)])}}});Ie.PreviewGroup=Se;var bt=Ie,Ot=W({name:"AImagePreviewGroup",inheritAttrs:!1,props:{previewPrefixCls:String},setup:function(e,t){var n=t.attrs,a=t.slots,i=ye("image",e),s=i.getPrefixCls,d=m(function(){return s("image-preview",e.previewPrefixCls)});return function(){return u(Se,k(k({},g(g({},n),e)),{},{previewPrefixCls:d.value}),a)}}}),yt=Ot,Z=W({name:"AImage",inheritAttrs:!1,props:Re(),setup:function(e,t){var n=t.slots,a=t.attrs,i=ye("image",e),s=i.prefixCls;return function(){return u(bt,g(g(g({},a),e),{prefixCls:s.value}),n)}}});Z.PreviewGroup=yt;Z.install=function(r){return r.component(Z.name,Z),r.component(Z.PreviewGroup.name,Z.PreviewGroup),r};var St=Z;export{St as I,xe as g};
