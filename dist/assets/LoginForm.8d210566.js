var E=(C,r,i)=>new Promise((u,x)=>{var a=l=>{try{c(i.next(l))}catch(p){x(p)}},k=l=>{try{c(i.throw(l))}catch(p){x(p)}},c=l=>l.done?u(l.value):Promise.resolve(l.value).then(a,k);c((i=i.apply(C,r)).next())});import{a as N,I as D,c as P,b as h,r as O,s as _,v as U,f as A,i as e,o as K,h as V,w as L,x as T,n as s,y as t,z as d,t as m,B as g,C as q,F as G,D as Q}from"./index.976f028d.js";import{C as W}from"./index.53bde1b9.js";/* empty css              *//* empty css               */import{u as j,a as H,L as y,_ as J,b as X}from"./LoginFormTitle.864f1f24.js";import{F as $}from"./Form.50c6b0cf.js";import{C as Y,R as Z}from"./index.651a19c8.js";import"./Checkbox.77af456b.js";import"./Col.dd538940.js";import"./useFlexGapSupport.4b430c1e.js";import"./_baseIteratee.6f2aea4e.js";import"./get.177428c4.js";import"./useSize.a0f971b4.js";const fe=N({setup(C){const r=Y,i=Z,u=$.Item,x=D.Password,{t:a}=P(),{notification:k,createErrorModal:c}=Q(),{prefixCls:l}=h("login"),p=O(),{setLoginState:w,getLoginState:B}=j(),{getFormRules:M}=H(),b=_(),S=_(!1),I=_(!1),f=U({account:"2201902345",password:"password"}),{validForm:z}=X(b),R=A(()=>e(B)===y.LOGIN);function F(){return E(this,null,function*(){const v=yield z();if(!!v)try{S.value=!0;const o=yield p.login({userPassword:v.password,userNumber:v.account,mode:"none"});o&&k.success({message:a("sys.login.loginSuccessTitle"),description:`${a("sys.login.loginSuccessDesc")}: ${o.nickName}`,duration:3})}catch(o){c({title:a("sys.api.errorTip"),content:a("sys.api.errMsg401")||a("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body})}finally{S.value=!1}})}return(v,o)=>(K(),V(G,null,[L(s(J,{class:"enter-x"},null,512),[[T,e(R)]]),L(s(e($),{class:"p-4 enter-x",model:e(f),rules:e(M),ref_key:"formRef",ref:b,onKeypress:q(F,["enter"])},{default:t(()=>[s(e(u),{name:"account",class:"enter-x"},{default:t(()=>[s(e(D),{size:"large",value:e(f).account,"onUpdate:value":o[0]||(o[0]=n=>e(f).account=n),placeholder:e(a)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(u),{name:"password",class:"enter-x"},{default:t(()=>[s(e(x),{size:"large",visibilityToggle:"",value:e(f).password,"onUpdate:value":o[1]||(o[1]=n=>e(f).password=n),placeholder:e(a)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(i),{class:"enter-x"},{default:t(()=>[s(e(r),{span:12},{default:t(()=>[s(e(u),null,{default:t(()=>[s(e(W),{checked:I.value,"onUpdate:checked":o[2]||(o[2]=n=>I.value=n),size:"small"},{default:t(()=>[d(m(e(a)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:t(()=>[s(e(u),{style:{"text-align":"right"}},{default:t(()=>[s(e(g),{type:"link",size:"small",onClick:o[3]||(o[3]=n=>e(w)(e(y).RESET_PASSWORD))},{default:t(()=>[d(m(e(a)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:t(()=>[s(e(g),{type:"primary",size:"large",block:"",onClick:F,loading:S.value},{default:t(()=>[d(m(e(a)("sys.login.loginButton")),1)]),_:1},8,["loading"])]),_:1}),s(e(i),{class:"enter-x"},{default:t(()=>[s(e(r),{md:8,xs:24},{default:t(()=>[s(e(g),{block:"",onClick:o[4]||(o[4]=n=>e(w)(e(y).MOBILE))},{default:t(()=>[d(m(e(a)("sys.login.mobileSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:t(()=>[s(e(g),{block:"",onClick:o[5]||(o[5]=n=>e(w)(e(y).QR_CODE))},{default:t(()=>[d(m(e(a)("sys.login.qrSignInFormTitle")),1)]),_:1})]),_:1}),s(e(r),{md:7,xs:24},{default:t(()=>[s(e(g),{block:"",onClick:o[6]||(o[6]=n=>e(w)(e(y).REGISTER))},{default:t(()=>[d(m(e(a)("sys.login.registerButton")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","onKeypress"]),[[T,e(R)]])],64))}});export{fe as default};
