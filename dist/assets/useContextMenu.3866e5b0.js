var O=Object.defineProperty,$=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable;var _=(e,t,s)=>t in e?O(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s,g=(e,t)=>{for(var s in t||(t={}))D.call(t,s)&&_(e,s,t[s]);if(C)for(var s of C(t))N.call(t,s)&&_(e,s,t[s]);return e},w=(e,t)=>$(e,S(t));import{a as A,s as I,f as P,a5 as H,O as R,bk as E,i as y,n as c,ao as v,E as V,K as W,bA as z,an as B,d6 as F,d7 as K,S as T}from"./index.5903aaea.js";/* empty css               */function U(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!z(e)}const h="context-menu",X={width:{type:Number,default:156},customEvent:{type:Object,default:null},styles:{type:Object},showIcon:{type:Boolean,default:!0},axis:{type:Object,default(){return{x:0,y:0}}},items:{type:Array,default(){return[]}}},k=e=>{const{item:t}=e;return c("span",{style:"display: inline-block; width: 100%; ",class:"px-4",onClick:e.handler.bind(null,t)},[e.showIcon&&t.icon&&c(B,{class:"mr-2",icon:t.icon},null),c("span",null,[t.label])])};var Y=A({name:"ContextMenu",props:X,setup(e){const t=I(null),s=I(!1),r=P(()=>{const{axis:o,items:n,styles:i,width:l}=e,{x:a,y:m}=o||{x:0,y:0},p=(n||[]).length*40,b=l,x=document.body,L=x.clientWidth<a+b?a-b:a,j=x.clientHeight<m+p?m-p:m;return w(g({},i),{position:"absolute",width:`${l}px`,left:`${L+1}px`,top:`${j+1}px`,zIndex:9999})});H(()=>{R(()=>s.value=!0)}),E(()=>{const o=y(t);o&&document.body.removeChild(o)});function f(o,n){const{handler:i,disabled:l}=o;l||(s.value=!1,n==null||n.stopPropagation(),n==null||n.preventDefault(),i==null||i())}function u(o){return o.map(n=>{const{disabled:i,label:l,children:a,divider:m=!1}=n,p={item:n,handler:f,showIcon:e.showIcon};return!a||a.length===0?c(V,null,[c(v.Item,{disabled:i,class:`${h}__item`,key:l},{default:()=>[c(k,p,null)]}),m?c(W,{key:`d-${l}`},null):null]):y(s)?c(v.SubMenu,{key:l,disabled:i,popupClassName:`${h}__popup`},{title:()=>c(k,p,null),default:()=>u(a)}):null})}return()=>{let o;if(!y(s))return null;const{items:n}=e;return c("div",{class:h},[c(v,{inlineIndent:12,mode:"vertical",ref:t,style:y(r)},U(o=u(n))?o:{default:()=>[o]})])}}});const d={domList:[],resolve:()=>{}},q=function(e){const{event:t}=e||{};if(t&&(t==null||t.preventDefault()),!!F)return new Promise(s=>{const r=document.body,f=document.createElement("div"),u={};e.styles&&(u.styles=e.styles),e.items&&(u.items=e.items),e.event&&(u.customEvent=t,u.axis={x:t.clientX,y:t.clientY});const o=c(Y,u);K(o,f);const n=function(){d.resolve("")};d.domList.push(f);const i=function(){d.domList.forEach(l=>{try{l&&r.removeChild(l)}catch(a){}}),r.removeEventListener("click",n),r.removeEventListener("scroll",n)};d.resolve=function(l){i(),s(l)},i(),r.appendChild(f),r.addEventListener("click",n),r.addEventListener("scroll",n)})},M=function(){d&&(d.resolve(""),d.domList=[])};function Z(e=!0){return T()&&e&&E(()=>{M()}),[q,M]}export{Z as u};
