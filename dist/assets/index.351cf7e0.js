var F=(t,i,a)=>new Promise((R,k)=>{var g=l=>{try{f(a.next(l))}catch(b){k(b)}},A=l=>{try{f(a.throw(l))}catch(b){k(b)}},f=l=>l.done?R(l.value):Promise.resolve(l.value).then(g,A);f((a=a.apply(t,i)).next())});import{av as se,r as ae,f as W,a as ne,b6 as ie,cD as re,s as le,v as ce,N as de,E as D,o as d,j as y,y as r,m as C,n as p,q as P,k as m,t as S,h as T,z as E,cR as pe,cS as me,D as ge}from"./index.976f028d.js";import{cardList as fe}from"./data.05aca618.js";import{P as Be}from"./index.9126614a.js";import{C as z}from"./index.7b813a52.js";import"./index.21e7287e.js";/* empty css               */import{L as I}from"./index.347fba13.js";import{a as Fe,g as De}from"./question.f4b5a34e.js";import{B as Ce}from"./TableImg.5adf77e9.js";import{B as Ee,T as Ae}from"./BasicForm.4ff9ea41.js";import{u as be}from"./useTable.dd834775.js";import{getBasicColumns as he}from"./tableData.72f39dd1.js";import{u as V}from"./useForm.0b456d22.js";import{a as we,b as ye}from"./info.5d6226a5.js";import{duox as ke,dx as ve,pd as _e}from"./choose.209a17f0.js";import{R as N,C as K}from"./index.651a19c8.js";import"./index.2440c5f5.js";import"./index.b556a78a.js";import"./useSize.a0f971b4.js";import"./eagerComputed.b4caa6b1.js";import"./useWindowSizeFn.43b44744.js";import"./useContentViewHeight.fa21b489.js";import"./ArrowLeftOutlined.6cbdd482.js";import"./index.d76d5ff0.js";import"./transButton.a71e0ac3.js";import"./index.be0e7c6d.js";import"./useRefs.78498e36.js";import"./PlusOutlined.b74f1fca.js";import"./Col.dd538940.js";import"./useFlexGapSupport.4b430c1e.js";import"./index.1d81a672.js";import"./Checkbox.77af456b.js";import"./index.53bde1b9.js";import"./index.a30387ae.js";import"./index.5d9f2293.js";import"./index.b4585842.js";import"./index.4e9d050c.js";import"./uuid.2b29000c.js";import"./index.354b005f.js";import"./_baseIteratee.6f2aea4e.js";import"./get.177428c4.js";import"./DeleteOutlined.b2cc13f1.js";import"./index.04eaadeb.js";import"./Form.50c6b0cf.js";import"./index.448301d3.js";import"./FullscreenOutlined.31e68573.js";import"./index.093def42.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.dd657224.js";import"./index.185f09b6.js";import"./scrollTo.5c1783ce.js";import"./index.d384ecff.js";import"./index.b2e43c68.js";/* empty css              */import"./index.d04c7300.js";import"./index.8e4fa7db.js";import"./index.e5e60202.js";import"./download.ed803174.js";import"./base64Conver.08b9f4ec.js";import"./index.7944a3bb.js";import"./uniqBy.c45ce52f.js";const{notification:s}=ge(),qe=ae(),$=W(()=>qe.getUserInfo),Se=()=>[{field:"level",component:"Select",label:"level",colProps:{span:8},componentProps:{options:[{label:"\u7B80\u5355",value:"1",key:"1"},{label:"\u4E2D\u7B49",value:"2",key:"2"},{label:"\u56F0\u96BE",value:"3",key:"3"}]}},{field:"type",component:"Select",label:"type",colProps:{span:8},componentProps:{options:[{label:"\u5224\u65AD",value:"1",key:"1"},{label:"\u5355\u9009",value:"2",key:"2"},{label:"\u591A\u9009",value:"3",key:"3"},{label:"\u586B\u7A7A",value:"4",key:"4"},{label:"\u8BBA\u8FF0",value:"5",key:"5"}]}}],Ie=ne({components:{Icon:ie,PageWrapper:Be,[z.name]:z,[I.name]:I,[I.Item.name]:I.Item,[N.name]:N,[K.name]:K,BasicTable:Ce,BasicForm:Ee,TableAction:Ae,CollapseContainer:re},setup(){const[t,{setFieldsValue:i,getFieldsValue:a,submit:R}]=V({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),[k]=V({labelWidth:120,schemas:Se(),actionColOptions:{span:24},compact:!0,showAdvancedButton:!0}),g=le(!0),[A,{setLoading:f,setColumns:l,getColumns:b,getDataSource:B,getRawDataSource:j,reload:L,getPaginationRef:n,setPagination:Q,getSelectRows:U,getSelectRowKeys:He,setSelectedRowKeys:Ge,clearSelectedRowKeys:Je}]=be({title:"\u9898\u5E93",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:he(),showTableSetting:!0,pagination:g,sortFn:()=>{U()},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=ce({questionList:[],formData:{},obj:{orderRule:0,pageNum:1,pageSize:10,level:0,typ:0},detail:!0,quesDetail:{},detailId:0,schemas:[],answerIf:!1}),O=o=>{o&&(e.formData=o,e.formData.level!=null?e.obj.level=+e.formData.level:e.obj.level=0,e.formData.type!=null?e.obj.type=+e.formData.type:e.obj.type=0,h())},H=()=>{e.obj.type=0,e.obj.level=0,h()};function h(){return F(this,null,function*(){e.obj;const o=yield Fe(e.obj);g.value={total:o.data.total},g.value={total:o.data.total},e.questionList=o.data.list,e.questionList,e.questionList.map(u=>{switch(u.level){case 1:u.level="\u7B80\u5355";break;case 2:u.level="\u4E2D\u7B49";break;case 3:u.level="\u56F0\u96BE";break}switch(u.type){case 1:u.type="\u5224\u65AD\u9898";break;case 2:u.type="\u5355\u9009\u9898";break;case 3:u.type="\u591A\u9009\u9898";break;case 4:u.type="\u586B\u7A7A\u9898";break;case 5:u.type="\u8BBA\u8FF0\u9898";break}})})}function G(o){return F(this,null,function*(){e.detailId=o.id;let u=q(o.type);if(u===4||u===5){s.warning({message:"\u6682\u4E0D\u652F\u6301\u7EC3\u4E60",duration:3});return}switch(u){case 1:e.schemas=_e();break;case 2:e.schemas=ve();break;case 3:e.schemas=ke();break}yield v(o.id,u)})}de(()=>{h(e.obj)}),W(()=>(Math.floor(n().total/n().pageSize)+1==n().current&&(e.obj.pageNum=n().current,e.obj.pageSize=n().pageSize,h()),n().current));function J(){return F(this,null,function*(){e.obj.pageNum=n().current,e.obj.pageSize=n().pageSize,h()})}const X=()=>{e.detail=!0};function v(o,u){return F(this,null,function*(){const c=yield De(o,u);e.quesDetail=c.data,e.detail=!1})}const Y=()=>{},Z=()=>{try{e.questionList.some((o,u,c)=>{if(o.id==e.detailId)throw u-1<0?(s.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=c[u-1].id,w(),v(e.detailId,q(c[u-1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(o){}},_=()=>{try{e.questionList.some((o,u,c)=>{if(o.id==e.detailId)throw u+1>=c.length?(s.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=c[u+1].id,w(),v(e.detailId,q(c[u+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(o){}},q=o=>{switch(o){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function x(){return F(this,null,function*(){const o=yield we({quesId:e.quesDetail.id,userId:+$.value.id});o.code==="ITEST-200"?s.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):s.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}function ee(){return F(this,null,function*(){const o=yield ye({questionId:e.quesDetail.id,userId:+$.value.id});o.code==="ITEST-200"?s.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):s.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}const te=()=>{if(a().answer1,a().answer1==null){s.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==a().answer1?(i({answer1:null}),w(),s.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),_()):(i({answer1:null}),s.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})):e.quesDetail.type===2?(e.quesDetail.rightAnswer,a(),e.quesDetail.rightAnswer==a().answer1?(i({answer1:null}),w(),s.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),_()):(i({answer1:null}),s.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}))):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,a().answer1.join(""),e.quesDetail.rightAnswer==a().answer1.join("")?(i({answer1:null}),w(),s.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),_()):(i({answer1:null}),s.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})))};function oe(o,u){return[{label:"\u67E5\u770B",color:"success"}]}const ue=()=>{e.answerIf=!0},w=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:fe,getQuestions:h,selectQuestions:O,data:e,pagination:g,register:k,register1:t,questionDetail:G,registerTable:A,pageChange:J,resetQuestions:H,exit:X,QuestionDetail:v,lastQues:Z,nextQues:_,typeToId:q,addErrK:x,addCollK:ee,getContent:Y,handleSubmit:te,createActions:oe,lookAnswer:ue,closeAnswer:w}}}),M=t=>(pe("data-v-4003caf5"),t=t(),me(),t),Re=E(" \u70ED\u60C5\u548C\u6B32\u671B\u53EF\u4EE5\u7A81\u7834\u4E00\u5207\u96BE\u5173\u3002 "),je=M(()=>C("span",null,"\u5F00\u59CB\u81EA\u6D4B",-1)),Te=M(()=>C("span",null,"\u5F00\u59CB\u9519\u9898\u8BAD\u7EC3",-1)),Le={class:"p-4"},Qe={class:"m-15",style:{"font-size":"20px"}},Pe=E("\u9000\u51FA\u8BAD\u7EC3"),ze=E("\u67E5\u770B\u7B54\u6848"),Ve=E("\u4E0A\u4E00\u4E2A"),Ne=E("\u4E0B\u4E00\u4E2A"),Ke=E("\u6DFB\u52A0\u5230\u9519\u9898\u5E93"),$e=E("\u6DFB\u52A0\u5230\u6536\u85CF\u5939"),We={key:0},Me={key:1},Ue={key:2};function Oe(t,i,a,R,k,g){const A=D("Icon"),f=D("BasicForm"),l=D("TableAction"),b=D("BasicTable"),B=D("a-button"),j=D("CollapseContainer"),L=D("PageWrapper");return d(),y(L,{class:P(t.prefixCls),title:"\u9898\u5E93"},{headerContent:r(()=>[Re,C("div",{class:P(`${t.prefixCls}__link`)},[C("a",null,[p(A,{icon:"bx:bx-paper-plane",color:"#1890ff"}),je]),C("a",null,[p(A,{icon:"ion:document-text-outline",color:"#1890ff"}),Te])],2)]),default:r(()=>[t.data.detail?(d(),y(f,{key:0,onRegister:t.register,onSubmit:t.selectQuestions,onReset:t.resetQuestions,modelValue:t.level,"onUpdate:modelValue":i[0]||(i[0]=n=>t.level=n)},null,8,["onRegister","onSubmit","onReset","modelValue"])):m("",!0),C("div",Le,[t.data.detail?(d(),y(b,{key:0,onRegister:t.registerTable,onRowClick:t.questionDetail,dataSource:t.data.questionList,onChange:t.pageChange},{action:r(({record:n,column:Q})=>[p(l,{actions:t.createActions(n,Q)},null,8,["actions"])]),_:1},8,["onRegister","onRowClick","dataSource","onChange"])):m("",!0)]),t.data.detail?m("",!0):(d(),y(j,{key:1,title:`\u9898\u76EEID\uFF1A${t.data.quesDetail.id}`},{default:r(()=>[C("div",Qe,S(t.data.quesDetail.content),1),t.data.detail?m("",!0):(d(),y(f,{key:0,onRegister:t.register1,onSubmit:t.handleSubmit,onReset:t.handleReset,schemas:t.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])),p(B,{onClick:t.exit,class:"m-5"},{default:r(()=>[Pe]),_:1},8,["onClick"]),p(B,{onClick:t.lookAnswer,class:"m-5"},{default:r(()=>[ze]),_:1},8,["onClick"]),p(B,{onClick:t.lastQues,class:"m-5"},{default:r(()=>[Ve]),_:1},8,["onClick"]),p(B,{onClick:t.nextQues,class:"m-5"},{default:r(()=>[Ne]),_:1},8,["onClick"]),p(B,{onClick:t.addErrK,class:"m-5"},{default:r(()=>[Ke]),_:1},8,["onClick"]),p(B,{onClick:t.addCollK,class:"m-5"},{default:r(()=>[$e]),_:1},8,["onClick"])]),_:1},8,["title"])),t.data.answerIf?(d(),y(j,{key:2,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:r(()=>[t.data.quesDetail.answer?(d(),T("h1",We,"\u7B54\u6848\uFF1A"+S(t.data.quesDetail.answer),1)):m("",!0),t.data.quesDetail.rightAnswer?(d(),T("h1",Me,"\u7B54\u6848\uFF1A"+S(t.data.quesDetail.rightAnswer),1)):m("",!0),t.data.quesDetail.analysis?(d(),T("h1",Ue,"\u7B54\u6848\u89E3\u6790\uFF1A"+S(t.data.quesDetail.analysis),1)):m("",!0)]),_:1})):m("",!0)]),_:1},8,["class"])}var so=se(Ie,[["render",Oe],["__scopeId","data-v-4003caf5"]]);export{so as default};
