var M=Object.defineProperty,P=Object.defineProperties;var U=Object.getOwnPropertyDescriptors;var D=Object.getOwnPropertySymbols;var H=Object.prototype.hasOwnProperty,Y=Object.prototype.propertyIsEnumerable;var V=(t,o,e)=>o in t?M(t,o,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[o]=e,j=(t,o)=>{for(var e in o||(o={}))H.call(o,e)&&V(t,e,o[e]);if(D)for(var e of D(o))Y.call(o,e)&&V(t,e,o[e]);return t},T=(t,o)=>P(t,U(o));var N=(t,o,e)=>new Promise((E,C)=>{var f=r=>{try{m(e.next(r))}catch(g){C(g)}},h=r=>{try{m(e.throw(r))}catch(g){C(g)}},m=r=>r.done?E(r.value):Promise.resolve(r.value).then(f,h);m((e=e.apply(t,o)).next())});import{g as Q,s as G}from"./exam.81751f0c.js";import K from"./Danxuan.d15b567d.js";import W from"./Panduan.dd325b0f.js";import X from"./Duoxuan.36dff271.js";import Z from"./Tiank.f7d04f8d.js";import ee from"./Lunshu.3d04a8c1.js";import{a as te,d5 as ne,d6 as se,v as oe,a5 as ue,f as re,at as ae,U as ie,J as i,o as p,h as O,n as d,y as l,E as J,Y as $,m as z,t as v,j as y,z as _,k,H as le}from"./index.7213dd96.js";import"./question.f7a7f083.js";const{notification:S}=le(),de=te({components:{ArrowRightOutlined:ne,ArrowLeftOutlined:se,Danxuan:K,Panduan:W,Duoxuan:X,Tiank:Z,Lunshu:ee},props:{paperId:{type:String,required:!0}},emits:["subExam"],setup(t,o){const e=oe({list:[],listCurrent:{},cur:0,creatorId:0,description:"",id:0,name:"",type:0,visible:!1,score:0,examRe:[],examObj:{bigQuesId:0,bigQuesOrderId:0,corrected:0,examId:0,quesId:0,score:0,userAnswer:"",paperId:0},allNum:0,loading:!0});ue(()=>{E()});function E(){return N(this,null,function*(){let s=yield Q(t.paperId);s.code==="ITEST-200"&&(e.list=s.data.bigQuesVoList,e.creatorId=s.data.creatorId,e.description=s.data.description,e.id=s.data.id,e.name=s.data.name,e.list.forEach(u=>{e.allNum+=u.quesList.length}),C(s.data),r(e.cur))})}const C=s=>{e.examObj.paperId=s.id,e.examObj.examId=t.paperId};let f;const h=()=>{e.cur>0?r(--e.cur):f||(S.warning({message:"\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),f=1,setTimeout(()=>{f=null},2e3))},m=()=>{e.list.length-1>e.cur?r(++e.cur):f||(S.warning({message:"\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),f=1,setTimeout(()=>{f=null},2e3))},r=s=>{e.listCurrent=e.list[s],e.loading=!1},g=()=>{e.visible=!e.visible},b=re(()=>e.listCurrent.totalScore/e.listCurrent.quesList.length),q=new Map,A=(s,u,n,I)=>{if(s?(e.score+=b.value,q.set(u,1)):q.has(u)&&(e.score-=b.value),e.examRe.length!==0){let c=0;for(let a=0;a<e.examRe.length;a++)if(e.examRe[a].quesId===u){n==""?e.examRe.splice(a,1):(e.examRe[a].score=e.score,e.examRe[a].userAnswer=n),c=1;return}if(c==0){let a=JSON.parse(JSON.stringify(e.examObj));a.score=e.score,a.userAnswer=n,a.corrected=I,a.bigQuesOrderId=e.listCurrent.orderId,a.bigQuesId=e.listCurrent.id,a.quesId=u,e.examRe.push(a)}}else{let c=JSON.parse(JSON.stringify(e.examObj));c.score=e.score,c.userAnswer=n,c.corrected=I,c.bigQuesOrderId=e.listCurrent.orderId,c.bigQuesId=e.listCurrent.id,c.quesId=u,e.examRe.push(c)}},w=()=>{g()},R=()=>{if(e.examRe.length!==e.allNum){S.warning({message:"\u7B54\u9898\u672A\u5168\u90E8\u5B8C\u6210\uFF01",duration:3});return}x()};function x(){return N(this,null,function*(){e.examRe,(yield G(t.paperId,e.examRe)).code=="ITEST-200"?(S.success({message:"\u63D0\u4EA4\u8BD5\u5377\u6210\u529F",duration:3}),o.emit("subExam"),e.examRe=[]):S.error({message:"\u51FA\u9519\u5566\uFF0C\u8BF7\u8054\u7CFB\u7BA1\u7406\u5458",duration:3})})}const F=s=>{for(let u in e.examRe)if(e.examRe[u].quesId===s)return e.examRe[u].userAnswer},B=s=>{for(let u=0;u<e.examRe.length;u++)if(e.examRe[u].quesId===s)return"primary"},L=s=>{e.visible=!e.visible,e.loading=!0,e.cur=s-1,r(e.cur)};return T(j({},ae(e)),{oneScore:b,getExam:Q,last:h,next:m,currentBigQues:r,lookAll:g,computedScore:A,handleOk:w,submit:R,getValue:F,finished:B,jump:L})}}),ce={class:"demo-page-header",style:{"background-color":"#f5f5f5",padding:"24px"}},me=_("\u4E0A\u4E00\u5927\u9898 "),pe=_(" \u4E0B\u4E00\u5927\u9898 "),fe=_("\u9884\u89C8\u5168\u5377"),ge=_("\u63D0\u4EA4\u8BD5\u5377"),_e={style:{margin:"10px"}},Ie={style:{margin:"10px"}};function ye(t,o,e,E,C,f){const h=i("ArrowLeftOutlined"),m=i("a-button"),r=i("ArrowRightOutlined"),g=i("a-modal"),b=i("a-descriptions-item"),q=i("a-descriptions"),A=i("a-list-item-meta"),w=i("a-list-item"),R=i("Panduan"),x=i("Danxuan"),F=i("Duoxuan"),B=i("Tiank"),L=i("Lunshu"),s=i("a-list"),u=i("a-page-header");return p(),O("div",ce,[d(u,{ghost:!1,title:"\u4F5C\u7B54","sub-title":""},{extra:l(()=>[d(m,{onClick:t.last},{default:l(()=>[d(h),me]),_:1},8,["onClick"]),d(m,{onClick:t.next},{default:l(()=>[pe,d(r)]),_:1},8,["onClick"]),d(m,{type:"primary",onClick:t.lookAll},{default:l(()=>[fe]),_:1},8,["onClick"]),d(m,{shape:"round",type:"primary",onClick:t.submit},{default:l(()=>[ge]),_:1},8,["onClick"]),d(g,{visible:t.visible,"onUpdate:visible":o[0]||(o[0]=n=>t.visible=n),title:"\u5168\u5377\u9884\u89C8",onOk:t.handleOk},{default:l(()=>[(p(!0),O(J,null,$(t.list,n=>(p(),O("div",_e,[z("div",Ie,[z("a",null,v(n.name),1)]),(p(!0),O(J,null,$(n.quesList,(I,c)=>(p(),y(m,{style:{margin:"10px"},type:t.finished(I.id),onClick:a=>t.jump(n.orderId)},{default:l(()=>[_(v(1+c),1)]),_:2},1032,["type","onClick"]))),256))]))),256))]),_:1},8,["visible","onOk"])]),default:l(()=>[d(q,{size:"small",column:1},{default:l(()=>[d(b,{label:""},{default:l(()=>[_(v(t.listCurrent.name),1)]),_:1})]),_:1}),d(s,{"item-layout":"horizontal","data-source":t.listCurrent.quesList,loading:t.loading},{renderItem:l(({item:n,index:I})=>[d(w,null,{default:l(()=>[d(A,null,{avatar:l(()=>[_(v(1+I)+".",1)]),title:l(()=>[_(v(n.content),1)]),_:2},1024)]),_:2},1024),t.listCurrent.type===1?(p(),y(R,{key:0,questionId:n.id,typeId:t.listCurrent.type,value:t.getValue(n.id),onScore:t.computedScore},null,8,["questionId","typeId","value","onScore"])):k("",!0),t.listCurrent.type===2?(p(),y(x,{key:1,select:n.selectionList,questionId:n.id,typeId:t.listCurrent.type,value:t.getValue(n.id),onScore:t.computedScore},null,8,["select","questionId","typeId","value","onScore"])):k("",!0),t.listCurrent.type===3?(p(),y(F,{key:2,select:n.selectionList,questionId:n.id,typeId:t.listCurrent.type,value:t.getValue(n.id),onScore:t.computedScore},null,8,["select","questionId","typeId","value","onScore"])):k("",!0),t.listCurrent.type===4?(p(),y(B,{key:3,questionId:n.id,typeId:t.listCurrent.type,value:t.getValue(n.id),answerNum:n.answerNum,onScore:t.computedScore},null,8,["questionId","typeId","value","answerNum","onScore"])):k("",!0),t.listCurrent.type===5?(p(),y(L,{key:4,questionId:n.id,typeId:t.listCurrent.type,value:t.getValue(n.id),onScore:t.computedScore},null,8,["questionId","typeId","value","onScore"])):k("",!0)]),_:1},8,["data-source","loading"])]),_:1})])}var Ae=ie(de,[["render",ye],["__scopeId","data-v-1e89211f"]]);export{Ae as default};
