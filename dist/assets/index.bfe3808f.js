var D=(u,c,l)=>new Promise((R,w)=>{var F=o=>{try{E(l.next(o))}catch(h){w(h)}},b=o=>{try{E(l.throw(o))}catch(h){w(h)}},E=o=>o.done?R(o.value):Promise.resolve(o.value).then(F,b);E((l=l.apply(u,c)).next())});import{U as oe,r as ae,f as U,a as ne,an as le,bF as V,bI as I,R as K,G as N,bC as ie,s as re,v as ce,a5 as de,J as A,o as i,j as C,y as r,m as g,n as p,q as $,k as m,t as k,h as v,Y as pe,E as me,z as B,bJ as ge,bK as Be,H as Fe}from"./index.5903aaea.js";import{cardList as Ee}from"./data.05aca618.js";import{P as fe}from"./index.2cbd72b1.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{a as De,g as Ae}from"./question.a0439744.js";import{B as Ce}from"./TableImg.f41acf2c.js";import{B as be,T as he}from"./BasicForm.d88c9cb9.js";import{u as ye}from"./useTable.88a45bec.js";import{getBasicColumns as we}from"./tableData.72f39dd1.js";import{u as W}from"./useForm.522fb0fd.js";import{a as ke,b as ve}from"./info.b3379be4.js";import{duox as _e,dx as qe,pd as Se}from"./choose.d9417bb2.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.9bc4a4d0.js";import"./useContentViewHeight.0ad58928.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import"./index.2670c85d.js";import"./FullscreenOutlined.115d63d2.js";/* empty css               */import"./sortable.esm.2632adaa.js";import"./RedoOutlined.4a997f15.js";/* empty css                *//* empty css                */import"./index.3f4b20fc.js";/* empty css               */import"./index.b1c133f4.js";/* empty css                *//* empty css                *//* empty css                */import"./download.8156160a.js";import"./uniqBy.03c90016.js";const{notification:n}=Fe(),Ie=ae(),M=U(()=>Ie.getUserInfo),Re=()=>[{field:"level",component:"Select",label:"level",colProps:{span:8},componentProps:{options:[{label:"\u7B80\u5355",value:"1",key:"1"},{label:"\u4E2D\u7B49",value:"2",key:"2"},{label:"\u56F0\u96BE",value:"3",key:"3"}]}},{field:"type",component:"Select",label:"type",colProps:{span:8},componentProps:{options:[{label:"\u5224\u65AD",value:"1",key:"1"},{label:"\u5355\u9009",value:"2",key:"2"},{label:"\u591A\u9009",value:"3",key:"3"},{label:"\u586B\u7A7A",value:"4",key:"4"},{label:"\u8BBA\u8FF0",value:"5",key:"5"}]}}],je=ne({components:{Icon:le,PageWrapper:fe,[V.name]:V,[I.name]:I,[I.Item.name]:I.Item,[K.name]:K,[N.name]:N,BasicTable:Ce,BasicForm:be,TableAction:he,CollapseContainer:ie},setup(){const[u,{setFieldsValue:c,getFieldsValue:l,submit:R}]=W({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),[w]=W({labelWidth:120,schemas:Re(),actionColOptions:{span:24},compact:!0,showAdvancedButton:!0}),F=re(!0),[b,{setLoading:E,setColumns:o,getColumns:h,getDataSource:L,getRawDataSource:j,reload:Q,getPaginationRef:a,setPagination:z,getSelectRows:J,getSelectRowKeys:Ye,setSelectedRowKeys:Xe,clearSelectedRowKeys:Ze}]=ye({title:"\u9898\u5E93",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:we(),showTableSetting:!0,pagination:F,sortFn:()=>{J()},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=ce({questionList:[],formData:{},obj:{orderRule:0,pageNum:1,pageSize:10,level:0,typ:0},detail:!0,quesDetail:{},detailId:0,schemas:[],answerIf:!1}),O=t=>{t&&(e.formData=t,e.formData.level!=null?e.obj.level=+e.formData.level:e.obj.level=0,e.formData.type!=null?e.obj.type=+e.formData.type:e.obj.type=0,f())},G=()=>{e.obj.type=0,e.obj.level=0,f()};function f(){return D(this,null,function*(){e.obj;const t=yield De(e.obj);F.value={total:t.data.total},F.value={total:t.data.total},e.questionList=t.data.list,e.questionList,e.questionList.map(s=>{switch(s.level){case 1:s.level="\u7B80\u5355";break;case 2:s.level="\u4E2D\u7B49";break;case 3:s.level="\u56F0\u96BE";break}switch(s.type){case 1:s.type="\u5224\u65AD\u9898";break;case 2:s.type="\u5355\u9009\u9898";break;case 3:s.type="\u591A\u9009\u9898";break;case 4:s.type="\u586B\u7A7A\u9898";break;case 5:s.type="\u8BBA\u8FF0\u9898";break}})})}function P(t){return D(this,null,function*(){e.detailId=t.id;let s=S(t.type);if(s===4||s===5){n.warning({message:"\u6682\u4E0D\u652F\u6301\u7EC3\u4E60",duration:3});return}switch(s){case 1:e.schemas=Se();break;case 2:e.schemas=qe();break;case 3:e.schemas=_e();break}yield _(t.id,s)})}de(()=>{f(e.obj)}),U(()=>(Math.floor(a().total/a().pageSize)+1==a().current&&(e.obj.pageNum=a().current,e.obj.pageSize=a().pageSize,f()),a().current));function Y(){return D(this,null,function*(){e.obj.pageNum=a().current,e.obj.pageSize=a().pageSize,f()})}const X=()=>{e.detail=!0};function _(t,s){return D(this,null,function*(){const d=yield Ae(t,s);e.quesDetail=d.data,e.detail=!1})}const Z=()=>{},x=()=>{try{e.questionList.some((t,s,d)=>{if(t.id==e.detailId)throw s-1<0?(n.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=d[s-1].id,y(),_(e.detailId,S(d[s-1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(t){}},q=()=>{try{e.questionList.some((t,s,d)=>{if(t.id==e.detailId)throw s+1>=d.length?(n.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=d[s+1].id,y(),_(e.detailId,S(d[s+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(t){}},S=t=>{switch(t){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function T(){return D(this,null,function*(){const t=yield ke({quesId:e.quesDetail.id,userId:+M.value.id});t.code==="ITEST-200"?n.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):n.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}function ee(){return D(this,null,function*(){const t=yield ve({questionId:e.quesDetail.id,userId:+M.value.id});t.code==="ITEST-200"?n.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):n.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}const ue=()=>{if(l().answer1,l().answer1==null){n.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==l().answer1?(c({answer1:null}),y(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),q()):(c({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}),T()):e.quesDetail.type===2?(e.quesDetail.rightAnswer,l(),e.quesDetail.rightAnswer==l().answer1?(c({answer1:null}),y(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),q()):(c({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3}),T())):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,l().answer1.join(""),e.quesDetail.rightAnswer==l().answer1.join("")?(c({answer1:null}),y(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),q()):(c({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3})))};function te(t,s){return[{label:"\u67E5\u770B",color:"success",onClick:P.bind(null,t)}]}const se=()=>{e.answerIf=!0},y=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:Ee,getQuestions:f,selectQuestions:O,data:e,pagination:F,register:w,register1:u,questionDetail:P,registerTable:b,pageChange:Y,resetQuestions:G,exit:X,QuestionDetail:_,lastQues:x,nextQues:q,typeToId:S,addErrK:T,addCollK:ee,getContent:Z,handleSubmit:ue,createActions:te,lookAnswer:se,closeAnswer:y,sortByTime:()=>{e.obj.orderRule=(e.obj.orderRule+1)%2,e.obj.pageNum=a().current,e.obj.pageSize=a().pageSize,f()}}}}),H=u=>(ge("data-v-d767dd66"),u=u(),Be(),u),Te=B(" \u70ED\u60C5\u548C\u6B32\u671B\u53EF\u4EE5\u7A81\u7834\u4E00\u5207\u96BE\u5173\u3002 "),Le=H(()=>g("span",null,"\u5F00\u59CB\u81EA\u6D4B",-1)),Qe=H(()=>g("span",null,"\u5F00\u59CB\u9519\u9898\u8BAD\u7EC3",-1)),ze=B("\u70B9\u51FB\u6309\u521B\u5EFA\u65F6\u95F4\u6392\u5E8F"),Pe={class:"p-4"},Ve={class:"m-15"},Ke=B("\u9000\u51FA\u8BAD\u7EC3"),Ne=B("\u67E5\u770B\u7B54\u6848"),$e=B("\u4E0A\u4E00\u4E2A"),We=B("\u4E0B\u4E00\u4E2A"),Me=B("\u6DFB\u52A0\u5230\u9519\u9898\u5E93"),Ue=B("\u6DFB\u52A0\u5230\u6536\u85CF\u5939"),He={key:0},Je={key:1},Oe={key:2};function Ge(u,c,l,R,w,F){const b=A("Icon"),E=A("BasicForm"),o=A("a-button"),h=A("TableAction"),L=A("BasicTable"),j=A("CollapseContainer"),Q=A("PageWrapper");return i(),C(Q,{class:$(u.prefixCls),title:"\u9898\u5E93"},{headerContent:r(()=>[Te,g("div",{class:$(`${u.prefixCls}__link`)},[g("a",null,[p(b,{icon:"bx:bx-paper-plane",color:"#1890ff"}),Le]),g("a",null,[p(b,{icon:"ion:document-text-outline",color:"#1890ff"}),Qe])],2)]),default:r(()=>[u.data.detail?(i(),C(E,{key:0,onRegister:u.register,onSubmit:u.selectQuestions,onReset:u.resetQuestions,modelValue:u.level,"onUpdate:modelValue":c[0]||(c[0]=a=>u.level=a)},null,8,["onRegister","onSubmit","onReset","modelValue"])):m("",!0),u.data.detail?(i(),C(o,{key:1,onClick:u.sortByTime},{default:r(()=>[ze]),_:1},8,["onClick"])):m("",!0),g("div",Pe,[u.data.detail?(i(),C(L,{key:0,onRegister:u.registerTable,onRowClick:u.questionDetail,dataSource:u.data.questionList,onChange:u.pageChange},{action:r(({record:a,column:z})=>[p(h,{actions:u.createActions(a,z)},null,8,["actions"])]),_:1},8,["onRegister","onRowClick","dataSource","onChange"])):m("",!0)]),u.data.detail?m("",!0):(i(),C(j,{key:2,title:`\u9898\u76EEID\uFF1A${u.data.quesDetail.id}`},{default:r(()=>[g("div",Ve,k(u.data.quesDetail.content),1),(i(!0),v(me,null,pe(u.data.quesDetail.selectionList,a=>(i(),v("ul",{class:"m-15",key:u.data.quesDetail.id},[g("li",null,k(a),1)]))),128)),u.data.detail?m("",!0):(i(),C(E,{key:0,onRegister:u.register1,onSubmit:u.handleSubmit,onReset:u.handleReset,schemas:u.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])),p(o,{onClick:u.exit,class:"m-5"},{default:r(()=>[Ke]),_:1},8,["onClick"]),p(o,{onClick:u.lookAnswer,class:"m-5"},{default:r(()=>[Ne]),_:1},8,["onClick"]),p(o,{onClick:u.lastQues,class:"m-5"},{default:r(()=>[$e]),_:1},8,["onClick"]),p(o,{onClick:u.nextQues,class:"m-5"},{default:r(()=>[We]),_:1},8,["onClick"]),p(o,{onClick:u.addErrK,class:"m-5"},{default:r(()=>[Me]),_:1},8,["onClick"]),p(o,{onClick:u.addCollK,class:"m-5"},{default:r(()=>[Ue]),_:1},8,["onClick"])]),_:1},8,["title"])),u.data.answerIf?(i(),C(j,{key:3,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:r(()=>[u.data.quesDetail.answer?(i(),v("h1",He,"\u7B54\u6848\uFF1A"+k(u.data.quesDetail.answer),1)):m("",!0),u.data.quesDetail.rightAnswer?(i(),v("h1",Je,"\u7B54\u6848\uFF1A"+k(u.data.quesDetail.rightAnswer),1)):m("",!0),u.data.quesDetail.analysis?(i(),v("h1",Oe,"\u7B54\u6848\u89E3\u6790\uFF1A"+k(u.data.quesDetail.analysis),1)):m("",!0)]),_:1})):m("",!0)]),_:1},8,["class"])}var Ku=oe(je,[["render",Ge],["__scopeId","data-v-d767dd66"]]);export{Ku as default};
