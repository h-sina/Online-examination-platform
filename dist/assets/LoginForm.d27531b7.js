var E=(B,r,u)=>new Promise((i,w)=>{var t=l=>{try{m(u.next(l))}catch(p){w(p)}},x=l=>{try{m(u.throw(l))}catch(p){w(p)}},m=l=>l.done?i(l.value):Promise.resolve(l.value).then(t,x);m((u=u.apply(B,r)).next())});import{a as z,F as R,I as F,c as L,b as A,r as U,s as b,v as G,f as K,i as e,o as V,h as q,w as I,x as N,n as s,y as a,C as O,z as d,t as c,B as f,D as H,E as W,G as h,R as j,H as J}from"./index.7213dd96.js";/* empty css              *//* empty css               *//* empty css               */import{u as Q,a as X,L as S,_ as Y,b as Z}from"./LoginFormTitle.7b0f3b22.js";const le=z({setup(B){const r=h,u=j,i=R.Item,w=F.Password,{t}=L(),{notification:x,createErrorModal:m}=J(),{prefixCls:l}=A("login"),p=U(),{setLoginState:C,getLoginState:M}=Q(),{getFormRules:P}=X(),D=b(),v=b(!1),_=b(!1),g=G({account:"2201902345",password:"password"}),{validForm:T}=Z(D),$=K(()=>e(M)===S.LOGIN);function y(k){return E(this,null,function*(){if(k){let n=yield p.login(k);n?x.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${n.nickName}`,duration:3}):(m({title:t("sys.api.errorTip"),content:t("sys.api.errMsg401")||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body}),v.value=!1)}const o=yield T();if(!!o)try{v.value=!0;let n=yield p.login({userPassword:o.password,userNumber:o.account,mode:"none"});n&&x.success({message:t("sys.login.loginSuccessTitle"),description:`${t("sys.login.loginSuccessDesc")}: ${n.nickName}`,duration:3})}catch(n){m({title:t("sys.api.errorTip"),content:t("sys.api.errMsg401")||t("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${l}`)||document.body})}finally{v.value=!1}})}return(k,o)=>(V(),q(W,null,[I(s(Y,{class:"enter-x"},null,512),[[N,e($)]]),I(s(e(R),{class:"p-4 enter-x",model:e(g),rules:e(P),ref_key:"formRef",ref:D,onKeypress:H(y,["enter"])},{default:a(()=>[s(e(i),{name:"account",class:"enter-x"},{default:a(()=>[s(e(F),{size:"large",value:e(g).account,"onUpdate:value":o[0]||(o[0]=n=>e(g).account=n),placeholder:e(t)("sys.login.userName"),class:"fix-auto-fill"},null,8,["value","placeholder"])]),_:1}),s(e(i),{name:"password",class:"enter-x"},{default:a(()=>[s(e(w),{size:"large",visibilityToggle:"",value:e(g).password,"onUpdate:value":o[1]||(o[1]=n=>e(g).password=n),placeholder:e(t)("sys.login.password")},null,8,["value","placeholder"])]),_:1}),s(e(u),{class:"enter-x"},{default:a(()=>[s(e(r),{span:12},{default:a(()=>[s(e(i),null,{default:a(()=>[s(e(O),{checked:_.value,"onUpdate:checked":o[2]||(o[2]=n=>_.value=n),size:"small"},{default:a(()=>[d(c(e(t)("sys.login.rememberMe")),1)]),_:1},8,["checked"])]),_:1})]),_:1}),s(e(r),{span:12},{default:a(()=>[s(e(i),{style:{"text-align":"right"}},{default:a(()=>[s(e(f),{type:"link",size:"small",onClick:o[3]||(o[3]=n=>e(C)(e(S).RESET_PASSWORD))},{default:a(()=>[d(c(e(t)("sys.login.forgetPassword")),1)]),_:1})]),_:1})]),_:1})]),_:1}),s(e(i),{class:"enter-x"},{default:a(()=>[s(e(f),{type:"primary",size:"large",block:"",onClick:o[4]||(o[4]=n=>y()),loading:v.value},{default:a(()=>[d(c(e(t)("sys.login.loginButton")),1)]),_:1},8,["loading"]),s(e(f),{size:"large",class:"mt-4 enter-x",block:"",onClick:o[5]||(o[5]=n=>e(C)(e(S).REGISTER))},{default:a(()=>[d(c(e(t)("sys.login.registerButton")),1)]),_:1})]),_:1}),s(e(u),{class:"enter-x"},{default:a(()=>[s(e(r),{md:8,xs:24},{default:a(()=>[s(e(f),{block:"",onClick:o[6]||(o[6]=n=>y({userPassword:"password",userNumber:"888666",mode:"none"}))},{default:a(()=>[d(c(e(t)("\u6559\u5E08\u767B\u5F55\u6D4B\u8BD5")),1)]),_:1})]),_:1}),s(e(r),{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:a(()=>[s(e(f),{block:"",onClick:o[7]||(o[7]=n=>y({userPassword:"password",userNumber:"333001",mode:"none"}))},{default:a(()=>[d(c(e(t)("\u6559\u52A1\u767B\u5F55\u6D4B\u8BD5")),1)]),_:1})]),_:1}),s(e(r),{md:7,xs:24},{default:a(()=>[s(e(f),{block:"",onClick:o[8]||(o[8]=n=>y({userPassword:"password",userNumber:"1122334455",mode:"none"}))},{default:a(()=>[d(c(e(t)("\u7BA1\u7406\u5458\u6D4B\u8BD5")),1)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules","onKeypress"]),[[N,e($)]])],64))}});export{le as default};
