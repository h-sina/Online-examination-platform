var sn=Object.defineProperty,an=Object.defineProperties;var on=Object.getOwnPropertyDescriptors;var dt=Object.getOwnPropertySymbols;var rn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable;var _e=Math.pow,ft=(e,t,n)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))rn.call(t,n)&&ft(e,n,t[n]);if(dt)for(var n of dt(t))ln.call(t,n)&&ft(e,n,t[n]);return e},te=(e,t)=>an(e,on(t));var $=(e,t,n)=>new Promise((s,a)=>{var r=l=>{try{i(n.next(l))}catch(c){a(c)}},o=l=>{try{i(n.throw(l))}catch(c){a(c)}},i=l=>l.done?s(l.value):Promise.resolve(l.value).then(r,o);i((n=n.apply(e,t)).next())});import{n as M,af as cn,bR as un,bS as dn,bT as fn,bU as pn,a as J,bV as Ae,aj as I,s as x,by as et,c as ce,f as N,i as h,bx as Le,M as De,a6 as q,V as Y,bD as Ce,U as ae,J as D,o as R,j as V,y as O,h as se,Y as de,E as ue,z as K,t as Z,W as H,a4 as we,bW as St,bX as Ee,X as be,Z as re,$ as le,a0 as he,m as ke,bY as hn,a5 as tt,bZ as pe,b_ as Ct,b$ as qe,aH as mn,aA as gn,c0 as bn,an as kt,c1 as yn,K as nt,bf as vn,aC as Mt,b as st,c2 as An,Q as Oe,aJ as ve,q as Se,k as X,c3 as wn,c4 as Sn,br as xe,O as Re,c5 as Cn,c6 as kn,v as He,at as Tt,H as Mn,c7 as Tn,c8 as In,a1 as It,I as Ie,c9 as Fn,ca as Pn,bQ as _n,C as Ft,cb as Dn,cc as Rn,cd as Be,ce as On,cf as $n,bv as at,w as Ln,x as En,bB as pt,bA as Bn,G as $e,F as ot,a3 as Ke,cg as jn,ch as Un,az as Nn,ay as xn,ci as Vn,cj as Gn,aE as zn,aK as ge,ck as rt,cl as Me,cm as Pt,cn as Wn,aM as _t,co as Xe,cp as Dt,R as Yn,D as qn,bk as Hn,bE as Kn,cq as Xn}from"./index.7213dd96.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import{u as je,C as Zn}from"./index.739838ce.js";/* empty css              */import{u as Rt,B as Ot,a as $t,b as ht}from"./index.f479f48f.js";import{d as Jn}from"./download.9569db53.js";import{u as Qn}from"./uniqBy.5cba7abe.js";var es={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},ts=es;function mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(a){return Object.getOwnPropertyDescriptor(n,a).enumerable}))),s.forEach(function(a){ns(e,a,n[a])})}return e}function ns(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(t,n){var s=mt({},t,n.attrs);return M(cn,mt({},s,{icon:ts}),null)};it.displayName="MoreOutlined";it.inheritAttrs=!1;var ss=it;function as(e){return function(t){t=un(t);var n=dn(t)?fn(t):void 0,s=n?n[0]:t.charAt(0),a=n?pn(n,1).join(""):t.slice(1);return s[e]()+a}}var os=as("toUpperCase"),rs=os;const is=J({name:"ApiRadioGroup",components:{RadioGroup:Ae.Group,RadioButton:Ae.Button,Radio:Ae},props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:I.bool,resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),immediate:I.bool.def(!0)},emits:["options-change","change"],setup(e,{emit:t}){const n=x([]),s=x(!1),a=x(!0),r=x([]),o=et(),{t:i}=ce(),[l]=je(e),c=N(()=>{const{labelField:v,valueField:u,numberToString:f}=e;return h(n).reduce((S,w)=>{if(w){const b=w[u];S.push(k({label:w[v],value:f?`${b}`:b},Le(w,[v,u])))}return S},[])});De(()=>{e.immediate&&d()}),q(()=>e.params,()=>{!h(a)&&d()},{deep:!0});function d(){return $(this,null,function*(){const v=e.api;if(!(!v||!Y(v))){n.value=[];try{s.value=!0;const u=yield v(e.params);if(Array.isArray(u)){n.value=u,p();return}e.resultField&&(n.value=Ce(u,e.resultField)||[]),p()}catch(u){console.warn(u)}finally{s.value=!1}}})}function p(){t("options-change",h(c))}function m(v,...u){r.value=u}return{state:l,getOptions:c,attrs:o,loading:s,t:i,handleChange:m,props:e}}});function ls(e,t,n,s,a,r){const o=D("RadioButton"),i=D("Radio"),l=D("RadioGroup");return R(),V(l,H(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=c=>e.state=c),"button-style":"solid",onChange:e.handleChange}),{default:O(()=>[(R(!0),se(ue,null,de(e.getOptions,c=>(R(),se(ue,{key:`${c.value}`},[e.props.isBtn?(R(),V(o,{key:0,value:c.value,disabled:c.disabled},{default:O(()=>[K(Z(c.label),1)]),_:2},1032,["value","disabled"])):(R(),V(i,{key:1,value:c.value,disabled:c.disabled},{default:O(()=>[K(Z(c.label),1)]),_:2},1032,["value","disabled"]))],64))),128))]),_:1},16,["value","onChange"])}var cs=ae(is,[["render",ls]]);const us=J({name:"RadioButtonGroup",components:{RadioGroup:Ae.Group,RadioButton:Ae.Button},props:{value:{type:[String,Number,Boolean]},options:{type:Array,default:()=>[]}},setup(e){const t=et(),[n]=je(e),s=N(()=>{const{options:a}=e;return!a||(a==null?void 0:a.length)===0?[]:a.some(o=>we(o))?a.map(o=>({label:o,value:o})):a});return{state:n,getOptions:s,attrs:t}}});function ds(e,t,n,s,a,r){const o=D("RadioButton"),i=D("RadioGroup");return R(),V(i,H(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l),"button-style":"solid"}),{default:O(()=>[(R(!0),se(ue,null,de(e.getOptions,l=>(R(),V(o,{key:`${l.value}`,value:l.value,disabled:l.disabled},{default:O(()=>[K(Z(l.label),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},16,["value"])}var fs=ae(us,[["render",ds]]);const ps=J({name:"ApiSelect",components:{Select:St,LoadingOutlined:Ee},inheritAttrs:!1,props:{value:[Array,Object,String,Number],numberToString:I.bool,api:{type:Function,default:null},params:{type:Object,default:()=>({})},resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),immediate:I.bool.def(!0),alwaysLoad:I.bool.def(!1)},emits:["options-change","change"],setup(e,{emit:t}){const n=x([]),s=x(!1),a=x(!0),r=x([]),o=et(),{t:i}=ce(),[l]=je(e,"value","change",r),c=N(()=>{const{labelField:u,valueField:f,numberToString:S}=e;return h(n).reduce((w,b)=>{if(b){const F=b[f];w.push(te(k({},Le(b,[u,f])),{label:b[u],value:S?`${F}`:F}))}return w},[])});De(()=>{e.immediate&&!e.alwaysLoad&&d()}),q(()=>e.params,()=>{!h(a)&&d()},{deep:!0});function d(){return $(this,null,function*(){const u=e.api;if(!(!u||!Y(u))){n.value=[];try{s.value=!0;const f=yield u(e.params);if(Array.isArray(f)){n.value=f,m();return}e.resultField&&(n.value=Ce(f,e.resultField)||[]),m()}catch(f){console.warn(f)}finally{s.value=!1}}})}function p(u){return $(this,null,function*(){u&&(e.alwaysLoad?yield d():!e.immediate&&h(a)&&(yield d(),a.value=!1))})}function m(){t("options-change",h(c))}function v(u,...f){r.value=f}return{state:l,attrs:o,getOptions:c,loading:s,t:i,handleFetch:p,handleChange:v}}});function hs(e,t,n,s,a,r){const o=D("LoadingOutlined"),i=D("Select");return R(),V(i,H({onDropdownVisibleChange:e.handleFetch},e.$attrs,{onChange:e.handleChange,options:e.getOptions,value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l)}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(o,{spin:""})])}:void 0,e.loading?{name:"notFoundContent",fn:O(()=>[ke("span",null,[M(o,{spin:"",class:"mr-1"}),K(" "+Z(e.t("component.form.apiSelectNotFound")),1)])])}:void 0]),1040,["onDropdownVisibleChange","onChange","options","value"])}var ms=ae(ps,[["render",hs]]);const gs=J({name:"ApiTree",components:{ATree:hn,LoadingOutlined:Ee},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:I.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:n}){const s=x([]),a=x(!1),r=x(!1),o=N(()=>k(k({},e.api?{treeData:h(s)}:{}),t));function i(...c){n("change",...c)}q(()=>e.params,()=>{!h(a)&&l()},{deep:!0}),q(()=>e.immediate,c=>{c&&!a.value&&l()}),tt(()=>{e.immediate&&l()});function l(){return $(this,null,function*(){const{api:c}=e;if(!c||!Y(c))return;r.value=!0,s.value=[];let d;try{d=yield c(e.params)}catch(p){console.error(p)}r.value=!1,d&&(pe(d)||(d=Ce(d,e.resultField)),s.value=d||[],a.value=!0,n("options-change",s.value))})}return{getAttrs:o,loading:r,handleChange:i}}});function bs(e,t,n,s,a,r){const o=D("LoadingOutlined"),i=D("a-tree");return R(),V(i,H(e.getAttrs,{onChange:e.handleChange}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(o,{spin:""})])}:void 0]),1040,["onChange"])}var ys=ae(gs,[["render",bs]]);const vs=J({name:"ApiTreeSelect",components:{ATreeSelect:Ct,LoadingOutlined:Ee},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:I.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:n}){const s=x([]),a=x(!1),r=x(!1),o=N(()=>k(k({},e.api?{treeData:h(s)}:{}),t));function i(...c){n("change",...c)}q(()=>e.params,()=>{!h(a)&&l()},{deep:!0}),q(()=>e.immediate,c=>{c&&!a.value&&l()}),tt(()=>{e.immediate&&l()});function l(){return $(this,null,function*(){const{api:c}=e;if(!c||!Y(c))return;r.value=!0,s.value=[];let d;try{d=yield c(e.params)}catch(p){console.error(p)}r.value=!1,d&&(pe(d)||(d=Ce(d,e.resultField)),s.value=d||[],a.value=!0,n("options-change",s.value))})}return{getAttrs:o,loading:r,handleChange:i}}});function As(e,t,n,s,a,r){const o=D("LoadingOutlined"),i=D("a-tree-select");return R(),V(i,H(e.getAttrs,{onChange:e.handleChange}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(o,{spin:""})])}:void 0]),1040,["onChange"])}var ws=ae(vs,[["render",As]]);const Ss=J({name:"ApiCascader",components:{LoadingOutlined:Ee,[qe.name]:qe},props:{value:{type:Array},api:{type:Function,default:null},numberToString:I.bool,resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),childrenField:I.string.def("children"),asyncFetchParamKey:I.string.def("parentCode"),immediate:I.bool.def(!0),initFetchParams:{type:Object,default:()=>({})},isLeaf:{type:Function,default:null},displayRenderArray:{type:Array}},emits:["change","defaultChange"],setup(e,{emit:t}){const n=x([]),s=x([]),a=x(!1),r=x([]),o=x(!0),{t:i}=ce(),[l]=je(e,"value","change",r);q(n,u=>{const f=c(u);s.value=f},{deep:!0});function c(u){const{labelField:f,valueField:S,numberToString:w,childrenField:b,isLeaf:F}=e;return u.reduce((T,E)=>{if(E){const z=E[S],y=te(k({},Le(E,[f,S])),{label:E[f],value:w?`${z}`:z,isLeaf:F&&typeof F=="function"?F(E):!1}),g=Reflect.get(E,b);g&&Reflect.set(y,b,c(g)),T.push(y)}return T},[])}function d(){return $(this,null,function*(){const u=e.api;if(!(!u||!Y(u))){n.value=[],a.value=!0;try{const f=yield u(e.initFetchParams);if(Array.isArray(f)){n.value=f;return}e.resultField&&(n.value=Ce(f,e.resultField)||[])}catch(f){console.warn(f)}finally{a.value=!1}}})}function p(u){return $(this,null,function*(){const f=u[u.length-1];f.loading=!0;const S=e.api;if(!(!S||!Y(S)))try{const w=yield S({[e.asyncFetchParamKey]:Reflect.get(f,"value")});if(Array.isArray(w)){const b=c(w);f.children=b;return}if(e.resultField){const b=c(Ce(w,e.resultField)||[]);f.children=b}}catch(w){console.error(w)}finally{f.loading=!1}})}De(()=>{e.immediate&&d()}),q(()=>e.initFetchParams,()=>{!h(o)&&d()},{deep:!0});function m(u,f){r.value=u,t("defaultChange",u,f)}function v({labels:u,selectedOptions:f}){return h(r).length===f.length?u.join(" / "):e.displayRenderArray?e.displayRenderArray.join(" / "):""}return{state:l,options:s,loading:a,t:i,handleChange:m,loadData:p,handleRenderDisplay:v}}});function Cs(e,t,n,s,a,r){const o=D("LoadingOutlined"),i=D("a-cascader");return R(),V(i,{value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l),options:e.options,"load-data":e.loadData,"change-on-select":"",onChange:e.handleChange,displayRender:e.handleRenderDisplay},be({_:2},[e.loading?{name:"suffixIcon",fn:O(()=>[M(o,{spin:""})])}:void 0,e.loading?{name:"notFoundContent",fn:O(()=>[ke("span",null,[M(o,{spin:"",class:"mr-1"}),K(" "+Z(e.t("component.form.apiSelectNotFound")),1)])])}:void 0]),1032,["value","options","load-data","onChange","displayRender"])}var ks=ae(Ss,[["render",Cs]]);const Lt={helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1/0},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},uploadParams:{type:Object,default:{}},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null}},Ms=te(k({value:{type:Array,default:()=>[]}},Lt),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),Ts={value:{type:Array,default:()=>[]}},Is={columns:{type:[Array],default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null}};const{t:Ve}=ce();function Fs({acceptRef:e,helpTextRef:t,maxNumberRef:n,maxSizeRef:s}){const a=N(()=>{const i=h(e);return i&&i.length>0?i:[]}),r=N(()=>h(a).map(i=>i.indexOf("/")>0||i.startsWith(".")?i:`.${i}`).join(",")),o=N(()=>{const i=h(t);if(i)return i;const l=[],c=h(e);c.length>0&&l.push(Ve("component.upload.accept",[c.join(",")]));const d=h(s);d&&l.push(Ve("component.upload.maxSize",[d]));const p=h(n);return p&&p!==1/0&&l.push(Ve("component.upload.maxNumber",[p])),l.join("\uFF0C")});return{getAccept:a,getStringAccept:r,getHelpText:o}}var Q=(e=>(e.SUCCESS="success",e.ERROR="error",e.UPLOADING="uploading",e))(Q||{});function Ps(e){return Et(e.name)}function Et(e){return/\.(jpg|jpeg|png|gif)$/i.test(e)}function _s(e){return new Promise((t,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t({result:s.result,file:e}),s.onerror=a=>n(a)})}const Bt=Symbol("basic-table");function or(e){gn(Bt,e)}function Ds(){return mn(Bt)}const{table:Rs}=bn,{pageSizeOptions:Os,defaultPageSize:$s,fetchSetting:Ls,defaultSize:Es,defaultSortFn:Bs,defaultFilterFn:js}=Rs,rr="key",ir=Os,lr=$s,cr=Ls,ur=Es,dr=Bs,fr=js,pr="center",hr="INDEX",Us="ACTION";const Ns=J({name:"TableAction",components:{Icon:kt,PopConfirmButton:yn,Divider:nt,Dropdown:vn,MoreOutlined:ss,Tooltip:Mt},props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:I.bool.def(!0),outside:I.bool,stopButtonPropagation:I.bool.def(!1)},setup(e){const{prefixCls:t}=st("basic-table-action");let n={};e.outside||(n=Ds());const{hasPermission:s}=An();function a(d){const p=d.ifShow;let m=!0;return ve(p)&&(m=p),Y(p)&&(m=p(d)),m}const r=N(()=>(Oe(e.actions)||[]).filter(d=>s(d.auth)&&a(d)).map(d=>{const{popConfirm:p}=d;return te(k(k({getPopupContainer:()=>{var m;return(m=h(n==null?void 0:n.wrapRef.value))!=null?m:document.body},type:"link",size:"small"},d),p||{}),{onConfirm:p==null?void 0:p.confirm,onCancel:p==null?void 0:p.cancel,enable:!!p})})),o=N(()=>{const d=(Oe(e.dropDownActions)||[]).filter(p=>s(p.auth)&&a(p));return d.map((p,m)=>{const{label:v,popConfirm:u}=p;return te(k(k({},p),u),{onConfirm:u==null?void 0:u.confirm,onCancel:u==null?void 0:u.cancel,text:v,divider:m<d.length-1?e.divider:!1})})}),i=N(()=>{var m,v;const p=(((m=n==null?void 0:n.getColumns)==null?void 0:m.call(n))||[]).find(u=>u.flag===Us);return(v=p==null?void 0:p.align)!=null?v:"left"});function l(d){return k({getPopupContainer:()=>{var p;return(p=h(n==null?void 0:n.wrapRef.value))!=null?p:document.body},placement:"bottom"},we(d)?{title:d}:d)}function c(d){if(!e.stopButtonPropagation)return;d.composedPath().find(v=>{var u;return((u=v.tagName)==null?void 0:u.toUpperCase())==="BUTTON"})&&d.stopPropagation()}return{prefixCls:t,getActions:r,getDropdownList:o,getAlign:i,onCellClick:c,getTooltip:l}}});function xs(e,t,n,s,a,r){const o=D("Icon"),i=D("PopConfirmButton"),l=D("Tooltip"),c=D("Divider"),d=D("MoreOutlined"),p=D("a-button"),m=D("Dropdown");return R(),se("div",{class:Se([e.prefixCls,e.getAlign]),onClick:t[0]||(t[0]=(...v)=>e.onCellClick&&e.onCellClick(...v))},[(R(!0),se(ue,null,de(e.getActions,(v,u)=>(R(),se(ue,{key:`${u}-${v.label}`},[v.tooltip?(R(),V(l,le(H({key:0},e.getTooltip(v.tooltip))),{default:O(()=>[M(i,le(he(v)),{default:O(()=>[v.icon?(R(),V(o,{key:0,icon:v.icon,class:Se({"mr-1":!!v.label})},null,8,["icon","class"])):X("",!0),v.label?(R(),se(ue,{key:1},[K(Z(v.label),1)],64)):X("",!0)]),_:2},1040)]),_:2},1040)):(R(),V(i,le(H({key:1},v)),{default:O(()=>[v.icon?(R(),V(o,{key:0,icon:v.icon,class:Se({"mr-1":!!v.label})},null,8,["icon","class"])):X("",!0),v.label?(R(),se(ue,{key:1},[K(Z(v.label),1)],64)):X("",!0)]),_:2},1040)),e.divider&&u<e.getActions.length-1?(R(),V(c,{key:2,type:"vertical",class:"action-divider"})):X("",!0)],64))),128)),e.dropDownActions&&e.getDropdownList.length>0?(R(),V(m,{key:0,trigger:["hover"],dropMenuList:e.getDropdownList,popconfirm:""},{default:O(()=>[re(e.$slots,"more"),e.$slots.more?X("",!0):(R(),V(p,{key:0,type:"link",size:"small"},{default:O(()=>[M(d,{class:"icon-more"})]),_:1}))]),_:3},8,["dropMenuList"])):X("",!0)],2)}var jt=ae(Ns,[["render",xs]]);const Vs=J({components:{Image:wn},props:{fileUrl:I.string.def(""),fileName:I.string.def("")}}),Gs={class:"thumb"};function zs(e,t,n,s,a,r){const o=D("Image");return R(),se("span",Gs,[e.fileUrl?(R(),V(o,{key:0,src:e.fileUrl,width:104},null,8,["src"])):X("",!0)])}var Ut=ae(Vs,[["render",zs]]);const{t:ne}=ce();function Ws(){return[{dataIndex:"thumbUrl",title:ne("component.upload.legend"),width:100,customRender:({record:e})=>{const{thumbUrl:t}=e||{};return t&&M(Ut,{fileUrl:t},null)}},{dataIndex:"name",title:ne("component.upload.fileName"),align:"left",customRender:({text:e,record:t})=>{const{percent:n,status:s}=t||{};let a="normal";return s===Q.ERROR?a="exception":s===Q.UPLOADING?a="active":s===Q.SUCCESS&&(a="success"),M("span",null,[M("p",{class:"truncate mb-1",title:e},[e]),M(Sn,{percent:n,size:"small",status:a},null)])}},{dataIndex:"size",title:ne("component.upload.fileSize"),width:100,customRender:({text:e=0})=>e&&(e/1024).toFixed(2)+"KB"},{dataIndex:"status",title:ne("component.upload.fileStatue"),width:100,customRender:({text:e})=>e===Q.SUCCESS?M(xe,{color:"green"},{default:()=>ne("component.upload.uploadSuccess")}):e===Q.ERROR?M(xe,{color:"red"},{default:()=>ne("component.upload.uploadError")}):e===Q.UPLOADING?M(xe,{color:"blue"},{default:()=>ne("component.upload.uploading")}):e}]}function Ys(e){return{width:120,title:ne("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:t})=>{const n=[{label:ne("component.upload.del"),color:"error",onClick:e.bind(null,t)}];return M(jt,{actions:n,outside:!0},null)}}}function qs(){return[{dataIndex:"url",title:ne("component.upload.legend"),width:100,customRender:({record:e})=>{const{url:t}=e||{};return Et(t)&&M(Ut,{fileUrl:t},null)}},{dataIndex:"name",title:ne("component.upload.fileName"),align:"left"}]}function Hs({handleRemove:e,handleDownload:t}){return{width:160,title:ne("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:n})=>{const s=[{label:ne("component.upload.del"),color:"error",onClick:e.bind(null,n)},{label:ne("component.upload.download"),onClick:t.bind(null,n)}];return M(jt,{actions:s,outside:!0},null)}}}const Ze=[];for(let e=0;e<=15;e++)Ze[e]=e.toString(16);function Ks(){let e="";for(let t=1;t<=36;t++)t===9||t===14||t===19||t===24?e+="-":t===15?e+=4:t===20?e+=Ze[Math.random()*4|8]:e+=Ze[Math.random()*16|0];return e.replace(/-/g,"")}var Nt=J({name:"FileList",props:Is,setup(e){const t=Rt();return q(()=>e.dataSource,()=>{Re(()=>{var n;(n=t==null?void 0:t.redoModalHeight)==null||n.call(t)})}),()=>{const{columns:n,actionColumn:s,dataSource:a}=e,r=[...n,s];return M("table",{class:"file-table"},[M("colgroup",null,[r.map(o=>{const{width:i=0,dataIndex:l}=o,c={width:`${i}px`,minWidth:`${i}px`};return M("col",{style:i?c:{},key:l},null)})]),M("thead",null,[M("tr",{class:"file-table-tr"},[r.map(o=>{const{title:i="",align:l="center",dataIndex:c}=o;return M("th",{class:["file-table-th",l],key:c},[i])})])]),M("tbody",null,[a.map((o={},i)=>M("tr",{class:"file-table-tr",key:`${i+o.name||""}`},[r.map(l=>{const{dataIndex:c="",customRender:d,align:p="center"}=l,m=d&&Y(d);return M("td",{class:["file-table-td",p],key:c},[m?d==null?void 0:d({text:o[c],record:o}):o[c]])})]))])])}}});const Xs=J({components:{BasicModal:Ot,Upload:Cn,Alert:kn,FileList:Nt},props:te(k({},Lt),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(e,{emit:t}){const n=He({fileList:[]}),s=x(!1),a=x([]),{accept:r,helpText:o,maxNumber:i,maxSize:l}=Tt(e),{t:c}=ce(),[d,{closeModal:p}]=$t(),{getStringAccept:m,getHelpText:v}=Fs({acceptRef:r,helpTextRef:o,maxNumberRef:i,maxSizeRef:l}),{createMessage:u}=Mn(),f=N(()=>a.value.length>0&&!a.value.every(g=>g.status===Q.SUCCESS)),S=N(()=>{const g=a.value.some(C=>C.status===Q.SUCCESS);return{disabled:s.value||a.value.length===0||!g}}),w=N(()=>{const g=a.value.some(C=>C.status===Q.ERROR);return s.value?c("component.upload.uploading"):c(g?"component.upload.reUploadFailed":"component.upload.startUpload")});function b(g){const{size:C,name:A}=g,{maxSize:_}=e;if(_&&g.size/1024/1024>=_)return u.error(c("component.upload.maxSizeMultiple",[_])),!1;const B={uuid:Ks(),file:g,size:C,name:A,percent:0,type:A.split(".").pop()};return Ps(g)?_s(g).then(({result:L})=>{a.value=[...h(a),k({thumbUrl:L},B)]}):a.value=[...h(a),B],!1}function F(g){const C=a.value.findIndex(A=>A.uuid===g.uuid);C!==-1&&a.value.splice(C,1),t("delete",g)}function T(g){return $(this,null,function*(){var A;const{api:C}=e;if(!C||!Y(C))return Tn("upload api must exist and be a function");try{g.status=Q.UPLOADING;const{data:_}=yield(A=e.api)==null?void 0:A.call(e,{data:k({},e.uploadParams||{}),file:g.file,name:e.name,filename:e.filename},function(L){const U=L.loaded/L.total*100|0;g.percent=U});return g.status=Q.SUCCESS,g.responseData=_,{success:!0,error:null}}catch(_){return g.status=Q.ERROR,{success:!1,error:_}}})}function E(){return $(this,null,function*(){var C;const{maxNumber:g}=e;if(a.value.length+((C=e.previewFileList)==null?void 0:C.length)>g)return u.warning(c("component.upload.maxNumber",[g]));try{s.value=!0;const A=a.value.filter(L=>L.status!==Q.SUCCESS)||[],_=yield Promise.all(A.map(L=>T(L)));s.value=!1;const B=_.filter(L=>!L.success);if(B.length>0)throw B}catch(A){throw s.value=!1,A}})}function z(){const{maxNumber:g}=e;if(a.value.length>g)return u.warning(c("component.upload.maxNumber",[g]));if(s.value)return u.warning(c("component.upload.saveWarn"));const C=[];for(const A of a.value){const{status:_,responseData:B}=A;_===Q.SUCCESS&&B&&C.push(B.url)}if(C.length<=0)return u.warning(c("component.upload.saveError"));a.value=[],p(),t("change",C)}function y(){return $(this,null,function*(){return s.value?(u.warning(c("component.upload.uploadWait")),!1):(a.value=[],!0)})}return{columns:Ws(),actionColumn:Ys(F),register:d,closeModal:p,getHelpText:v,getStringAccept:m,getOkButtonProps:S,beforeUpload:b,fileListRef:a,state:n,isUploadingRef:s,handleStartUpload:E,handleOk:z,handleCloseFunc:y,getIsSelectFile:f,getUploadBtnText:w,t:c}}}),Zs={class:"upload-modal-toolbar"};function Js(e,t,n,s,a,r){const o=D("a-button"),i=D("Alert"),l=D("Upload"),c=D("FileList"),d=D("BasicModal");return R(),V(d,H({width:"800px",title:e.t("component.upload.upload"),okText:e.t("component.upload.save")},e.$attrs,{onRegister:e.register,onOk:e.handleOk,closeFunc:e.handleCloseFunc,maskClosable:!1,keyboard:!1,class:"upload-modal",okButtonProps:e.getOkButtonProps,cancelButtonProps:{disabled:e.isUploadingRef}}),{centerFooter:O(()=>[M(o,{onClick:e.handleStartUpload,color:"success",disabled:!e.getIsSelectFile,loading:e.isUploadingRef},{default:O(()=>[K(Z(e.getUploadBtnText),1)]),_:1},8,["onClick","disabled","loading"])]),default:O(()=>[ke("div",Zs,[M(i,{message:e.getHelpText,type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),M(l,{accept:e.getStringAccept,multiple:e.multiple,"before-upload":e.beforeUpload,"show-upload-list":!1,class:"upload-modal-toolbar__btn"},{default:O(()=>[M(o,{type:"primary"},{default:O(()=>[K(Z(e.t("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple","before-upload"])]),M(c,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","okText","onRegister","onOk","closeFunc","okButtonProps","cancelButtonProps"])}var Qs=ae(Xs,[["render",Js]]);const ea=J({components:{BasicModal:Ot,FileList:Nt},props:Ts,emits:["list-change","register","delete"],setup(e,{emit:t}){const[n,{closeModal:s}]=$t(),{t:a}=ce(),r=x([]);q(()=>e.value,l=>{pe(l)||(l=[]),r.value=l.filter(c=>!!c).map(c=>({url:c,type:c.split(".").pop()||"",name:c.split("/").pop()||""}))},{immediate:!0});function o(l){const c=r.value.findIndex(d=>d.url===l.url);if(c!==-1){const d=r.value.splice(c,1);t("delete",d[0].url),t("list-change",r.value.map(p=>p.url))}}function i(l){const{url:c=""}=l;Jn({url:c})}return{t:a,register:n,closeModal:s,fileListRef:r,columns:qs(),actionColumn:Hs({handleRemove:o,handleDownload:i})}}});function ta(e,t,n,s,a,r){const o=D("FileList"),i=D("BasicModal");return R(),V(i,H({width:"800px",title:e.t("component.upload.preview"),class:"upload-preview-modal"},e.$attrs,{onRegister:e.register,showOkBtn:!1}),{default:O(()=>[M(o,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"])}var na=ae(ea,[["render",ta]]);const sa=J({name:"BasicUpload",components:{UploadModal:Qs,Space:In,UploadPreviewModal:na,Icon:kt,Tooltip:Mt},props:Ms,emits:["change","delete","preview-delete","update:value"],setup(e,{emit:t,attrs:n}){const{t:s}=ce(),[a,{openModal:r}]=ht(),[o,{openModal:i}]=ht(),l=x([]),c=N(()=>{const{emptyHidePreview:f}=e;return f&&f?l.value.length>0:!0}),d=N(()=>{const f=k(k({},n),e);return Le(f,"onChange")});q(()=>e.value,(f=[])=>{l.value=pe(f)?f:[]},{immediate:!0});function p(f){l.value=[...h(l),...f||[]],t("update:value",l.value),t("change",l.value)}function m(f){l.value=[...f||[]],t("update:value",l.value),t("change",l.value)}function v(f){t("delete",f)}function u(f){t("preview-delete",f)}return{registerUploadModal:a,openUploadModal:r,handleChange:p,handlePreviewChange:m,registerPreviewModal:o,openPreviewModal:i,fileList:l,showPreview:c,bindValue:d,handleDelete:v,handlePreviewDelete:u,t:s}}});function aa(e,t,n,s,a,r){const o=D("a-button"),i=D("Icon"),l=D("Tooltip"),c=D("Space"),d=D("UploadModal"),p=D("UploadPreviewModal");return R(),se("div",null,[M(c,null,{default:O(()=>[M(o,{type:"primary",onClick:e.openUploadModal,preIcon:"carbon:cloud-upload"},{default:O(()=>[K(Z(e.t("component.upload.upload")),1)]),_:1},8,["onClick"]),e.showPreview?(R(),V(l,{key:0,placement:"bottom"},{title:O(()=>[K(Z(e.t("component.upload.uploaded"))+" ",1),e.fileList.length?(R(),se(ue,{key:0},[K(Z(e.fileList.length),1)],64)):X("",!0)]),default:O(()=>[M(o,{onClick:e.openPreviewModal},{default:O(()=>[M(i,{icon:"bi:eye"}),e.fileList.length&&e.showPreviewNumber?(R(),se(ue,{key:0},[K(Z(e.fileList.length),1)],64)):X("",!0)]),_:1},8,["onClick"])]),_:1})):X("",!0)]),_:1}),M(d,H(e.bindValue,{previewFileList:e.fileList,onRegister:e.registerUploadModal,onChange:e.handleChange,onDelete:e.handleDelete}),null,16,["previewFileList","onRegister","onChange","onDelete"]),M(p,{value:e.fileList,onRegister:e.registerPreviewModal,onListChange:e.handlePreviewChange,onDelete:e.handlePreviewDelete},null,8,["value","onRegister","onListChange","onDelete"])])}var oa=ae(sa,[["render",aa]]);const ra=It(oa),ia=e=>Object.keys(e).length===0,Je=(e,t)=>e.push.apply(e,t),la=(e,t)=>e.split("").map(s=>t[s]||s).join(""),Te=e=>e.sort((t,n)=>t.i-n.i||t.j-n.j),gt=e=>{const t={};let n=1;return e.forEach(s=>{t[s]=n,n+=1}),t};var ca={4:[[1,2],[2,3]],5:[[1,3],[2,3]],6:[[1,2],[2,4],[4,5]],7:[[1,3],[2,3],[4,5],[4,6]],8:[[2,4],[4,6]]};const bt=2050,yt=1e3,ua=ca,da=10,fa=1e4,xt=10,Vt=50,Gt=20,zt=/^[A-Z\xbf-\xdf][^A-Z\xbf-\xdf]+$/,pa=/^[^A-Z\xbf-\xdf]+[A-Z\xbf-\xdf]$/,ha=/^[A-Z\xbf-\xdf]+$/,Wt=/^[^a-z\xdf-\xff]+$/,ma=/^[a-z\xdf-\xff]+$/,ga=/^[^A-Z\xbf-\xdf]+$/,ba=/[a-z\xdf-\xff]/,ya=/[A-Z\xbf-\xdf]/,va=/[^A-Za-z\xbf-\xdf]/gi,Aa=/^\d+$/,lt=new Date().getFullYear(),wa={recentYear:/19\d\d|200\d|201\d|202\d/g};class Sa{match({password:t}){const n=[...this.getMatchesWithoutSeparator(t),...this.getMatchesWithSeparator(t)],s=this.filterNoise(n);return Te(s)}getMatchesWithSeparator(t){const n=[],s=/^(\d{1,4})([\s/\\_.-])(\d{1,2})\2(\d{1,4})$/;for(let a=0;a<=Math.abs(t.length-6);a+=1)for(let r=a+5;r<=a+9&&!(r>=t.length);r+=1){const o=t.slice(a,+r+1||9e9),i=s.exec(o);if(i!=null){const l=this.mapIntegersToDayMonthYear([parseInt(i[1],10),parseInt(i[3],10),parseInt(i[4],10)]);l!=null&&n.push({pattern:"date",token:o,i:a,j:r,separator:i[2],year:l.year,month:l.month,day:l.day})}}return n}getMatchesWithoutSeparator(t){const n=[],s=/^\d{4,8}$/,a=r=>Math.abs(r.year-lt);for(let r=0;r<=Math.abs(t.length-4);r+=1)for(let o=r+3;o<=r+7&&!(o>=t.length);o+=1){const i=t.slice(r,+o+1||9e9);if(s.exec(i)){const l=[],c=i.length;if(ua[c].forEach(([p,m])=>{const v=this.mapIntegersToDayMonthYear([parseInt(i.slice(0,p),10),parseInt(i.slice(p,m),10),parseInt(i.slice(m),10)]);v!=null&&l.push(v)}),l.length>0){let p=l[0],m=a(l[0]);l.slice(1).forEach(v=>{const u=a(v);u<m&&(p=v,m=u)}),n.push({pattern:"date",token:i,i:r,j:o,separator:"",year:p.year,month:p.month,day:p.day})}}}return n}filterNoise(t){return t.filter(n=>{let s=!1;const a=t.length;for(let r=0;r<a;r+=1){const o=t[r];if(n!==o&&o.i<=n.i&&o.j>=n.j){s=!0;break}}return!s})}mapIntegersToDayMonthYear(t){if(t[1]>31||t[1]<=0)return null;let n=0,s=0,a=0;for(let r=0,o=t.length;r<o;r+=1){const i=t[r];if(i>99&&i<yt||i>bt)return null;i>31&&(s+=1),i>12&&(n+=1),i<=0&&(a+=1)}return s>=2||n===3||a>=2?null:this.getDayMonth(t)}getDayMonth(t){const n=[[t[2],t.slice(0,2)],[t[0],t.slice(1,3)]],s=n.length;for(let a=0;a<s;a+=1){const[r,o]=n[a];if(yt<=r&&r<=bt){const i=this.mapIntegersToDayMonth(o);return i!=null?{year:r,month:i.month,day:i.day}:null}}for(let a=0;a<s;a+=1){const[r,o]=n[a],i=this.mapIntegersToDayMonth(o);if(i!=null)return{year:this.twoToFourDigitYear(r),month:i.month,day:i.day}}return null}mapIntegersToDayMonth(t){const n=[t,t.slice().reverse()];for(let s=0;s<n.length;s+=1){const a=n[s],r=a[0],o=a[1];if(r>=1&&r<=31&&o>=1&&o<=12)return{day:r,month:o}}return null}twoToFourDigitYear(t){return t>99?t:t>50?t+1900:t+2e3}}const fe=new Uint32Array(65536),Ca=(e,t)=>{const n=e.length,s=t.length,a=1<<n-1;let r=-1,o=0,i=n,l=n;for(;l--;)fe[e.charCodeAt(l)]|=1<<l;for(l=0;l<s;l++){let c=fe[t.charCodeAt(l)];const d=c|o;c|=(c&r)+r^r,o|=~(c|r),r&=c,o&a&&i++,r&a&&i--,o=o<<1|1,r=r<<1|~(d|o),o&=d}for(l=n;l--;)fe[e.charCodeAt(l)]=0;return i},ka=(e,t)=>{const n=e.length,s=t.length,a=[],r=[],o=Math.ceil(n/32),i=Math.ceil(s/32);let l=s;for(let u=0;u<o;u++)r[u]=-1,a[u]=0;let c=0;for(;c<i-1;c++){let u=0,f=-1;const S=c*32,w=Math.min(32,s)+S;for(let b=S;b<w;b++)fe[t.charCodeAt(b)]|=1<<b;l=s;for(let b=0;b<n;b++){const F=fe[e.charCodeAt(b)],T=r[b/32|0]>>>b&1,E=a[b/32|0]>>>b&1,z=F|u,y=((F|E)&f)+f^f|F|E;let g=u|~(y|f),C=f&y;g>>>31^T&&(r[b/32|0]^=1<<b),C>>>31^E&&(a[b/32|0]^=1<<b),g=g<<1|T,C=C<<1|E,f=C|~(z|g),u=g&z}for(let b=S;b<w;b++)fe[t.charCodeAt(b)]=0}let d=0,p=-1;const m=c*32,v=Math.min(32,s-m)+m;for(let u=m;u<v;u++)fe[t.charCodeAt(u)]|=1<<u;l=s;for(let u=0;u<n;u++){const f=fe[e.charCodeAt(u)],S=r[u/32|0]>>>u&1,w=a[u/32|0]>>>u&1,b=f|d,F=((f|w)&p)+p^p|f|w;let T=d|~(F|p),E=p&F;l+=T>>>s-1&1,l-=E>>>s-1&1,T>>>31^S&&(r[u/32|0]^=1<<u),E>>>31^w&&(a[u/32|0]^=1<<u),T=T<<1|S,E=E<<1|w,p=E|~(b|T),d=T&b}for(let u=m;u<v;u++)fe[t.charCodeAt(u)]=0;return l},Yt=(e,t)=>{if(e.length>t.length){const n=t;t=e,e=n}return e.length===0?t.length:e.length<=32?Ca(e,t):ka(e,t)},Ma=(e,t)=>{let n=1/0,s=0;for(let a=0;a<t.length;a++){const r=Yt(e,t[a]);r<n&&(n=r,s=a)}return t[s]};var Ta={closest:Ma,distance:Yt};const Ia=(e,t,n)=>{const s=e.length<=t.length,a=e.length<=n;return s||a?Math.ceil(e.length/4):n},Fa=(e,t,n)=>{let s=0;const a=Object.keys(t).find(r=>{const o=Ia(e,r,n),i=Ta.distance(e,r),l=i<=o;return l&&(s=i),l});return a?{levenshteinDistance:s,levenshteinDistanceEntry:a}:{}};var Pa={a:["4","@"],b:["8"],c:["(","{","[","<"],e:["3"],g:["6","9"],i:["1","!","|"],l:["1","|","7"],o:["0"],s:["$","5"],t:["+","7"],x:["%"],z:["2"]},Ge={warnings:{straightRow:"straightRow",keyPattern:"keyPattern",simpleRepeat:"simpleRepeat",extendedRepeat:"extendedRepeat",sequences:"sequences",recentYears:"recentYears",dates:"dates",topTen:"topTen",topHundred:"topHundred",common:"common",similarToCommon:"similarToCommon",wordByItself:"wordByItself",namesByThemselves:"namesByThemselves",commonNames:"commonNames",userInputs:"userInputs",pwned:"pwned"},suggestions:{l33t:"l33t",reverseWords:"reverseWords",allUppercase:"allUppercase",capitalization:"capitalization",dates:"dates",recentYears:"recentYears",associatedYears:"associatedYears",sequences:"sequences",repeated:"repeated",longerKeyboardPattern:"longerKeyboardPattern",anotherWord:"anotherWord",useWords:"useWords",noNeed:"noNeed",pwned:"pwned"},timeEstimation:{ltSecond:"ltSecond",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",month:"month",months:"months",year:"year",years:"years",centuries:"centuries"}};class _a{constructor(){this.matchers={},this.l33tTable=Pa,this.dictionary={userInputs:[]},this.rankedDictionaries={},this.translations=Ge,this.graphs={},this.availableGraphs=[],this.useLevenshteinDistance=!1,this.levenshteinThreshold=2,this.setRankedDictionaries()}setOptions(t={}){t.l33tTable&&(this.l33tTable=t.l33tTable),t.dictionary&&(this.dictionary=t.dictionary,this.setRankedDictionaries()),t.translations&&this.setTranslations(t.translations),t.graphs&&(this.graphs=t.graphs),t.useLevenshteinDistance!==void 0&&(this.useLevenshteinDistance=t.useLevenshteinDistance),t.levenshteinThreshold!==void 0&&(this.levenshteinThreshold=t.levenshteinThreshold)}setTranslations(t){if(this.checkCustomTranslations(t))this.translations=t;else throw new Error("Invalid translations object fallback to keys")}checkCustomTranslations(t){let n=!0;return Object.keys(Ge).forEach(s=>{if(s in t){const a=s;Object.keys(Ge[a]).forEach(r=>{r in t[a]||(n=!1)})}else n=!1}),n}setRankedDictionaries(){const t={};Object.keys(this.dictionary).forEach(n=>{t[n]=this.getRankedDictionary(n)}),this.rankedDictionaries=t}getRankedDictionary(t){const n=this.dictionary[t];if(t==="userInputs"){const s=[];return n.forEach(a=>{const r=typeof a;(r==="string"||r==="number"||r==="boolean")&&s.push(a.toString().toLowerCase())}),gt(s)}return gt(n)}extendUserInputsDictionary(t){this.dictionary.userInputs?this.dictionary.userInputs=[...this.dictionary.userInputs,...t]:this.dictionary.userInputs=t,this.rankedDictionaries.userInputs=this.getRankedDictionary("userInputs")}addMatcher(t,n){this.matchers[t]?console.info("Matcher already exists"):this.matchers[t]=n}}const P=new _a;class Da{constructor(t){this.defaultMatch=t}match({password:t}){const n=t.split("").reverse().join("");return this.defaultMatch({password:n}).map(s=>te(k({},s),{token:s.token.split("").reverse().join(""),reversed:!0,i:t.length-1-s.j,j:t.length-1-s.i}))}}class Ra{constructor(t){this.defaultMatch=t}match({password:t}){const n=[],s=this.enumerateL33tSubs(this.relevantL33tSubtable(t,P.l33tTable));for(let a=0;a<s.length;a+=1){const r=s[a];if(ia(r))break;const o=la(t,r);this.defaultMatch({password:o}).forEach(l=>{const c=t.slice(l.i,+l.j+1||9e9);if(c.toLowerCase()!==l.matchedWord){const d={};Object.keys(r).forEach(m=>{const v=r[m];c.indexOf(m)!==-1&&(d[m]=v)});const p=Object.keys(d).map(m=>`${m} -> ${d[m]}`).join(", ");n.push(te(k({},l),{l33t:!0,token:c,sub:d,subDisplay:p}))}})}return n.filter(a=>a.token.length>1)}relevantL33tSubtable(t,n){const s={},a={};return t.split("").forEach(r=>{s[r]=!0}),Object.keys(n).forEach(r=>{const i=n[r].filter(l=>l in s);i.length>0&&(a[r]=i)}),a}enumerateL33tSubs(t){const n=Object.keys(t);return this.getSubs(n,[[]],t).map(a=>{const r={};return a.forEach(([o,i])=>{r[o]=i}),r})}getSubs(t,n,s){if(!t.length)return n;const a=t[0],r=t.slice(1),o=[];s[a].forEach(l=>{n.forEach(c=>{let d=-1;for(let p=0;p<c.length;p+=1)if(c[p][0]===l){d=p;break}if(d===-1){const p=c.concat([[l,a]]);o.push(p)}else{const p=c.slice(0);p.splice(d,1),p.push([l,a]),o.push(c),o.push(p)}})});const i=this.dedup(o);return r.length?this.getSubs(r,i,s):i}dedup(t){const n=[],s={};return t.forEach(a=>{const r=a.map((i,l)=>[i,l]);r.sort();const o=r.map(([i,l])=>`${i},${l}`).join("-");o in s||(s[o]=!0,n.push(a))}),n}}class Oa{constructor(){this.l33t=new Ra(this.defaultMatch),this.reverse=new Da(this.defaultMatch)}match({password:t}){const n=[...this.defaultMatch({password:t}),...this.reverse.match({password:t}),...this.l33t.match({password:t})];return Te(n)}defaultMatch({password:t}){const n=[],s=t.length,a=t.toLowerCase();return Object.keys(P.rankedDictionaries).forEach(r=>{const o=P.rankedDictionaries[r];for(let i=0;i<s;i+=1)for(let l=i;l<s;l+=1){const c=a.slice(i,+l+1||9e9),d=c in o;let p={};const m=i===0&&l===s-1;P.useLevenshteinDistance&&m&&!d&&(p=Fa(c,o,P.levenshteinThreshold));const v=Object.keys(p).length!==0;if(d||v){const u=v?p.levenshteinDistanceEntry:c,f=o[u];n.push(k({pattern:"dictionary",i,j:l,token:t.slice(i,+l+1||9e9),matchedWord:c,rank:f,dictionaryName:r,reversed:!1,l33t:!1},p))}}}),n}}class $a{match({password:t,regexes:n=wa}){const s=[];return Object.keys(n).forEach(a=>{const r=n[a];r.lastIndex=0;const o=r.exec(t);if(o){const i=o[0];s.push({pattern:"regex",token:i,i:o.index,j:o.index+o[0].length-1,regexName:a,regexMatch:o})}}),Te(s)}}var ye={nCk(e,t){let n=e;if(t>n)return 0;if(t===0)return 1;let s=1;for(let a=1;a<=t;a+=1)s*=n,s/=a,n-=1;return s},log10(e){return Math.log(e)/Math.log(10)},log2(e){return Math.log(e)/Math.log(2)},factorial(e){let t=1;for(let n=2;n<=e;n+=1)t*=n;return t}},La=({token:e})=>{let t=_e(da,e.length);t===Number.POSITIVE_INFINITY&&(t=Number.MAX_VALUE);let n;return e.length===1?n=xt+1:n=Vt+1,Math.max(t,n)},Ea=({year:e,separator:t})=>{let s=Math.max(Math.abs(e-lt),Gt)*365;return t&&(s*=4),s};const Ba=e=>{const t=e.split(""),n=t.filter(o=>o.match(ba)).length,s=t.filter(o=>o.match(ya)).length;let a=0;const r=Math.min(n,s);for(let o=1;o<=r;o+=1)a+=ye.nCk(n+s,o);return a};var ja=e=>{const t=e.replace(va,"");if(t.match(ga)||t.toLowerCase()===t)return 1;const n=[zt,pa,Wt],s=n.length;for(let a=0;a<s;a+=1){const r=n[a];if(t.match(r))return 2}return Ba(t)};const Ua=({subs:e,subbed:t,token:n})=>{const s=e[t],a=n.toLowerCase().split(""),r=a.filter(i=>i===t).length,o=a.filter(i=>i===s).length;return{subbedCount:r,unsubbedCount:o}};var Na=({l33t:e,sub:t,token:n})=>{if(!e)return 1;let s=1;const a=t;return Object.keys(a).forEach(r=>{const{subbedCount:o,unsubbedCount:i}=Ua({subs:a,subbed:r,token:n});if(o===0||i===0)s*=2;else{const l=Math.min(i,o);let c=0;for(let d=1;d<=l;d+=1)c+=ye.nCk(i+o,d);s*=c}}),s},xa=({rank:e,reversed:t,l33t:n,sub:s,token:a})=>{const r=e,o=ja(a),i=Na({l33t:n,sub:s,token:a}),l=t&&2||1,c=r*o*i*l;return{baseGuesses:r,uppercaseVariations:o,l33tVariations:i,calculation:c}},Va=({regexName:e,regexMatch:t,token:n})=>{const s={alphaLower:26,alphaUpper:26,alpha:52,alphanumeric:62,digits:10,symbols:33};if(e in s)return _e(s[e],n.length);switch(e){case"recentYear":return Math.max(Math.abs(parseInt(t[0],10)-lt),Gt)}return 0},Ga=({baseGuesses:e,repeatCount:t})=>e*t,za=({token:e,ascending:t})=>{const n=e.charAt(0);let s=0;return["a","A","z","Z","0","1","9"].includes(n)?s=4:n.match(/\d/)?s=10:s=26,t||(s*=2),s*e.length};const Wa=e=>{let t=0;return Object.keys(e).forEach(n=>{t+=e[n].filter(a=>!!a).length}),t/=Object.entries(e).length,t},Ya=({token:e,graph:t,turns:n})=>{const s=Object.keys(P.graphs[t]).length,a=Wa(P.graphs[t]);let r=0;const o=e.length;for(let i=2;i<=o;i+=1){const l=Math.min(n,i-1);for(let c=1;c<=l;c+=1)r+=ye.nCk(i-1,c-1)*s*_e(a,c)}return r};var qa=({graph:e,token:t,shiftedCount:n,turns:s})=>{let a=Ya({token:t,graph:e,turns:s});if(n){const r=t.length-n;if(n===0||r===0)a*=2;else{let o=0;for(let i=1;i<=Math.min(n,r);i+=1)o+=ye.nCk(n+r,i);a*=o}}return Math.round(a)};const Ha=(e,t)=>{let n=1;return e.token.length<t.length&&(e.token.length===1?n=xt:n=Vt),n},vt={bruteforce:La,date:Ea,dictionary:xa,regex:Va,repeat:Ga,sequence:za,spatial:qa},Ka=(e,t)=>vt[e]?vt[e](t):P.matchers[e]&&"scoring"in P.matchers[e]?P.matchers[e].scoring(t):0;var Xa=(e,t)=>{const n={};if("guesses"in e&&e.guesses!=null)return e;const s=Ha(e,t),a=Ka(e.pattern,e);let r=0;typeof a=="number"?r=a:e.pattern==="dictionary"&&(r=a.calculation,n.baseGuesses=a.baseGuesses,n.uppercaseVariations=a.uppercaseVariations,n.l33tVariations=a.l33tVariations);const o=Math.max(r,s);return te(k(k({},e),n),{guesses:o,guessesLog10:ye.log10(o)})};const oe={password:"",optimal:{},excludeAdditive:!1,fillArray(e,t){const n=[];for(let s=0;s<e;s+=1){let a=[];t==="object"&&(a={}),n.push(a)}return n},makeBruteforceMatch(e,t){return{pattern:"bruteforce",token:this.password.slice(e,+t+1||9e9),i:e,j:t}},update(e,t){const n=e.j,s=Xa(e,this.password);let a=s.guesses;t>1&&(a*=this.optimal.pi[s.i-1][t-1]);let r=ye.factorial(t)*a;this.excludeAdditive||(r+=_e(fa,t-1));let o=!1;Object.keys(this.optimal.g[n]).forEach(i=>{const l=this.optimal.g[n][i];parseInt(i,10)<=t&&l<=r&&(o=!0)}),o||(this.optimal.g[n][t]=r,this.optimal.m[n][t]=s,this.optimal.pi[n][t]=a)},bruteforceUpdate(e){let t=this.makeBruteforceMatch(0,e);this.update(t,1);for(let n=1;n<=e;n+=1){t=this.makeBruteforceMatch(n,e);const s=this.optimal.m[n-1];Object.keys(s).forEach(a=>{s[a].pattern!=="bruteforce"&&this.update(t,parseInt(a,10)+1)})}},unwind(e){const t=[];let n=e-1,s=0,a=1/0;const r=this.optimal.g[n];for(r&&Object.keys(r).forEach(o=>{const i=r[o];i<a&&(s=parseInt(o,10),a=i)});n>=0;){const o=this.optimal.m[n][s];t.unshift(o),n=o.i-1,s-=1}return t}};var Qe={mostGuessableMatchSequence(e,t,n=!1){oe.password=e,oe.excludeAdditive=n;const s=e.length;let a=oe.fillArray(s,"array");t.forEach(l=>{a[l.j].push(l)}),a=a.map(l=>l.sort((c,d)=>c.i-d.i)),oe.optimal={m:oe.fillArray(s,"object"),pi:oe.fillArray(s,"object"),g:oe.fillArray(s,"object")};for(let l=0;l<s;l+=1)a[l].forEach(c=>{c.i>0?Object.keys(oe.optimal.m[c.i-1]).forEach(d=>{oe.update(c,parseInt(d,10)+1)}):oe.update(c,1)}),oe.bruteforceUpdate(l);const r=oe.unwind(s),o=r.length,i=this.getGuesses(e,o);return{password:e,guesses:i,guessesLog10:ye.log10(i),sequence:r}},getGuesses(e,t){const n=e.length;let s=0;return e.length===0?s=1:s=oe.optimal.g[n-1][t],s}};class Za{match({password:t,omniMatch:n}){const s=[];let a=0;for(;a<t.length;){const o=this.getGreedyMatch(t,a),i=this.getLazyMatch(t,a);if(o==null)break;const{match:l,baseToken:c}=this.setMatchToken(o,i);if(l){const d=l.index+l[0].length-1,p=this.getBaseGuesses(c,n);s.push(this.normalizeMatch(c,d,l,p)),a=d+1}}return s.some(o=>o instanceof Promise)?Promise.all(s):s}normalizeMatch(t,n,s,a){const r={pattern:"repeat",i:s.index,j:n,token:s[0],baseToken:t,baseGuesses:0,repeatCount:s[0].length/t.length};return a instanceof Promise?a.then(o=>te(k({},r),{baseGuesses:o})):te(k({},r),{baseGuesses:a})}getGreedyMatch(t,n){const s=/(.+)\1+/g;return s.lastIndex=n,s.exec(t)}getLazyMatch(t,n){const s=/(.+?)\1+/g;return s.lastIndex=n,s.exec(t)}setMatchToken(t,n){const s=/^(.+?)\1+$/;let a,r="";if(n&&t[0].length>n[0].length){a=t;const o=s.exec(a[0]);o&&(r=o[1])}else a=n,a&&(r=a[1]);return{match:a,baseToken:r}}getBaseGuesses(t,n){const s=n.match(t);return s instanceof Promise?s.then(r=>Qe.mostGuessableMatchSequence(t,r).guesses):Qe.mostGuessableMatchSequence(t,s).guesses}}class Ja{constructor(){this.MAX_DELTA=5}match({password:t}){const n=[];if(t.length===1)return[];let s=0,a=null;const r=t.length;for(let o=1;o<r;o+=1){const i=t.charCodeAt(o)-t.charCodeAt(o-1);if(a==null&&(a=i),i!==a){const l=o-1;this.update({i:s,j:l,delta:a,password:t,result:n}),s=l,a=i}}return this.update({i:s,j:r-1,delta:a,password:t,result:n}),n}update({i:t,j:n,delta:s,password:a,result:r}){if(n-t>1||Math.abs(s)===1){const o=Math.abs(s);if(o>0&&o<=this.MAX_DELTA){const i=a.slice(t,+n+1||9e9),{sequenceName:l,sequenceSpace:c}=this.getSequence(i);return r.push({pattern:"sequence",i:t,j:n,token:a.slice(t,+n+1||9e9),sequenceName:l,sequenceSpace:c,ascending:s>0})}}return null}getSequence(t){let n="unicode",s=26;return ma.test(t)?(n="lower",s=26):ha.test(t)?(n="upper",s=26):Aa.test(t)&&(n="digits",s=10),{sequenceName:n,sequenceSpace:s}}}class Qa{constructor(){this.SHIFTED_RX=/[~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:"ZXCVBNM<>?]/}match({password:t}){const n=[];return Object.keys(P.graphs).forEach(s=>{const a=P.graphs[s];Je(n,this.helper(t,a,s))}),Te(n)}checkIfShifted(t,n,s){return!t.includes("keypad")&&this.SHIFTED_RX.test(n.charAt(s))?1:0}helper(t,n,s){let a;const r=[];let o=0;const i=t.length;for(;o<i-1;){let l=o+1,c=0,d=0;for(a=this.checkIfShifted(s,t,o);;){const p=t.charAt(l-1),m=n[p]||[];let v=!1,u=-1,f=-1;if(l<i){const S=t.charAt(l),w=m.length;for(let b=0;b<w;b+=1){const F=m[b];if(f+=1,F){const T=F.indexOf(S);if(T!==-1){v=!0,u=f,T===1&&(a+=1),c!==u&&(d+=1,c=u);break}}}}if(v)l+=1;else{l-o>2&&r.push({pattern:"spatial",i:o,j:l-1,token:t.slice(o,l),graph:s,turns:d,shiftedCount:a}),o=l;break}}}return r}}class eo{constructor(){this.matchers={date:Sa,dictionary:Oa,regex:$a,repeat:Za,sequence:Ja,spatial:Qa}}match(t){const n=[],s=[];return[...Object.keys(this.matchers),...Object.keys(P.matchers)].forEach(r=>{if(!this.matchers[r]&&!P.matchers[r])return;const o=this.matchers[r]?this.matchers[r]:P.matchers[r].Matching,l=new o().match({password:t,omniMatch:this});l instanceof Promise?(l.then(c=>{Je(n,c)}),s.push(l)):Je(n,l)}),s.length>0?new Promise(r=>{Promise.all(s).then(()=>{r(Te(n))})}):Te(n)}}const qt=1,Ht=qt*60,Kt=Ht*60,Xt=Kt*24,Zt=Xt*31,Jt=Zt*12,to=Jt*100,ze={second:qt,minute:Ht,hour:Kt,day:Xt,month:Zt,year:Jt,century:to};class no{translate(t,n){let s=t;n!==void 0&&n!==1&&(s+="s");const{timeEstimation:a}=P.translations;return a[s].replace("{base}",`${n}`)}estimateAttackTimes(t){const n={onlineThrottling100PerHour:t/.027777777777777776,onlineNoThrottling10PerSecond:t/10,offlineSlowHashing1e4PerSecond:t/1e4,offlineFastHashing1e10PerSecond:t/1e10},s={onlineThrottling100PerHour:"",onlineNoThrottling10PerSecond:"",offlineSlowHashing1e4PerSecond:"",offlineFastHashing1e10PerSecond:""};return Object.keys(n).forEach(a=>{const r=n[a];s[a]=this.displayTime(r)}),{crackTimesSeconds:n,crackTimesDisplay:s,score:this.guessesToScore(t)}}guessesToScore(t){return t<1e3+5?0:t<1e6+5?1:t<1e8+5?2:t<1e10+5?3:4}displayTime(t){let n="centuries",s;const a=Object.keys(ze),r=a.findIndex(o=>t<ze[o]);return r>-1&&(n=a[r-1],r!==0?s=Math.round(t/ze[n]):n="ltSecond"),this.translate(n,s)}}var so=()=>null,ao=()=>({warning:P.translations.warnings.dates,suggestions:[P.translations.suggestions.dates]});const oo=(e,t)=>{let n="";return t&&!e.l33t&&!e.reversed?e.rank<=10?n=P.translations.warnings.topTen:e.rank<=100?n=P.translations.warnings.topHundred:n=P.translations.warnings.common:e.guessesLog10<=4&&(n=P.translations.warnings.similarToCommon),n},ro=(e,t)=>{let n="";return t&&(n=P.translations.warnings.wordByItself),n},io=(e,t)=>t?P.translations.warnings.namesByThemselves:P.translations.warnings.commonNames,lo=(e,t)=>{let n="";const s=e.dictionaryName,a=s==="lastnames"||s.toLowerCase().includes("firstnames");return s==="passwords"?n=oo(e,t):s.includes("wikipedia")?n=ro(e,t):a?n=io(e,t):s==="userInputs"&&(n=P.translations.warnings.userInputs),n};var co=(e,t)=>{const n=lo(e,t),s=[],a=e.token;return a.match(zt)?s.push(P.translations.suggestions.capitalization):a.match(Wt)&&a.toLowerCase()!==a&&s.push(P.translations.suggestions.allUppercase),e.reversed&&e.token.length>=4&&s.push(P.translations.suggestions.reverseWords),e.l33t&&s.push(P.translations.suggestions.l33t),{warning:n,suggestions:s}},uo=e=>e.regexName==="recentYear"?{warning:P.translations.warnings.recentYears,suggestions:[P.translations.suggestions.recentYears,P.translations.suggestions.associatedYears]}:{warning:"",suggestions:[]},fo=e=>{let t=P.translations.warnings.extendedRepeat;return e.baseToken.length===1&&(t=P.translations.warnings.simpleRepeat),{warning:t,suggestions:[P.translations.suggestions.repeated]}},po=()=>({warning:P.translations.warnings.sequences,suggestions:[P.translations.suggestions.sequences]}),ho=e=>{let t=P.translations.warnings.keyPattern;return e.turns===1&&(t=P.translations.warnings.straightRow),{warning:t,suggestions:[P.translations.suggestions.longerKeyboardPattern]}};const At={warning:"",suggestions:[]};class mo{constructor(){this.matchers={bruteforce:so,date:ao,dictionary:co,regex:uo,repeat:fo,sequence:po,spatial:ho},this.defaultFeedback={warning:"",suggestions:[]},this.setDefaultSuggestions()}setDefaultSuggestions(){this.defaultFeedback.suggestions.push(P.translations.suggestions.useWords,P.translations.suggestions.noNeed)}getFeedback(t,n){if(n.length===0)return this.defaultFeedback;if(t>2)return At;const s=P.translations.suggestions.anotherWord,a=this.getLongestMatch(n);let r=this.getMatchFeedback(a,n.length===1);return r!=null?(r.suggestions.unshift(s),r.warning==null&&(r.warning="")):r={warning:"",suggestions:[s]},r}getLongestMatch(t){let n=t[0];return t.slice(1).forEach(a=>{a.token.length>n.token.length&&(n=a)}),n}getMatchFeedback(t,n){return this.matchers[t.pattern]?this.matchers[t.pattern](t,n):P.matchers[t.pattern]&&"feedback"in P.matchers[t.pattern]?P.matchers[t.pattern].feedback(t,n):At}}const Qt=()=>new Date().getTime(),go=(e,t,n)=>{const s=new mo,a=new no,r=Qe.mostGuessableMatchSequence(t,e),o=Qt()-n,i=a.estimateAttackTimes(r.guesses);return te(k(k({calcTime:o},r),i),{feedback:s.getFeedback(i.score,r.sequence)})},bo=(e,t)=>(t&&P.extendUserInputsDictionary(t),new eo().match(e)),yo=(e,t)=>{const n=Qt(),s=bo(e,t);if(s instanceof Promise)throw new Error("You are using a Promised matcher, please use `zxcvbnAsync` for it.");return go(s,e,n)};const vo=J({name:"StrengthMeter",components:{InputPassword:Ie.Password},props:{value:I.string,showInput:I.bool.def(!0),disabled:I.bool},emits:["score-change","change"],setup(e,{emit:t}){const n=x(""),{prefixCls:s}=st("strength-meter"),a=N(()=>{const{disabled:o}=e;if(o)return-1;const l=h(n)?yo(h(n)).score:-1;return t("score-change",l),l});function r(o){n.value=o.target.value}return De(()=>{n.value=e.value||""}),q(()=>h(n),o=>{t("change",o)}),{getPasswordStrength:a,handleChange:r,prefixCls:s,innerValueRef:n}}}),Ao=["data-score"];function wo(e,t,n,s,a,r){const o=D("InputPassword");return R(),se("div",{class:Se([e.prefixCls,"relative"])},[e.showInput?(R(),V(o,H({key:0},e.$attrs,{allowClear:"",value:e.innerValueRef,onChange:e.handleChange,disabled:e.disabled}),be({_:2},[de(Object.keys(e.$slots),i=>({name:i,fn:O(l=>[re(e.$slots,i,le(he(l||{})),void 0,!0)])}))]),1040,["value","onChange","disabled"])):X("",!0),ke("div",{class:Se(`${e.prefixCls}-bar`)},[ke("div",{class:Se(`${e.prefixCls}-bar--fill`),"data-score":e.getPasswordStrength},null,10,Ao)],2)],2)}var So=ae(vo,[["render",wo],["__scopeId","data-v-367aeb21"]]);const Co=It(So),j=new Map;j.set("Input",Ie);j.set("InputGroup",Ie.Group);j.set("InputPassword",Ie.Password);j.set("InputSearch",Ie.Search);j.set("InputTextArea",Ie.TextArea);j.set("InputNumber",Fn);j.set("AutoComplete",Pn);j.set("Select",St);j.set("ApiSelect",ms);j.set("ApiTree",ys);j.set("TreeSelect",Ct);j.set("ApiTreeSelect",ws);j.set("ApiRadioGroup",cs);j.set("Switch",_n);j.set("RadioButtonGroup",fs);j.set("RadioGroup",Ae.Group);j.set("Checkbox",Ft);j.set("CheckboxGroup",Ft.Group);j.set("ApiCascader",ks);j.set("Cascader",qe);j.set("Slider",Dn);j.set("Rate",Rn);j.set("DatePicker",Be);j.set("MonthPicker",Be.MonthPicker);j.set("RangePicker",Be.RangePicker);j.set("WeekPicker",Be.WeekPicker);j.set("TimePicker",On);j.set("StrengthMeter",Co);j.set("IconPicker",$n);j.set("InputCountDown",Zn);j.set("Upload",ra);j.set("Divider",nt);const{t:We}=ce();function wt(e){return e.includes("Input")||e.includes("Complete")?We("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?We("common.chooseText"):""}const ko=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Mo(){return[...ko,"RangePicker"]}function To(e,t,n){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(t)?e.type=n?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(t)?e.type="array":["InputNumber"].includes(t)&&(e.type="number")}function Io(e,t){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&t&&at(t)?`${t}`:t}const en=Mo(),Fo=["Input","InputPassword","InputSearch","InputTextArea"];function Po(e,t){return N(()=>{const n=h(e),{labelCol:s={},wrapperCol:a={}}=n.itemProps||{},{labelWidth:r,disabledLabelWidth:o}=n,{labelWidth:i,labelCol:l,wrapperCol:c,layout:d}=h(t);if(!i&&!r&&!l||o)return s.style={textAlign:"left"},{labelCol:s,wrapperCol:a};let p=r||i;const m=k(k({},l),s),v=k(k({},c),a);return p&&(p=at(p)?`${p}px`:p),{labelCol:k({style:{width:p}},m),wrapperCol:k({style:{width:d==="vertical"?"100%":`calc(100% - ${p})`}},v)}})}function Ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Bn(e)}var _o=J({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:t}){const{t:n}=ce(),{schema:s,formProps:a}=Tt(e),r=Po(s,a),o=N(()=>{const{allDefaultValues:u,formModel:f,schema:S}=e,{mergeDynamicData:w}=e.formProps;return{field:S.field,model:f,values:k(k(k({},w),u),f),schema:S}}),i=N(()=>{var F;const{schema:u,tableAction:f,formModel:S,formActionType:w}=e;let{componentProps:b={}}=u;return Y(b)&&(b=(F=b({schema:u,tableAction:f,formModel:S,formActionType:w}))!=null?F:{}),u.component==="Divider"&&(b=Object.assign({type:"horizontal"},b,{orientation:"left",plain:!0})),b}),l=N(()=>{const{disabled:u}=e.formProps,{dynamicDisabled:f}=e.schema,{disabled:S=!1}=h(i);let w=!!u||S;return ve(f)&&(w=f),Y(f)&&(w=f(h(o))),w});function c(){const{show:u,ifShow:f}=e.schema,{showAdvancedButton:S}=e.formProps,w=S&&ve(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let b=!0,F=!0;return ve(u)&&(b=u),ve(f)&&(F=f),Y(u)&&(b=u(h(o))),Y(f)&&(F=f(h(o))),b=b&&w,{isShow:b,isIfShow:F}}function d(){var B;const{rules:u=[],component:f,rulesMessageJoinLabel:S,label:w,dynamicRules:b,required:F}=e.schema;if(Y(b))return b(h(o));let T=Ke(u);const{rulesMessageJoinLabel:E}=e.formProps,z=Reflect.has(e.schema,"rulesMessageJoinLabel")?S:E,y=wt(f)+`${z?w:""}`;function g(L,U){const W=L.message||y;return U===void 0||Un(U)||Array.isArray(U)&&U.length===0||typeof U=="string"&&U.trim()===""||typeof U=="object"&&Reflect.has(U,"checked")&&Reflect.has(U,"halfChecked")&&Array.isArray(U.checked)&&Array.isArray(U.halfChecked)&&U.checked.length===0&&U.halfChecked.length===0?Promise.reject(W):Promise.resolve()}const C=Y(F)?F(h(o)):F;C&&(!T||T.length===0?T=[{required:C,validator:g}]:T.findIndex(U=>Reflect.has(U,"required"))===-1&&T.push({required:C,validator:g}));const A=T.findIndex(L=>Reflect.has(L,"required")&&!Reflect.has(L,"validator"));if(A!==-1){const L=T[A],{isShow:U}=c();if(U||(L.required=!1),f){Reflect.has(L,"type")||(L.type=f==="InputNumber"?"number":"string"),L.message=L.message||y,(f.includes("Input")||f.includes("Textarea"))&&(L.whitespace=!0);const W=(B=h(i))==null?void 0:B.valueFormat;To(L,f,W)}}const _=T.findIndex(L=>L.max);return _!==-1&&!T[_].validator&&(T[_].message=T[_].message||n("component.form.maxTip",[T[_].max])),T}function p(){var U;const{renderComponentContent:u,component:f,field:S,changeEvent:w="change",valueField:b}=e.schema,F=f&&["Switch","Checkbox"].includes(f),T=`on${rs(w)}`,E={[T]:(...W)=>{const[Fe]=W;C[T]&&C[T](...W);const Pe=Fe?Fe.target:null,Ue=Pe?F?Pe.checked:Pe.value:Fe;e.setFormModel(S,Ue)}},z=j.get(f),{autoSetPlaceHolder:y,size:g}=e.formProps,C=te(k({allowClear:!0,getPopupContainer:W=>W.parentNode,size:g},h(i)),{disabled:h(l)});!C.disabled&&y&&f!=="RangePicker"&&f&&(C.placeholder=((U=h(i))==null?void 0:U.placeholder)||wt(f)),C.codeField=S,C.formValues=h(o);const _={[b||(F?"checked":"value")]:e.formModel[S]},B=k(k(k({},C),E),_);if(!u)return M(z,B,null);const L=Y(u)?k({},u(h(o))):{default:()=>u};return M(z,B,Ye(L)?L:{default:()=>[L]})}function m(){const{label:u,helpMessage:f,helpComponentProps:S,subLabel:w}=e.schema,b=w?M("span",null,[u,K(" "),M("span",{class:"text-secondary"},[w])]):u,F=Y(f)?f(h(o)):f;return!F||Array.isArray(F)&&F.length===0?b:M("span",null,[b,M(jn,H({placement:"top",class:"mx-1",text:F},S),null)])}function v(){const{itemProps:u,slot:f,render:S,field:w,suffix:b,component:F}=e.schema,{labelCol:T,wrapperCol:E}=h(r),{colon:z}=e.formProps;if(F==="Divider"){let y;return M($e,{span:24},{default:()=>[M(nt,h(i),Ye(y=m())?y:{default:()=>[y]})]})}else{const y=()=>f?pt(t,f,h(o)):S?S(h(o)):p(),g=!!b,C=Y(b)?b(h(o)):b;return M(ot.Item,H({name:w,colon:z,class:{"suffix-item":g}},u,{label:m(),rules:d(),labelCol:T,wrapperCol:E}),{default:()=>[M("div",{style:"display:flex"},[M("div",{style:"flex:1;"},[y()]),g&&M("span",{class:"suffix"},[C])])]})}}return()=>{let u;const{colProps:f={},colSlot:S,renderColContent:w,component:b}=e.schema;if(!j.has(b))return null;const{baseColProps:F={}}=e.formProps,T=k(k({},F),f),{isIfShow:E,isShow:z}=c(),y=h(o);return E&&Ln(M($e,T,Ye(u=(()=>S?pt(t,S,y):w?w(y):v())())?u:{default:()=>[u]}),[[En,z]])}}});const tn=Symbol();function Do(e){return xn(e,tn)}function Ro(){return Nn(tn)}const Oo=J({name:"BasicFormAction",components:{FormItem:ot.Item,Button:Vn,BasicArrow:Gn,[$e.name]:$e},props:{showActionButtonGroup:I.bool.def(!0),showResetButton:I.bool.def(!0),showSubmitButton:I.bool.def(!0),showAdvancedButton:I.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:I.number.def(6),isAdvanced:I.bool,hideAdvanceBtn:I.bool},emits:["toggle-advanced"],setup(e,{emit:t}){const{t:n}=ce(),s=N(()=>{const{showAdvancedButton:i,actionSpan:l,actionColOptions:c}=e,d=24-l,p=i?{span:d<6?24:d}:{};return k(k({style:{textAlign:"right"},span:i?6:4},p),c)}),a=N(()=>Object.assign({text:n("common.resetText")},e.resetButtonOptions)),r=N(()=>Object.assign({text:n("common.queryText")},e.submitButtonOptions));function o(){t("toggle-advanced")}return k({t:n,actionColOpt:s,getResetBtnOptions:a,getSubmitBtnOptions:r,toggleAdvanced:o},Ro())}});function $o(e,t,n,s,a,r){const o=D("Button"),i=D("BasicArrow"),l=D("FormItem"),c=D("a-col");return e.showActionButtonGroup?(R(),V(c,le(H({key:0},e.actionColOpt)),{default:O(()=>[ke("div",{style:zn([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[M(l,null,{default:O(()=>[re(e.$slots,"resetBefore"),e.showResetButton?(R(),V(o,H({key:0,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:O(()=>[K(Z(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):X("",!0),re(e.$slots,"submitBefore"),e.showSubmitButton?(R(),V(o,H({key:1,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:O(()=>[K(Z(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):X("",!0),re(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(R(),V(o,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:O(()=>[K(Z(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),M(i,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):X("",!0),re(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):X("",!0)}var Lo=ae(Oo,[["render",$o]]);function Eo(e,t,n){const s=/^\[(.+)\]$/;if(s.test(e)){const a=e.match(s);if(a&&a[1]){const r=a[1].split(",");return t=Array.isArray(t)?t:[t],r.forEach((o,i)=>{rt(n,o.trim(),t[i])}),!0}}}function Bo(e,t,n){const s=/^\{(.+)\}$/;if(s.test(e)){const a=e.match(s);if(a&&a[1]){const r=a[1].split(",");return t=ge(t)?t:{},r.forEach(o=>{rt(n,o.trim(),t[o.trim()])}),!0}}}function jo({defaultValueRef:e,getSchema:t,formModel:n,getProps:s}){function a(i){var c,d;if(!ge(i))return{};const l={};for(const p of Object.entries(i)){let[,m]=p;const[v]=p;if(!v||pe(m)&&m.length===0||Y(m))continue;const u=h(s).transformDateFunc;ge(m)&&(m=u==null?void 0:u(m)),pe(m)&&((c=m[0])==null?void 0:c.format)&&((d=m[1])==null?void 0:d.format)&&(m=m.map(f=>u==null?void 0:u(f))),we(m)&&(m=m.trim()),!Eo(v,m,l)&&!Bo(v,m,l)&&rt(l,v,m)}return r(l)}function r(i){const l=h(s).fieldMapToTime;if(!l||!Array.isArray(l))return i;for(const[c,[d,p],m="YYYY-MM-DD"]of l){if(!c||!d||!p||!i[c])continue;const[v,u]=i[c];i[d]=Me(v).format(m),i[p]=Me(u).format(m),Reflect.deleteProperty(i,c)}return i}function o(){const i=h(t),l={};i.forEach(c=>{const{defaultValue:d}=c;Pt(d)||(l[c.field]=d,n[c.field]=d)}),e.value=l}return{handleFormValues:a,initDefault:o}}const me=24;function Uo({advanceState:e,emit:t,getProps:n,getSchema:s,formModel:a,defaultValueRef:r}){const{realWidthRef:o,screenEnum:i,screenRef:l}=Wn(),c=N(()=>{if(!e.isAdvanced)return 0;const u=h(n).emptySpan||0;if(at(u))return u;if(ge(u)){const{span:f=0}=u,S=h(l);return u[S.toLowerCase()]||f||0}return 0}),d=_t(m,30);q([()=>h(s),()=>e.isAdvanced,()=>h(o)],()=>{const{showAdvancedButton:u}=h(n);u&&d()},{immediate:!0});function p(u,f=0,S=!1){const w=h(o),b=parseInt(u.md)||parseInt(u.xs)||parseInt(u.sm)||u.span||me,F=parseInt(u.lg)||b,T=parseInt(u.xl)||F,E=parseInt(u.xxl)||T;return w<=i.LG?f+=b:w<i.XL?f+=F:w<i.XXL?f+=T:f+=E,S?(e.hideAdvanceBtn=!1,f<=me*2?(e.hideAdvanceBtn=!0,e.isAdvanced=!0):f>me*2&&f<=me*(h(n).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced),{isAdvanced:e.isAdvanced,itemColSum:f}):f>me*(h(n).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:f}:{isAdvanced:!0,itemColSum:f}}function m(){let u=0,f=0;const{baseColProps:S={}}=h(n);for(const w of h(s)){const{show:b,colProps:F}=w;let T=!0;if(ve(b)&&(T=b),Y(b)&&(T=b({schema:w,model:a,field:w.field,values:k(k({},h(r)),a)})),T&&(F||S)){const{itemColSum:E,isAdvanced:z}=p(k(k({},S),F),u);u=E||0,z&&(f=u),w.isAdvanced=z}}e.actionSpan=f%me+h(c),p(h(n).actionColOptions||{span:me},u,!0),t("advanced-change")}function v(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:v}}function No({emit:e,getProps:t,formModel:n,getSchema:s,defaultValueRef:a,formElRef:r,schemaRef:o,handleFormValues:i}){function l(){return $(this,null,function*(){const{resetFunc:y,submitOnReset:g}=h(t);y&&Y(y)&&(yield y()),h(r)&&(Object.keys(n).forEach(A=>{const _=h(s).find(L=>L.field===A),B=(_==null?void 0:_.component)&&Fo.includes(_.component);n[A]=B?a.value[A]||"":a.value[A]}),Re(()=>T()),e("reset",Oe(n)),g&&z())})}function c(y){return $(this,null,function*(){const g=h(s).map(A=>A.field).filter(Boolean),C=[];Object.keys(y).forEach(A=>{const _=h(s).find(U=>U.field===A);let B=y[A];const L=Reflect.has(y,A);if(B=Io(_==null?void 0:_.component,B),L&&g.includes(A)){if(w(A))if(Array.isArray(B)){const U=[];for(const W of B)U.push(W?Me(W):null);n[A]=U}else{const{componentProps:U}=_||{};let W=U;typeof U=="function"&&(W=W({formModel:n})),n[A]=B?W!=null&&W.valueFormat?B:Me(B):null}else n[A]=B;C.push(A)}}),b(C).catch(A=>{})})}function d(y){return $(this,null,function*(){const g=Ke(h(s));if(!y)return;let C=we(y)?[y]:y;we(y)&&(C=[y]);for(const A of C)p(A,g);o.value=g})}function p(y,g){if(we(y)){const C=g.findIndex(A=>A.field===y);C!==-1&&(delete n[y],g.splice(C,1))}}function m(y,g,C=!1){return $(this,null,function*(){const A=Ke(h(s)),_=A.findIndex(B=>B.field===g);if(!g||_===-1||C){C?A.unshift(y):A.push(y),o.value=A,f(y);return}_!==-1&&A.splice(_+1,0,y),f(y),o.value=A})}function v(y){return $(this,null,function*(){let g=[];if(ge(y)&&g.push(y),pe(y)&&(g=[...y]),!g.every(A=>A.component==="Divider"||Reflect.has(A,"field")&&A.field)){Xe("All children of the form Schema array that need to be updated must contain the `field` field");return}o.value=g})}function u(y){return $(this,null,function*(){let g=[];if(ge(y)&&g.push(y),pe(y)&&(g=[...y]),!g.every(_=>_.component==="Divider"||Reflect.has(_,"field")&&_.field)){Xe("All children of the form Schema array that need to be updated must contain the `field` field");return}const A=[];g.forEach(_=>{h(s).forEach(B=>{if(B.field===_.field){const L=Dt(B,_);A.push(L)}else A.push(B)})}),f(A),o.value=Qn(A,"field")})}function f(y){let g=[];ge(y)&&g.push(y),pe(y)&&(g=[...y]);const C={};g.forEach(A=>{A.component!="Divider"&&Reflect.has(A,"field")&&A.field&&!Pt(A.defaultValue)&&(C[A.field]=A.defaultValue)}),c(C)}function S(){return h(r)?i(Oe(h(n))):{}}function w(y){return h(s).some(g=>g.field===y?en.includes(g.component):!1)}function b(y){return $(this,null,function*(){var g;return(g=h(r))==null?void 0:g.validateFields(y)})}function F(y){return $(this,null,function*(){var g;return yield(g=h(r))==null?void 0:g.validate(y)})}function T(y){return $(this,null,function*(){var g;yield(g=h(r))==null?void 0:g.clearValidate(y)})}function E(y,g){return $(this,null,function*(){var C;yield(C=h(r))==null?void 0:C.scrollToField(y,g)})}function z(y){return $(this,null,function*(){y&&y.preventDefault();const{submitFunc:g}=h(t);if(g&&Y(g)){yield g();return}if(!!h(r))try{const A=yield F(),_=i(A);e("submit",_)}catch(A){throw new Error(A)}})}return{handleSubmit:z,clearValidate:T,validate:F,validateFields:b,getFieldsValue:S,updateSchema:u,resetSchema:v,appendSchemaByField:m,removeSchemaByFiled:d,resetFields:l,setFieldsValue:c,scrollToField:E}}function xo(a){return $(this,arguments,function*({getSchema:e,getProps:t,formElRef:n,isInitedDefault:s}){De(()=>$(this,null,function*(){if(h(s)||!h(t).autoFocusFirstItem)return;yield Re();const r=h(e),o=h(n),i=o==null?void 0:o.$el;if(!o||!i||!r||r.length===0||!r[0].component.includes("Input"))return;const c=i.querySelector(".ant-row:first-child input");!c||c==null||c.focus()}))})}const Vo={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},compact:I.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:I.bool.def(!0),autoSubmitOnEnter:I.bool.def(!1),submitOnReset:I.bool,submitOnChange:I.bool,size:I.oneOf(["default","small","large"]).def("default"),disabled:I.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:I.bool,transformDateFunc:{type:Function,default:e=>{var t,n;return(n=(t=e==null?void 0:e.format)==null?void 0:t.call(e,"YYYY-MM-DD HH:mm:ss"))!=null?n:e}},rulesMessageJoinLabel:I.bool.def(!0),autoAdvancedLine:I.number.def(3),alwaysShowLines:I.number.def(1),showActionButtonGroup:I.bool.def(!0),actionColOptions:Object,showResetButton:I.bool.def(!0),autoFocusFirstItem:I.bool,resetButtonOptions:Object,showSubmitButton:I.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:I.bool,labelCol:Object,layout:I.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:Object,colon:I.bool,labelAlign:I.string,rowProps:Object};const Go=J({name:"BasicForm",components:{FormItem:_o,Form:ot,Row:Yn,FormAction:Lo},props:Vo,emits:["advanced-change","reset","submit","register"],setup(e,{emit:t,attrs:n}){const s=He({}),a=Rt(),r=He({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),o=x({}),i=x(!1),l=x({}),c=x(null),d=x(null),{prefixCls:p}=st("basic-form"),m=N(()=>k(k({},e),h(l))),v=N(()=>[p,{[`${p}--compact`]:h(m).compact}]),u=N(()=>{const{baseRowStyle:G={},rowProps:ee}=h(m);return k({style:G},ee)}),f=N(()=>k(k(k({},n),e),h(m))),S=N(()=>{const G=h(c)||h(m).schemas;for(const ee of G){const{defaultValue:ie,component:ct}=ee;if(ie&&en.includes(ct))if(!Array.isArray(ie))ee.defaultValue=Me(ie);else{const ut=[];ie.forEach(nn=>{ut.push(Me(nn))}),ee.defaultValue=ut}}return h(m).showAdvancedButton?G.filter(ee=>ee.component!=="Divider"):G}),{handleToggleAdvanced:w}=Uo({advanceState:r,emit:t,getProps:m,getSchema:S,formModel:s,defaultValueRef:o}),{handleFormValues:b,initDefault:F}=jo({getProps:m,defaultValueRef:o,getSchema:S,formModel:s});xo({getSchema:S,getProps:m,isInitedDefault:i,formElRef:d});const{handleSubmit:T,setFieldsValue:E,clearValidate:z,validate:y,validateFields:g,getFieldsValue:C,updateSchema:A,resetSchema:_,appendSchemaByField:B,removeSchemaByFiled:L,resetFields:U,scrollToField:W}=No({emit:t,getProps:m,formModel:s,getSchema:S,defaultValueRef:o,formElRef:d,schemaRef:c,handleFormValues:b});Do({resetAction:U,submitAction:T}),q(()=>h(m).model,()=>{const{model:G}=h(m);!G||E(G)},{immediate:!0}),q(()=>h(m).schemas,G=>{_(G!=null?G:[])}),q(()=>S.value,G=>{Re(()=>{var ee;(ee=a==null?void 0:a.redoModalHeight)==null||ee.call(a)}),!h(i)&&G!=null&&G.length&&(F(),i.value=!0)}),q(()=>s,_t(()=>{h(m).submitOnChange&&T()},300),{deep:!0});function Fe(G){return $(this,null,function*(){l.value=Dt(h(l)||{},G)})}function Pe(G,ee){s[G]=ee;const{validateTrigger:ie}=h(f);(!ie||ie==="change")&&g([G]).catch(ct=>{})}function Ue(G){const{autoSubmitOnEnter:ee}=h(m);if(!!ee&&G.key==="Enter"&&G.target&&G.target instanceof HTMLElement){const ie=G.target;ie&&ie.tagName&&ie.tagName.toUpperCase()=="INPUT"&&T()}}const Ne={getFieldsValue:C,setFieldsValue:E,resetFields:U,updateSchema:A,resetSchema:_,setProps:Fe,removeSchemaByFiled:L,appendSchemaByField:B,clearValidate:z,validateFields:g,validate:y,submit:T,scrollToField:W};return tt(()=>{F(),t("register",Ne)}),k({getBindValue:f,handleToggleAdvanced:w,handleEnterPress:Ue,formModel:s,defaultValueRef:o,advanceState:r,getRow:u,getProps:m,formElRef:d,getSchema:S,formActionType:Ne,setFormModel:Pe,getFormClass:v,getFormActionBindProps:N(()=>k(k({},m.value),r))},Ne)}});function zo(e,t,n,s,a,r){const o=D("FormItem"),i=D("FormAction"),l=D("Row"),c=D("Form");return R(),V(c,H(e.getBindValue,{class:e.getFormClass,ref:"formElRef",model:e.formModel,onKeypress:qn(e.handleEnterPress,["enter"])}),{default:O(()=>[M(l,le(he(e.getRow)),{default:O(()=>[re(e.$slots,"formHeader"),(R(!0),se(ue,null,de(e.getSchema,d=>(R(),V(o,{key:d.field,tableAction:e.tableAction,formActionType:e.formActionType,schema:d,formProps:e.getProps,allDefaultValues:e.defaultValueRef,formModel:e.formModel,setFormModel:e.setFormModel},be({_:2},[de(Object.keys(e.$slots),p=>({name:p,fn:O(m=>[re(e.$slots,p,le(he(m||{})))])}))]),1032,["tableAction","formActionType","schema","formProps","allDefaultValues","formModel","setFormModel"]))),128)),M(i,H(e.getFormActionBindProps,{onToggleAdvanced:e.handleToggleAdvanced}),be({_:2},[de(["resetBefore","submitBefore","advanceBefore","advanceAfter"],d=>({name:d,fn:O(p=>[re(e.$slots,d,le(he(p||{})))])}))]),1040,["onToggleAdvanced"]),re(e.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model","onKeypress"])}var mr=ae(Go,[["render",zo]]);function gr(e){const t=x(null),n=x(!1);function s(){return $(this,null,function*(){const o=h(t);return o||Xe("The form instance has not been obtained, please make sure that the form has been rendered when performing the form operation!"),yield Re(),o})}function a(o){Hn(()=>{t.value=null,n.value=null}),!(h(n)&&Kn()&&o===h(t))&&(t.value=o,n.value=!0,q(()=>e,()=>{e&&o.setProps(Xn(e))},{immediate:!0,deep:!0}))}return[a,{scrollToField:(o,i)=>$(this,null,function*(){(yield s()).scrollToField(o,i)}),setProps:o=>$(this,null,function*(){(yield s()).setProps(o)}),updateSchema:o=>$(this,null,function*(){(yield s()).updateSchema(o)}),resetSchema:o=>$(this,null,function*(){(yield s()).resetSchema(o)}),clearValidate:o=>$(this,null,function*(){(yield s()).clearValidate(o)}),resetFields:()=>$(this,null,function*(){s().then(o=>$(this,null,function*(){yield o.resetFields()}))}),removeSchemaByFiled:o=>$(this,null,function*(){var i;(i=h(t))==null||i.removeSchemaByFiled(o)}),getFieldsValue:()=>{var o;return(o=h(t))==null?void 0:o.getFieldsValue()},setFieldsValue:o=>$(this,null,function*(){(yield s()).setFieldsValue(o)}),appendSchemaByField:(o,i,l)=>$(this,null,function*(){(yield s()).appendSchemaByField(o,i,l)}),submit:()=>$(this,null,function*(){return(yield s()).submit()}),validate:o=>$(this,null,function*(){return(yield s()).validate(o)}),validateFields:o=>$(this,null,function*(){return(yield s()).validateFields(o)})}]}export{ms as A,mr as B,pr as D,cr as F,hr as I,lr as P,rr as R,jt as T,ir as a,ws as b,Ds as c,Us as d,Ks as e,dr as f,fr as g,ur as h,or as i,gr as u};
