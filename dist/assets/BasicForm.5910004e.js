var sn=Object.defineProperty,on=Object.defineProperties;var an=Object.getOwnPropertyDescriptors;var ut=Object.getOwnPropertySymbols;var rn=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable;var Fe=Math.pow,dt=(e,t,n)=>t in e?sn(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,k=(e,t)=>{for(var n in t||(t={}))rn.call(t,n)&&dt(e,n,t[n]);if(ut)for(var n of ut(t))ln.call(t,n)&&dt(e,n,t[n]);return e},te=(e,t)=>on(e,an(t));var V=(e,t,n)=>new Promise((s,o)=>{var a=l=>{try{i(n.next(l))}catch(c){o(c)}},r=l=>{try{i(n.throw(l))}catch(c){o(c)}},i=l=>l.done?s(l.value):Promise.resolve(l.value).then(a,r);i((n=n.apply(e,t)).next())});import{n as M,af as cn,bM as un,bN as dn,bO as fn,bP as pn,a as J,bQ as Ae,aj as I,s as N,by as Qe,c as ce,f as U,i as m,bx as $e,M as De,a6 as H,V as Y,bD as Ce,U as oe,J as D,o as R,j as x,y as O,h as se,Y as de,E as ue,z as K,t as Z,W as q,a4 as we,bR as St,bS as Le,X as be,Z as re,$ as le,a0 as he,m as ke,bT as hn,a5 as et,bU as pe,bV as Ct,bW as qe,aH as mn,aA as gn,bX as bn,an as kt,bY as yn,K as tt,bf as vn,aC as Mt,b as nt,bZ as An,Q as Re,aJ as ve,q as Se,k as X,b_ as wn,b$ as Sn,br as xe,O as Ee,c0 as Cn,c1 as kn,v as He,at as Tt,H as Mn,c2 as Tn,c3 as In,a1 as It,I as Ie,c4 as Pn,c5 as _n,bL as Fn,C as Pt,c6 as Dn,c7 as Rn,c8 as Be,c9 as On,ca as $n,bv as st,w as Ln,x as En,bB as ft,bA as Bn,G as Oe,F as ot,a3 as Ke,cb as jn,cc as Un,az as Nn,ay as xn,cd as Gn,ce as Vn,aE as zn,aK as ge,cf as at,cg as Me,ch as _t,ci as Wn,aM as Ft,cj as pt,ck as Dt,R as Yn,D as qn}from"./index.66dc6cca.js";/* empty css               *//* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import{u as je,C as Hn}from"./index.dd449670.js";/* empty css                *//* empty css                */import{u as Rt,B as Ot,a as $t,b as ht}from"./index.b75ea1a3.js";/* empty css                *//* empty css                *//* empty css                */import{d as Kn}from"./download.5b2676c7.js";import{u as Xn}from"./uniqBy.e1e9a821.js";var Zn={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M456 231a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0zm0 280a56 56 0 10112 0 56 56 0 10-112 0z"}}]},name:"more",theme:"outlined"},Jn=Zn;function mt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?Object(arguments[t]):{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){Qn(e,o,n[o])})}return e}function Qn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rt=function(t,n){var s=mt({},t,n.attrs);return M(cn,mt({},s,{icon:Jn}),null)};rt.displayName="MoreOutlined";rt.inheritAttrs=!1;var es=rt;function ts(e){return function(t){t=un(t);var n=dn(t)?fn(t):void 0,s=n?n[0]:t.charAt(0),o=n?pn(n,1).join(""):t.slice(1);return s[e]()+o}}var ns=ts("toUpperCase"),ss=ns;const os=J({name:"ApiRadioGroup",components:{RadioGroup:Ae.Group,RadioButton:Ae.Button,Radio:Ae},props:{api:{type:Function,default:null},params:{type:[Object,String],default:()=>({})},value:{type:[String,Number,Boolean]},isBtn:{type:[Boolean],default:!1},numberToString:I.bool,resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),immediate:I.bool.def(!0)},emits:["options-change","change"],setup(e,{emit:t}){const n=N([]),s=N(!1),o=N(!0),a=N([]),r=Qe(),{t:i}=ce(),[l]=je(e),c=U(()=>{const{labelField:v,valueField:u,numberToString:f}=e;return m(n).reduce((S,w)=>{if(w){const b=w[u];S.push(k({label:w[v],value:f?`${b}`:b},$e(w,[v,u])))}return S},[])});De(()=>{e.immediate&&d()}),H(()=>e.params,()=>{!m(o)&&d()},{deep:!0});function d(){return V(this,null,function*(){const v=e.api;if(!(!v||!Y(v))){n.value=[];try{s.value=!0;const u=yield v(e.params);if(Array.isArray(u)){n.value=u,p();return}e.resultField&&(n.value=Ce(u,e.resultField)||[]),p()}catch(u){console.warn(u)}finally{s.value=!1}}})}function p(){t("options-change",m(c))}function h(v,...u){a.value=u}return{state:l,getOptions:c,attrs:r,loading:s,t:i,handleChange:h,props:e}}});function as(e,t,n,s,o,a){const r=D("RadioButton"),i=D("Radio"),l=D("RadioGroup");return R(),x(l,q(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=c=>e.state=c),"button-style":"solid",onChange:e.handleChange}),{default:O(()=>[(R(!0),se(ue,null,de(e.getOptions,c=>(R(),se(ue,{key:`${c.value}`},[e.props.isBtn?(R(),x(r,{key:0,value:c.value,disabled:c.disabled},{default:O(()=>[K(Z(c.label),1)]),_:2},1032,["value","disabled"])):(R(),x(i,{key:1,value:c.value,disabled:c.disabled},{default:O(()=>[K(Z(c.label),1)]),_:2},1032,["value","disabled"]))],64))),128))]),_:1},16,["value","onChange"])}var rs=oe(os,[["render",as]]);const is=J({name:"RadioButtonGroup",components:{RadioGroup:Ae.Group,RadioButton:Ae.Button},props:{value:{type:[String,Number,Boolean]},options:{type:Array,default:()=>[]}},setup(e){const t=Qe(),[n]=je(e),s=U(()=>{const{options:o}=e;return!o||(o==null?void 0:o.length)===0?[]:o.some(r=>we(r))?o.map(r=>({label:r,value:r})):o});return{state:n,getOptions:s,attrs:t}}});function ls(e,t,n,s,o,a){const r=D("RadioButton"),i=D("RadioGroup");return R(),x(i,q(e.attrs,{value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l),"button-style":"solid"}),{default:O(()=>[(R(!0),se(ue,null,de(e.getOptions,l=>(R(),x(r,{key:`${l.value}`,value:l.value,disabled:l.disabled},{default:O(()=>[K(Z(l.label),1)]),_:2},1032,["value","disabled"]))),128))]),_:1},16,["value"])}var cs=oe(is,[["render",ls]]);const us=J({name:"ApiSelect",components:{Select:St,LoadingOutlined:Le},inheritAttrs:!1,props:{value:[Array,Object,String,Number],numberToString:I.bool,api:{type:Function,default:null},params:{type:Object,default:()=>({})},resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),immediate:I.bool.def(!0),alwaysLoad:I.bool.def(!1)},emits:["options-change","change"],setup(e,{emit:t}){const n=N([]),s=N(!1),o=N(!0),a=N([]),r=Qe(),{t:i}=ce(),[l]=je(e,"value","change",a),c=U(()=>{const{labelField:u,valueField:f,numberToString:S}=e;return m(n).reduce((w,b)=>{if(b){const P=b[f];w.push(te(k({},$e(b,[u,f])),{label:b[u],value:S?`${P}`:P}))}return w},[])});De(()=>{e.immediate&&!e.alwaysLoad&&d()}),H(()=>e.params,()=>{!m(o)&&d()},{deep:!0});function d(){return V(this,null,function*(){const u=e.api;if(!(!u||!Y(u))){n.value=[];try{s.value=!0;const f=yield u(e.params);if(Array.isArray(f)){n.value=f,h();return}e.resultField&&(n.value=Ce(f,e.resultField)||[]),h()}catch(f){console.warn(f)}finally{s.value=!1}}})}function p(u){return V(this,null,function*(){u&&(e.alwaysLoad?yield d():!e.immediate&&m(o)&&(yield d(),o.value=!1))})}function h(){t("options-change",m(c))}function v(u,...f){a.value=f}return{state:l,attrs:r,getOptions:c,loading:s,t:i,handleFetch:p,handleChange:v}}});function ds(e,t,n,s,o,a){const r=D("LoadingOutlined"),i=D("Select");return R(),x(i,q({onDropdownVisibleChange:e.handleFetch},e.$attrs,{onChange:e.handleChange,options:e.getOptions,value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l)}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(r,{spin:""})])}:void 0,e.loading?{name:"notFoundContent",fn:O(()=>[ke("span",null,[M(r,{spin:"",class:"mr-1"}),K(" "+Z(e.t("component.form.apiSelectNotFound")),1)])])}:void 0]),1040,["onDropdownVisibleChange","onChange","options","value"])}var fs=oe(us,[["render",ds]]);const ps=J({name:"ApiTree",components:{ATree:hn,LoadingOutlined:Le},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:I.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:n}){const s=N([]),o=N(!1),a=N(!1),r=U(()=>k(k({},e.api?{treeData:m(s)}:{}),t));function i(...c){n("change",...c)}H(()=>e.params,()=>{!m(o)&&l()},{deep:!0}),H(()=>e.immediate,c=>{c&&!o.value&&l()}),et(()=>{e.immediate&&l()});function l(){return V(this,null,function*(){const{api:c}=e;if(!c||!Y(c))return;a.value=!0,s.value=[];let d;try{d=yield c(e.params)}catch(p){console.error(p)}a.value=!1,d&&(pe(d)||(d=Ce(d,e.resultField)),s.value=d||[],o.value=!0,n("options-change",s.value))})}return{getAttrs:r,loading:a,handleChange:i}}});function hs(e,t,n,s,o,a){const r=D("LoadingOutlined"),i=D("a-tree");return R(),x(i,q(e.getAttrs,{onChange:e.handleChange}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(r,{spin:""})])}:void 0]),1040,["onChange"])}var ms=oe(ps,[["render",hs]]);const gs=J({name:"ApiTreeSelect",components:{ATreeSelect:Ct,LoadingOutlined:Le},props:{api:{type:Function},params:{type:Object},immediate:{type:Boolean,default:!0},resultField:I.string.def("")},emits:["options-change","change"],setup(e,{attrs:t,emit:n}){const s=N([]),o=N(!1),a=N(!1),r=U(()=>k(k({},e.api?{treeData:m(s)}:{}),t));function i(...c){n("change",...c)}H(()=>e.params,()=>{!m(o)&&l()},{deep:!0}),H(()=>e.immediate,c=>{c&&!o.value&&l()}),et(()=>{e.immediate&&l()});function l(){return V(this,null,function*(){const{api:c}=e;if(!c||!Y(c))return;a.value=!0,s.value=[];let d;try{d=yield c(e.params)}catch(p){console.error(p)}a.value=!1,d&&(pe(d)||(d=Ce(d,e.resultField)),s.value=d||[],o.value=!0,n("options-change",s.value))})}return{getAttrs:r,loading:a,handleChange:i}}});function bs(e,t,n,s,o,a){const r=D("LoadingOutlined"),i=D("a-tree-select");return R(),x(i,q(e.getAttrs,{onChange:e.handleChange}),be({_:2},[de(Object.keys(e.$slots),l=>({name:l,fn:O(c=>[re(e.$slots,l,le(he(c||{})))])})),e.loading?{name:"suffixIcon",fn:O(()=>[M(r,{spin:""})])}:void 0]),1040,["onChange"])}var ys=oe(gs,[["render",bs]]);const vs=J({name:"ApiCascader",components:{LoadingOutlined:Le,[qe.name]:qe},props:{value:{type:Array},api:{type:Function,default:null},numberToString:I.bool,resultField:I.string.def(""),labelField:I.string.def("label"),valueField:I.string.def("value"),childrenField:I.string.def("children"),asyncFetchParamKey:I.string.def("parentCode"),immediate:I.bool.def(!0),initFetchParams:{type:Object,default:()=>({})},isLeaf:{type:Function,default:null},displayRenderArray:{type:Array}},emits:["change","defaultChange"],setup(e,{emit:t}){const n=N([]),s=N([]),o=N(!1),a=N([]),r=N(!0),{t:i}=ce(),[l]=je(e,"value","change",a);H(n,u=>{const f=c(u);s.value=f},{deep:!0});function c(u){const{labelField:f,valueField:S,numberToString:w,childrenField:b,isLeaf:P}=e;return u.reduce((T,L)=>{if(L){const z=L[S],y=te(k({},$e(L,[f,S])),{label:L[f],value:w?`${z}`:z,isLeaf:P&&typeof P=="function"?P(L):!1}),g=Reflect.get(L,b);g&&Reflect.set(y,b,c(g)),T.push(y)}return T},[])}function d(){return V(this,null,function*(){const u=e.api;if(!(!u||!Y(u))){n.value=[],o.value=!0;try{const f=yield u(e.initFetchParams);if(Array.isArray(f)){n.value=f;return}e.resultField&&(n.value=Ce(f,e.resultField)||[])}catch(f){console.warn(f)}finally{o.value=!1}}})}function p(u){return V(this,null,function*(){const f=u[u.length-1];f.loading=!0;const S=e.api;if(!(!S||!Y(S)))try{const w=yield S({[e.asyncFetchParamKey]:Reflect.get(f,"value")});if(Array.isArray(w)){const b=c(w);f.children=b;return}if(e.resultField){const b=c(Ce(w,e.resultField)||[]);f.children=b}}catch(w){console.error(w)}finally{f.loading=!1}})}De(()=>{e.immediate&&d()}),H(()=>e.initFetchParams,()=>{!m(r)&&d()},{deep:!0});function h(u,f){a.value=u,t("defaultChange",u,f)}function v({labels:u,selectedOptions:f}){return m(a).length===f.length?u.join(" / "):e.displayRenderArray?e.displayRenderArray.join(" / "):""}return{state:l,options:s,loading:o,t:i,handleChange:h,loadData:p,handleRenderDisplay:v}}});function As(e,t,n,s,o,a){const r=D("LoadingOutlined"),i=D("a-cascader");return R(),x(i,{value:e.state,"onUpdate:value":t[0]||(t[0]=l=>e.state=l),options:e.options,"load-data":e.loadData,"change-on-select":"",onChange:e.handleChange,displayRender:e.handleRenderDisplay},be({_:2},[e.loading?{name:"suffixIcon",fn:O(()=>[M(r,{spin:""})])}:void 0,e.loading?{name:"notFoundContent",fn:O(()=>[ke("span",null,[M(r,{spin:"",class:"mr-1"}),K(" "+Z(e.t("component.form.apiSelectNotFound")),1)])])}:void 0]),1032,["value","options","load-data","onChange","displayRender"])}var ws=oe(vs,[["render",As]]);const Lt={helpText:{type:String,default:""},maxSize:{type:Number,default:2},maxNumber:{type:Number,default:1/0},accept:{type:Array,default:()=>[]},multiple:{type:Boolean,default:!0},uploadParams:{type:Object,default:{}},api:{type:Function,default:null,required:!0},name:{type:String,default:"file"},filename:{type:String,default:null}},Ss=te(k({value:{type:Array,default:()=>[]}},Lt),{showPreviewNumber:{type:Boolean,default:!0},emptyHidePreview:{type:Boolean,default:!1}}),Cs={value:{type:Array,default:()=>[]}},ks={columns:{type:[Array],default:null},actionColumn:{type:Object,default:null},dataSource:{type:Array,default:null}};const{t:Ge}=ce();function Ms({acceptRef:e,helpTextRef:t,maxNumberRef:n,maxSizeRef:s}){const o=U(()=>{const i=m(e);return i&&i.length>0?i:[]}),a=U(()=>m(o).map(i=>i.indexOf("/")>0||i.startsWith(".")?i:`.${i}`).join(",")),r=U(()=>{const i=m(t);if(i)return i;const l=[],c=m(e);c.length>0&&l.push(Ge("component.upload.accept",[c.join(",")]));const d=m(s);d&&l.push(Ge("component.upload.maxSize",[d]));const p=m(n);return p&&p!==1/0&&l.push(Ge("component.upload.maxNumber",[p])),l.join("\uFF0C")});return{getAccept:o,getStringAccept:a,getHelpText:r}}var Q=(e=>(e.SUCCESS="success",e.ERROR="error",e.UPLOADING="uploading",e))(Q||{});function Ts(e){return Et(e.name)}function Et(e){return/\.(jpg|jpeg|png|gif)$/i.test(e)}function Is(e){return new Promise((t,n)=>{const s=new FileReader;s.readAsDataURL(e),s.onload=()=>t({result:s.result,file:e}),s.onerror=o=>n(o)})}const Bt=Symbol("basic-table");function rr(e){gn(Bt,e)}function Ps(){return mn(Bt)}const{table:_s}=bn,{pageSizeOptions:Fs,defaultPageSize:Ds,fetchSetting:Rs,defaultSize:Os,defaultSortFn:$s,defaultFilterFn:Ls}=_s,ir="key",lr=Fs,cr=Ds,ur=Rs,dr=Os,fr=$s,pr=Ls,hr="center",mr="INDEX",Es="ACTION";const Bs=J({name:"TableAction",components:{Icon:kt,PopConfirmButton:yn,Divider:tt,Dropdown:vn,MoreOutlined:es,Tooltip:Mt},props:{actions:{type:Array,default:null},dropDownActions:{type:Array,default:null},divider:I.bool.def(!0),outside:I.bool,stopButtonPropagation:I.bool.def(!1)},setup(e){const{prefixCls:t}=nt("basic-table-action");let n={};e.outside||(n=Ps());const{hasPermission:s}=An();function o(d){const p=d.ifShow;let h=!0;return ve(p)&&(h=p),Y(p)&&(h=p(d)),h}const a=U(()=>(Re(e.actions)||[]).filter(d=>s(d.auth)&&o(d)).map(d=>{const{popConfirm:p}=d;return te(k(k({getPopupContainer:()=>{var h;return(h=m(n==null?void 0:n.wrapRef.value))!=null?h:document.body},type:"link",size:"small"},d),p||{}),{onConfirm:p==null?void 0:p.confirm,onCancel:p==null?void 0:p.cancel,enable:!!p})})),r=U(()=>{const d=(Re(e.dropDownActions)||[]).filter(p=>s(p.auth)&&o(p));return d.map((p,h)=>{const{label:v,popConfirm:u}=p;return te(k(k({},p),u),{onConfirm:u==null?void 0:u.confirm,onCancel:u==null?void 0:u.cancel,text:v,divider:h<d.length-1?e.divider:!1})})}),i=U(()=>{var h,v;const p=(((h=n==null?void 0:n.getColumns)==null?void 0:h.call(n))||[]).find(u=>u.flag===Es);return(v=p==null?void 0:p.align)!=null?v:"left"});function l(d){return k({getPopupContainer:()=>{var p;return(p=m(n==null?void 0:n.wrapRef.value))!=null?p:document.body},placement:"bottom"},we(d)?{title:d}:d)}function c(d){if(!e.stopButtonPropagation)return;d.composedPath().find(v=>{var u;return((u=v.tagName)==null?void 0:u.toUpperCase())==="BUTTON"})&&d.stopPropagation()}return{prefixCls:t,getActions:a,getDropdownList:r,getAlign:i,onCellClick:c,getTooltip:l}}});function js(e,t,n,s,o,a){const r=D("Icon"),i=D("PopConfirmButton"),l=D("Tooltip"),c=D("Divider"),d=D("MoreOutlined"),p=D("a-button"),h=D("Dropdown");return R(),se("div",{class:Se([e.prefixCls,e.getAlign]),onClick:t[0]||(t[0]=(...v)=>e.onCellClick&&e.onCellClick(...v))},[(R(!0),se(ue,null,de(e.getActions,(v,u)=>(R(),se(ue,{key:`${u}-${v.label}`},[v.tooltip?(R(),x(l,le(q({key:0},e.getTooltip(v.tooltip))),{default:O(()=>[M(i,le(he(v)),{default:O(()=>[v.icon?(R(),x(r,{key:0,icon:v.icon,class:Se({"mr-1":!!v.label})},null,8,["icon","class"])):X("",!0),v.label?(R(),se(ue,{key:1},[K(Z(v.label),1)],64)):X("",!0)]),_:2},1040)]),_:2},1040)):(R(),x(i,le(q({key:1},v)),{default:O(()=>[v.icon?(R(),x(r,{key:0,icon:v.icon,class:Se({"mr-1":!!v.label})},null,8,["icon","class"])):X("",!0),v.label?(R(),se(ue,{key:1},[K(Z(v.label),1)],64)):X("",!0)]),_:2},1040)),e.divider&&u<e.getActions.length-1?(R(),x(c,{key:2,type:"vertical",class:"action-divider"})):X("",!0)],64))),128)),e.dropDownActions&&e.getDropdownList.length>0?(R(),x(h,{key:0,trigger:["hover"],dropMenuList:e.getDropdownList,popconfirm:""},{default:O(()=>[re(e.$slots,"more"),e.$slots.more?X("",!0):(R(),x(p,{key:0,type:"link",size:"small"},{default:O(()=>[M(d,{class:"icon-more"})]),_:1}))]),_:3},8,["dropMenuList"])):X("",!0)],2)}var jt=oe(Bs,[["render",js]]);const Us=J({components:{Image:wn},props:{fileUrl:I.string.def(""),fileName:I.string.def("")}}),Ns={class:"thumb"};function xs(e,t,n,s,o,a){const r=D("Image");return R(),se("span",Ns,[e.fileUrl?(R(),x(r,{key:0,src:e.fileUrl,width:104},null,8,["src"])):X("",!0)])}var Ut=oe(Us,[["render",xs]]);const{t:ne}=ce();function Gs(){return[{dataIndex:"thumbUrl",title:ne("component.upload.legend"),width:100,customRender:({record:e})=>{const{thumbUrl:t}=e||{};return t&&M(Ut,{fileUrl:t},null)}},{dataIndex:"name",title:ne("component.upload.fileName"),align:"left",customRender:({text:e,record:t})=>{const{percent:n,status:s}=t||{};let o="normal";return s===Q.ERROR?o="exception":s===Q.UPLOADING?o="active":s===Q.SUCCESS&&(o="success"),M("span",null,[M("p",{class:"truncate mb-1",title:e},[e]),M(Sn,{percent:n,size:"small",status:o},null)])}},{dataIndex:"size",title:ne("component.upload.fileSize"),width:100,customRender:({text:e=0})=>e&&(e/1024).toFixed(2)+"KB"},{dataIndex:"status",title:ne("component.upload.fileStatue"),width:100,customRender:({text:e})=>e===Q.SUCCESS?M(xe,{color:"green"},{default:()=>ne("component.upload.uploadSuccess")}):e===Q.ERROR?M(xe,{color:"red"},{default:()=>ne("component.upload.uploadError")}):e===Q.UPLOADING?M(xe,{color:"blue"},{default:()=>ne("component.upload.uploading")}):e}]}function Vs(e){return{width:120,title:ne("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:t})=>{const n=[{label:ne("component.upload.del"),color:"error",onClick:e.bind(null,t)}];return M(jt,{actions:n,outside:!0},null)}}}function zs(){return[{dataIndex:"url",title:ne("component.upload.legend"),width:100,customRender:({record:e})=>{const{url:t}=e||{};return Et(t)&&M(Ut,{fileUrl:t},null)}},{dataIndex:"name",title:ne("component.upload.fileName"),align:"left"}]}function Ws({handleRemove:e,handleDownload:t}){return{width:160,title:ne("component.upload.operating"),dataIndex:"action",fixed:!1,customRender:({record:n})=>{const s=[{label:ne("component.upload.del"),color:"error",onClick:e.bind(null,n)},{label:ne("component.upload.download"),onClick:t.bind(null,n)}];return M(jt,{actions:s,outside:!0},null)}}}const Xe=[];for(let e=0;e<=15;e++)Xe[e]=e.toString(16);function Ys(){let e="";for(let t=1;t<=36;t++)t===9||t===14||t===19||t===24?e+="-":t===15?e+=4:t===20?e+=Xe[Math.random()*4|8]:e+=Xe[Math.random()*16|0];return e.replace(/-/g,"")}var Nt=J({name:"FileList",props:ks,setup(e){const t=Rt();return H(()=>e.dataSource,()=>{Ee(()=>{var n;(n=t==null?void 0:t.redoModalHeight)==null||n.call(t)})}),()=>{const{columns:n,actionColumn:s,dataSource:o}=e,a=[...n,s];return M("table",{class:"file-table"},[M("colgroup",null,[a.map(r=>{const{width:i=0,dataIndex:l}=r,c={width:`${i}px`,minWidth:`${i}px`};return M("col",{style:i?c:{},key:l},null)})]),M("thead",null,[M("tr",{class:"file-table-tr"},[a.map(r=>{const{title:i="",align:l="center",dataIndex:c}=r;return M("th",{class:["file-table-th",l],key:c},[i])})])]),M("tbody",null,[o.map((r={},i)=>M("tr",{class:"file-table-tr",key:`${i+r.name||""}`},[a.map(l=>{const{dataIndex:c="",customRender:d,align:p="center"}=l,h=d&&Y(d);return M("td",{class:["file-table-td",p],key:c},[h?d==null?void 0:d({text:r[c],record:r}):r[c]])})]))])])}}});const qs=J({components:{BasicModal:Ot,Upload:Cn,Alert:kn,FileList:Nt},props:te(k({},Lt),{previewFileList:{type:Array,default:()=>[]}}),emits:["change","register","delete"],setup(e,{emit:t}){const n=He({fileList:[]}),s=N(!1),o=N([]),{accept:a,helpText:r,maxNumber:i,maxSize:l}=Tt(e),{t:c}=ce(),[d,{closeModal:p}]=$t(),{getStringAccept:h,getHelpText:v}=Ms({acceptRef:a,helpTextRef:r,maxNumberRef:i,maxSizeRef:l}),{createMessage:u}=Mn(),f=U(()=>o.value.length>0&&!o.value.every(g=>g.status===Q.SUCCESS)),S=U(()=>{const g=o.value.some(C=>C.status===Q.SUCCESS);return{disabled:s.value||o.value.length===0||!g}}),w=U(()=>{const g=o.value.some(C=>C.status===Q.ERROR);return s.value?c("component.upload.uploading"):c(g?"component.upload.reUploadFailed":"component.upload.startUpload")});function b(g){const{size:C,name:A}=g,{maxSize:F}=e;if(F&&g.size/1024/1024>=F)return u.error(c("component.upload.maxSizeMultiple",[F])),!1;const E={uuid:Ys(),file:g,size:C,name:A,percent:0,type:A.split(".").pop()};return Ts(g)?Is(g).then(({result:$})=>{o.value=[...m(o),k({thumbUrl:$},E)]}):o.value=[...m(o),E],!1}function P(g){const C=o.value.findIndex(A=>A.uuid===g.uuid);C!==-1&&o.value.splice(C,1),t("delete",g)}function T(g){return V(this,null,function*(){var A;const{api:C}=e;if(!C||!Y(C))return Tn("upload api must exist and be a function");try{g.status=Q.UPLOADING;const{data:F}=yield(A=e.api)==null?void 0:A.call(e,{data:k({},e.uploadParams||{}),file:g.file,name:e.name,filename:e.filename},function($){const j=$.loaded/$.total*100|0;g.percent=j});return g.status=Q.SUCCESS,g.responseData=F,{success:!0,error:null}}catch(F){return g.status=Q.ERROR,{success:!1,error:F}}})}function L(){return V(this,null,function*(){var C;const{maxNumber:g}=e;if(o.value.length+((C=e.previewFileList)==null?void 0:C.length)>g)return u.warning(c("component.upload.maxNumber",[g]));try{s.value=!0;const A=o.value.filter($=>$.status!==Q.SUCCESS)||[],F=yield Promise.all(A.map($=>T($)));s.value=!1;const E=F.filter($=>!$.success);if(E.length>0)throw E}catch(A){throw s.value=!1,A}})}function z(){const{maxNumber:g}=e;if(o.value.length>g)return u.warning(c("component.upload.maxNumber",[g]));if(s.value)return u.warning(c("component.upload.saveWarn"));const C=[];for(const A of o.value){const{status:F,responseData:E}=A;F===Q.SUCCESS&&E&&C.push(E.url)}if(C.length<=0)return u.warning(c("component.upload.saveError"));o.value=[],p(),t("change",C)}function y(){return V(this,null,function*(){return s.value?(u.warning(c("component.upload.uploadWait")),!1):(o.value=[],!0)})}return{columns:Gs(),actionColumn:Vs(P),register:d,closeModal:p,getHelpText:v,getStringAccept:h,getOkButtonProps:S,beforeUpload:b,fileListRef:o,state:n,isUploadingRef:s,handleStartUpload:L,handleOk:z,handleCloseFunc:y,getIsSelectFile:f,getUploadBtnText:w,t:c}}}),Hs={class:"upload-modal-toolbar"};function Ks(e,t,n,s,o,a){const r=D("a-button"),i=D("Alert"),l=D("Upload"),c=D("FileList"),d=D("BasicModal");return R(),x(d,q({width:"800px",title:e.t("component.upload.upload"),okText:e.t("component.upload.save")},e.$attrs,{onRegister:e.register,onOk:e.handleOk,closeFunc:e.handleCloseFunc,maskClosable:!1,keyboard:!1,class:"upload-modal",okButtonProps:e.getOkButtonProps,cancelButtonProps:{disabled:e.isUploadingRef}}),{centerFooter:O(()=>[M(r,{onClick:e.handleStartUpload,color:"success",disabled:!e.getIsSelectFile,loading:e.isUploadingRef},{default:O(()=>[K(Z(e.getUploadBtnText),1)]),_:1},8,["onClick","disabled","loading"])]),default:O(()=>[ke("div",Hs,[M(i,{message:e.getHelpText,type:"info",banner:"",class:"upload-modal-toolbar__text"},null,8,["message"]),M(l,{accept:e.getStringAccept,multiple:e.multiple,"before-upload":e.beforeUpload,"show-upload-list":!1,class:"upload-modal-toolbar__btn"},{default:O(()=>[M(r,{type:"primary"},{default:O(()=>[K(Z(e.t("component.upload.choose")),1)]),_:1})]),_:1},8,["accept","multiple","before-upload"])]),M(c,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","okText","onRegister","onOk","closeFunc","okButtonProps","cancelButtonProps"])}var Xs=oe(qs,[["render",Ks]]);const Zs=J({components:{BasicModal:Ot,FileList:Nt},props:Cs,emits:["list-change","register","delete"],setup(e,{emit:t}){const[n,{closeModal:s}]=$t(),{t:o}=ce(),a=N([]);H(()=>e.value,l=>{pe(l)||(l=[]),a.value=l.filter(c=>!!c).map(c=>({url:c,type:c.split(".").pop()||"",name:c.split("/").pop()||""}))},{immediate:!0});function r(l){const c=a.value.findIndex(d=>d.url===l.url);if(c!==-1){const d=a.value.splice(c,1);t("delete",d[0].url),t("list-change",a.value.map(p=>p.url))}}function i(l){const{url:c=""}=l;Kn({url:c})}return{t:o,register:n,closeModal:s,fileListRef:a,columns:zs(),actionColumn:Ws({handleRemove:r,handleDownload:i})}}});function Js(e,t,n,s,o,a){const r=D("FileList"),i=D("BasicModal");return R(),x(i,q({width:"800px",title:e.t("component.upload.preview"),class:"upload-preview-modal"},e.$attrs,{onRegister:e.register,showOkBtn:!1}),{default:O(()=>[M(r,{dataSource:e.fileListRef,columns:e.columns,actionColumn:e.actionColumn},null,8,["dataSource","columns","actionColumn"])]),_:1},16,["title","onRegister"])}var Qs=oe(Zs,[["render",Js]]);const eo=J({name:"BasicUpload",components:{UploadModal:Xs,Space:In,UploadPreviewModal:Qs,Icon:kt,Tooltip:Mt},props:Ss,emits:["change","delete","preview-delete","update:value"],setup(e,{emit:t,attrs:n}){const{t:s}=ce(),[o,{openModal:a}]=ht(),[r,{openModal:i}]=ht(),l=N([]),c=U(()=>{const{emptyHidePreview:f}=e;return f&&f?l.value.length>0:!0}),d=U(()=>{const f=k(k({},n),e);return $e(f,"onChange")});H(()=>e.value,(f=[])=>{l.value=pe(f)?f:[]},{immediate:!0});function p(f){l.value=[...m(l),...f||[]],t("update:value",l.value),t("change",l.value)}function h(f){l.value=[...f||[]],t("update:value",l.value),t("change",l.value)}function v(f){t("delete",f)}function u(f){t("preview-delete",f)}return{registerUploadModal:o,openUploadModal:a,handleChange:p,handlePreviewChange:h,registerPreviewModal:r,openPreviewModal:i,fileList:l,showPreview:c,bindValue:d,handleDelete:v,handlePreviewDelete:u,t:s}}});function to(e,t,n,s,o,a){const r=D("a-button"),i=D("Icon"),l=D("Tooltip"),c=D("Space"),d=D("UploadModal"),p=D("UploadPreviewModal");return R(),se("div",null,[M(c,null,{default:O(()=>[M(r,{type:"primary",onClick:e.openUploadModal,preIcon:"carbon:cloud-upload"},{default:O(()=>[K(Z(e.t("component.upload.upload")),1)]),_:1},8,["onClick"]),e.showPreview?(R(),x(l,{key:0,placement:"bottom"},{title:O(()=>[K(Z(e.t("component.upload.uploaded"))+" ",1),e.fileList.length?(R(),se(ue,{key:0},[K(Z(e.fileList.length),1)],64)):X("",!0)]),default:O(()=>[M(r,{onClick:e.openPreviewModal},{default:O(()=>[M(i,{icon:"bi:eye"}),e.fileList.length&&e.showPreviewNumber?(R(),se(ue,{key:0},[K(Z(e.fileList.length),1)],64)):X("",!0)]),_:1},8,["onClick"])]),_:1})):X("",!0)]),_:1}),M(d,q(e.bindValue,{previewFileList:e.fileList,onRegister:e.registerUploadModal,onChange:e.handleChange,onDelete:e.handleDelete}),null,16,["previewFileList","onRegister","onChange","onDelete"]),M(p,{value:e.fileList,onRegister:e.registerPreviewModal,onListChange:e.handlePreviewChange,onDelete:e.handlePreviewDelete},null,8,["value","onRegister","onListChange","onDelete"])])}var no=oe(eo,[["render",to]]);const so=It(no),oo=e=>Object.keys(e).length===0,Ze=(e,t)=>e.push.apply(e,t),ao=(e,t)=>e.split("").map(s=>t[s]||s).join(""),Te=e=>e.sort((t,n)=>t.i-n.i||t.j-n.j),gt=e=>{const t={};let n=1;return e.forEach(s=>{t[s]=n,n+=1}),t};var ro={4:[[1,2],[2,3]],5:[[1,3],[2,3]],6:[[1,2],[2,4],[4,5]],7:[[1,3],[2,3],[4,5],[4,6]],8:[[2,4],[4,6]]};const bt=2050,yt=1e3,io=ro,lo=10,co=1e4,xt=10,Gt=50,Vt=20,zt=/^[A-Z\xbf-\xdf][^A-Z\xbf-\xdf]+$/,uo=/^[^A-Z\xbf-\xdf]+[A-Z\xbf-\xdf]$/,fo=/^[A-Z\xbf-\xdf]+$/,Wt=/^[^a-z\xdf-\xff]+$/,po=/^[a-z\xdf-\xff]+$/,ho=/^[^A-Z\xbf-\xdf]+$/,mo=/[a-z\xdf-\xff]/,go=/[A-Z\xbf-\xdf]/,bo=/[^A-Za-z\xbf-\xdf]/gi,yo=/^\d+$/,it=new Date().getFullYear(),vo={recentYear:/19\d\d|200\d|201\d|202\d/g};class Ao{match({password:t}){const n=[...this.getMatchesWithoutSeparator(t),...this.getMatchesWithSeparator(t)],s=this.filterNoise(n);return Te(s)}getMatchesWithSeparator(t){const n=[],s=/^(\d{1,4})([\s/\\_.-])(\d{1,2})\2(\d{1,4})$/;for(let o=0;o<=Math.abs(t.length-6);o+=1)for(let a=o+5;a<=o+9&&!(a>=t.length);a+=1){const r=t.slice(o,+a+1||9e9),i=s.exec(r);if(i!=null){const l=this.mapIntegersToDayMonthYear([parseInt(i[1],10),parseInt(i[3],10),parseInt(i[4],10)]);l!=null&&n.push({pattern:"date",token:r,i:o,j:a,separator:i[2],year:l.year,month:l.month,day:l.day})}}return n}getMatchesWithoutSeparator(t){const n=[],s=/^\d{4,8}$/,o=a=>Math.abs(a.year-it);for(let a=0;a<=Math.abs(t.length-4);a+=1)for(let r=a+3;r<=a+7&&!(r>=t.length);r+=1){const i=t.slice(a,+r+1||9e9);if(s.exec(i)){const l=[],c=i.length;if(io[c].forEach(([p,h])=>{const v=this.mapIntegersToDayMonthYear([parseInt(i.slice(0,p),10),parseInt(i.slice(p,h),10),parseInt(i.slice(h),10)]);v!=null&&l.push(v)}),l.length>0){let p=l[0],h=o(l[0]);l.slice(1).forEach(v=>{const u=o(v);u<h&&(p=v,h=u)}),n.push({pattern:"date",token:i,i:a,j:r,separator:"",year:p.year,month:p.month,day:p.day})}}}return n}filterNoise(t){return t.filter(n=>{let s=!1;const o=t.length;for(let a=0;a<o;a+=1){const r=t[a];if(n!==r&&r.i<=n.i&&r.j>=n.j){s=!0;break}}return!s})}mapIntegersToDayMonthYear(t){if(t[1]>31||t[1]<=0)return null;let n=0,s=0,o=0;for(let a=0,r=t.length;a<r;a+=1){const i=t[a];if(i>99&&i<yt||i>bt)return null;i>31&&(s+=1),i>12&&(n+=1),i<=0&&(o+=1)}return s>=2||n===3||o>=2?null:this.getDayMonth(t)}getDayMonth(t){const n=[[t[2],t.slice(0,2)],[t[0],t.slice(1,3)]],s=n.length;for(let o=0;o<s;o+=1){const[a,r]=n[o];if(yt<=a&&a<=bt){const i=this.mapIntegersToDayMonth(r);return i!=null?{year:a,month:i.month,day:i.day}:null}}for(let o=0;o<s;o+=1){const[a,r]=n[o],i=this.mapIntegersToDayMonth(r);if(i!=null)return{year:this.twoToFourDigitYear(a),month:i.month,day:i.day}}return null}mapIntegersToDayMonth(t){const n=[t,t.slice().reverse()];for(let s=0;s<n.length;s+=1){const o=n[s],a=o[0],r=o[1];if(a>=1&&a<=31&&r>=1&&r<=12)return{day:a,month:r}}return null}twoToFourDigitYear(t){return t>99?t:t>50?t+1900:t+2e3}}const fe=new Uint32Array(65536),wo=(e,t)=>{const n=e.length,s=t.length,o=1<<n-1;let a=-1,r=0,i=n,l=n;for(;l--;)fe[e.charCodeAt(l)]|=1<<l;for(l=0;l<s;l++){let c=fe[t.charCodeAt(l)];const d=c|r;c|=(c&a)+a^a,r|=~(c|a),a&=c,r&o&&i++,a&o&&i--,r=r<<1|1,a=a<<1|~(d|r),r&=d}for(l=n;l--;)fe[e.charCodeAt(l)]=0;return i},So=(e,t)=>{const n=e.length,s=t.length,o=[],a=[],r=Math.ceil(n/32),i=Math.ceil(s/32);let l=s;for(let u=0;u<r;u++)a[u]=-1,o[u]=0;let c=0;for(;c<i-1;c++){let u=0,f=-1;const S=c*32,w=Math.min(32,s)+S;for(let b=S;b<w;b++)fe[t.charCodeAt(b)]|=1<<b;l=s;for(let b=0;b<n;b++){const P=fe[e.charCodeAt(b)],T=a[b/32|0]>>>b&1,L=o[b/32|0]>>>b&1,z=P|u,y=((P|L)&f)+f^f|P|L;let g=u|~(y|f),C=f&y;g>>>31^T&&(a[b/32|0]^=1<<b),C>>>31^L&&(o[b/32|0]^=1<<b),g=g<<1|T,C=C<<1|L,f=C|~(z|g),u=g&z}for(let b=S;b<w;b++)fe[t.charCodeAt(b)]=0}let d=0,p=-1;const h=c*32,v=Math.min(32,s-h)+h;for(let u=h;u<v;u++)fe[t.charCodeAt(u)]|=1<<u;l=s;for(let u=0;u<n;u++){const f=fe[e.charCodeAt(u)],S=a[u/32|0]>>>u&1,w=o[u/32|0]>>>u&1,b=f|d,P=((f|w)&p)+p^p|f|w;let T=d|~(P|p),L=p&P;l+=T>>>s-1&1,l-=L>>>s-1&1,T>>>31^S&&(a[u/32|0]^=1<<u),L>>>31^w&&(o[u/32|0]^=1<<u),T=T<<1|S,L=L<<1|w,p=L|~(b|T),d=T&b}for(let u=h;u<v;u++)fe[t.charCodeAt(u)]=0;return l},Yt=(e,t)=>{if(e.length>t.length){const n=t;t=e,e=n}return e.length===0?t.length:e.length<=32?wo(e,t):So(e,t)},Co=(e,t)=>{let n=1/0,s=0;for(let o=0;o<t.length;o++){const a=Yt(e,t[o]);a<n&&(n=a,s=o)}return t[s]};var ko={closest:Co,distance:Yt};const Mo=(e,t,n)=>{const s=e.length<=t.length,o=e.length<=n;return s||o?Math.ceil(e.length/4):n},To=(e,t,n)=>{let s=0;const o=Object.keys(t).find(a=>{const r=Mo(e,a,n),i=ko.distance(e,a),l=i<=r;return l&&(s=i),l});return o?{levenshteinDistance:s,levenshteinDistanceEntry:o}:{}};var Io={a:["4","@"],b:["8"],c:["(","{","[","<"],e:["3"],g:["6","9"],i:["1","!","|"],l:["1","|","7"],o:["0"],s:["$","5"],t:["+","7"],x:["%"],z:["2"]},Ve={warnings:{straightRow:"straightRow",keyPattern:"keyPattern",simpleRepeat:"simpleRepeat",extendedRepeat:"extendedRepeat",sequences:"sequences",recentYears:"recentYears",dates:"dates",topTen:"topTen",topHundred:"topHundred",common:"common",similarToCommon:"similarToCommon",wordByItself:"wordByItself",namesByThemselves:"namesByThemselves",commonNames:"commonNames",userInputs:"userInputs",pwned:"pwned"},suggestions:{l33t:"l33t",reverseWords:"reverseWords",allUppercase:"allUppercase",capitalization:"capitalization",dates:"dates",recentYears:"recentYears",associatedYears:"associatedYears",sequences:"sequences",repeated:"repeated",longerKeyboardPattern:"longerKeyboardPattern",anotherWord:"anotherWord",useWords:"useWords",noNeed:"noNeed",pwned:"pwned"},timeEstimation:{ltSecond:"ltSecond",second:"second",seconds:"seconds",minute:"minute",minutes:"minutes",hour:"hour",hours:"hours",day:"day",days:"days",month:"month",months:"months",year:"year",years:"years",centuries:"centuries"}};class Po{constructor(){this.matchers={},this.l33tTable=Io,this.dictionary={userInputs:[]},this.rankedDictionaries={},this.translations=Ve,this.graphs={},this.availableGraphs=[],this.useLevenshteinDistance=!1,this.levenshteinThreshold=2,this.setRankedDictionaries()}setOptions(t={}){t.l33tTable&&(this.l33tTable=t.l33tTable),t.dictionary&&(this.dictionary=t.dictionary,this.setRankedDictionaries()),t.translations&&this.setTranslations(t.translations),t.graphs&&(this.graphs=t.graphs),t.useLevenshteinDistance!==void 0&&(this.useLevenshteinDistance=t.useLevenshteinDistance),t.levenshteinThreshold!==void 0&&(this.levenshteinThreshold=t.levenshteinThreshold)}setTranslations(t){if(this.checkCustomTranslations(t))this.translations=t;else throw new Error("Invalid translations object fallback to keys")}checkCustomTranslations(t){let n=!0;return Object.keys(Ve).forEach(s=>{if(s in t){const o=s;Object.keys(Ve[o]).forEach(a=>{a in t[o]||(n=!1)})}else n=!1}),n}setRankedDictionaries(){const t={};Object.keys(this.dictionary).forEach(n=>{t[n]=this.getRankedDictionary(n)}),this.rankedDictionaries=t}getRankedDictionary(t){const n=this.dictionary[t];if(t==="userInputs"){const s=[];return n.forEach(o=>{const a=typeof o;(a==="string"||a==="number"||a==="boolean")&&s.push(o.toString().toLowerCase())}),gt(s)}return gt(n)}extendUserInputsDictionary(t){this.dictionary.userInputs?this.dictionary.userInputs=[...this.dictionary.userInputs,...t]:this.dictionary.userInputs=t,this.rankedDictionaries.userInputs=this.getRankedDictionary("userInputs")}addMatcher(t,n){this.matchers[t]?console.info("Matcher already exists"):this.matchers[t]=n}}const _=new Po;class _o{constructor(t){this.defaultMatch=t}match({password:t}){const n=t.split("").reverse().join("");return this.defaultMatch({password:n}).map(s=>te(k({},s),{token:s.token.split("").reverse().join(""),reversed:!0,i:t.length-1-s.j,j:t.length-1-s.i}))}}class Fo{constructor(t){this.defaultMatch=t}match({password:t}){const n=[],s=this.enumerateL33tSubs(this.relevantL33tSubtable(t,_.l33tTable));for(let o=0;o<s.length;o+=1){const a=s[o];if(oo(a))break;const r=ao(t,a);this.defaultMatch({password:r}).forEach(l=>{const c=t.slice(l.i,+l.j+1||9e9);if(c.toLowerCase()!==l.matchedWord){const d={};Object.keys(a).forEach(h=>{const v=a[h];c.indexOf(h)!==-1&&(d[h]=v)});const p=Object.keys(d).map(h=>`${h} -> ${d[h]}`).join(", ");n.push(te(k({},l),{l33t:!0,token:c,sub:d,subDisplay:p}))}})}return n.filter(o=>o.token.length>1)}relevantL33tSubtable(t,n){const s={},o={};return t.split("").forEach(a=>{s[a]=!0}),Object.keys(n).forEach(a=>{const i=n[a].filter(l=>l in s);i.length>0&&(o[a]=i)}),o}enumerateL33tSubs(t){const n=Object.keys(t);return this.getSubs(n,[[]],t).map(o=>{const a={};return o.forEach(([r,i])=>{a[r]=i}),a})}getSubs(t,n,s){if(!t.length)return n;const o=t[0],a=t.slice(1),r=[];s[o].forEach(l=>{n.forEach(c=>{let d=-1;for(let p=0;p<c.length;p+=1)if(c[p][0]===l){d=p;break}if(d===-1){const p=c.concat([[l,o]]);r.push(p)}else{const p=c.slice(0);p.splice(d,1),p.push([l,o]),r.push(c),r.push(p)}})});const i=this.dedup(r);return a.length?this.getSubs(a,i,s):i}dedup(t){const n=[],s={};return t.forEach(o=>{const a=o.map((i,l)=>[i,l]);a.sort();const r=a.map(([i,l])=>`${i},${l}`).join("-");r in s||(s[r]=!0,n.push(o))}),n}}class Do{constructor(){this.l33t=new Fo(this.defaultMatch),this.reverse=new _o(this.defaultMatch)}match({password:t}){const n=[...this.defaultMatch({password:t}),...this.reverse.match({password:t}),...this.l33t.match({password:t})];return Te(n)}defaultMatch({password:t}){const n=[],s=t.length,o=t.toLowerCase();return Object.keys(_.rankedDictionaries).forEach(a=>{const r=_.rankedDictionaries[a];for(let i=0;i<s;i+=1)for(let l=i;l<s;l+=1){const c=o.slice(i,+l+1||9e9),d=c in r;let p={};const h=i===0&&l===s-1;_.useLevenshteinDistance&&h&&!d&&(p=To(c,r,_.levenshteinThreshold));const v=Object.keys(p).length!==0;if(d||v){const u=v?p.levenshteinDistanceEntry:c,f=r[u];n.push(k({pattern:"dictionary",i,j:l,token:t.slice(i,+l+1||9e9),matchedWord:c,rank:f,dictionaryName:a,reversed:!1,l33t:!1},p))}}}),n}}class Ro{match({password:t,regexes:n=vo}){const s=[];return Object.keys(n).forEach(o=>{const a=n[o];a.lastIndex=0;const r=a.exec(t);if(r){const i=r[0];s.push({pattern:"regex",token:i,i:r.index,j:r.index+r[0].length-1,regexName:o,regexMatch:r})}}),Te(s)}}var ye={nCk(e,t){let n=e;if(t>n)return 0;if(t===0)return 1;let s=1;for(let o=1;o<=t;o+=1)s*=n,s/=o,n-=1;return s},log10(e){return Math.log(e)/Math.log(10)},log2(e){return Math.log(e)/Math.log(2)},factorial(e){let t=1;for(let n=2;n<=e;n+=1)t*=n;return t}},Oo=({token:e})=>{let t=Fe(lo,e.length);t===Number.POSITIVE_INFINITY&&(t=Number.MAX_VALUE);let n;return e.length===1?n=xt+1:n=Gt+1,Math.max(t,n)},$o=({year:e,separator:t})=>{let s=Math.max(Math.abs(e-it),Vt)*365;return t&&(s*=4),s};const Lo=e=>{const t=e.split(""),n=t.filter(r=>r.match(mo)).length,s=t.filter(r=>r.match(go)).length;let o=0;const a=Math.min(n,s);for(let r=1;r<=a;r+=1)o+=ye.nCk(n+s,r);return o};var Eo=e=>{const t=e.replace(bo,"");if(t.match(ho)||t.toLowerCase()===t)return 1;const n=[zt,uo,Wt],s=n.length;for(let o=0;o<s;o+=1){const a=n[o];if(t.match(a))return 2}return Lo(t)};const Bo=({subs:e,subbed:t,token:n})=>{const s=e[t],o=n.toLowerCase().split(""),a=o.filter(i=>i===t).length,r=o.filter(i=>i===s).length;return{subbedCount:a,unsubbedCount:r}};var jo=({l33t:e,sub:t,token:n})=>{if(!e)return 1;let s=1;const o=t;return Object.keys(o).forEach(a=>{const{subbedCount:r,unsubbedCount:i}=Bo({subs:o,subbed:a,token:n});if(r===0||i===0)s*=2;else{const l=Math.min(i,r);let c=0;for(let d=1;d<=l;d+=1)c+=ye.nCk(i+r,d);s*=c}}),s},Uo=({rank:e,reversed:t,l33t:n,sub:s,token:o})=>{const a=e,r=Eo(o),i=jo({l33t:n,sub:s,token:o}),l=t&&2||1,c=a*r*i*l;return{baseGuesses:a,uppercaseVariations:r,l33tVariations:i,calculation:c}},No=({regexName:e,regexMatch:t,token:n})=>{const s={alphaLower:26,alphaUpper:26,alpha:52,alphanumeric:62,digits:10,symbols:33};if(e in s)return Fe(s[e],n.length);switch(e){case"recentYear":return Math.max(Math.abs(parseInt(t[0],10)-it),Vt)}return 0},xo=({baseGuesses:e,repeatCount:t})=>e*t,Go=({token:e,ascending:t})=>{const n=e.charAt(0);let s=0;return["a","A","z","Z","0","1","9"].includes(n)?s=4:n.match(/\d/)?s=10:s=26,t||(s*=2),s*e.length};const Vo=e=>{let t=0;return Object.keys(e).forEach(n=>{t+=e[n].filter(o=>!!o).length}),t/=Object.entries(e).length,t},zo=({token:e,graph:t,turns:n})=>{const s=Object.keys(_.graphs[t]).length,o=Vo(_.graphs[t]);let a=0;const r=e.length;for(let i=2;i<=r;i+=1){const l=Math.min(n,i-1);for(let c=1;c<=l;c+=1)a+=ye.nCk(i-1,c-1)*s*Fe(o,c)}return a};var Wo=({graph:e,token:t,shiftedCount:n,turns:s})=>{let o=zo({token:t,graph:e,turns:s});if(n){const a=t.length-n;if(n===0||a===0)o*=2;else{let r=0;for(let i=1;i<=Math.min(n,a);i+=1)r+=ye.nCk(n+a,i);o*=r}}return Math.round(o)};const Yo=(e,t)=>{let n=1;return e.token.length<t.length&&(e.token.length===1?n=xt:n=Gt),n},vt={bruteforce:Oo,date:$o,dictionary:Uo,regex:No,repeat:xo,sequence:Go,spatial:Wo},qo=(e,t)=>vt[e]?vt[e](t):_.matchers[e]&&"scoring"in _.matchers[e]?_.matchers[e].scoring(t):0;var Ho=(e,t)=>{const n={};if("guesses"in e&&e.guesses!=null)return e;const s=Yo(e,t),o=qo(e.pattern,e);let a=0;typeof o=="number"?a=o:e.pattern==="dictionary"&&(a=o.calculation,n.baseGuesses=o.baseGuesses,n.uppercaseVariations=o.uppercaseVariations,n.l33tVariations=o.l33tVariations);const r=Math.max(a,s);return te(k(k({},e),n),{guesses:r,guessesLog10:ye.log10(r)})};const ae={password:"",optimal:{},excludeAdditive:!1,fillArray(e,t){const n=[];for(let s=0;s<e;s+=1){let o=[];t==="object"&&(o={}),n.push(o)}return n},makeBruteforceMatch(e,t){return{pattern:"bruteforce",token:this.password.slice(e,+t+1||9e9),i:e,j:t}},update(e,t){const n=e.j,s=Ho(e,this.password);let o=s.guesses;t>1&&(o*=this.optimal.pi[s.i-1][t-1]);let a=ye.factorial(t)*o;this.excludeAdditive||(a+=Fe(co,t-1));let r=!1;Object.keys(this.optimal.g[n]).forEach(i=>{const l=this.optimal.g[n][i];parseInt(i,10)<=t&&l<=a&&(r=!0)}),r||(this.optimal.g[n][t]=a,this.optimal.m[n][t]=s,this.optimal.pi[n][t]=o)},bruteforceUpdate(e){let t=this.makeBruteforceMatch(0,e);this.update(t,1);for(let n=1;n<=e;n+=1){t=this.makeBruteforceMatch(n,e);const s=this.optimal.m[n-1];Object.keys(s).forEach(o=>{s[o].pattern!=="bruteforce"&&this.update(t,parseInt(o,10)+1)})}},unwind(e){const t=[];let n=e-1,s=0,o=1/0;const a=this.optimal.g[n];for(a&&Object.keys(a).forEach(r=>{const i=a[r];i<o&&(s=parseInt(r,10),o=i)});n>=0;){const r=this.optimal.m[n][s];t.unshift(r),n=r.i-1,s-=1}return t}};var Je={mostGuessableMatchSequence(e,t,n=!1){ae.password=e,ae.excludeAdditive=n;const s=e.length;let o=ae.fillArray(s,"array");t.forEach(l=>{o[l.j].push(l)}),o=o.map(l=>l.sort((c,d)=>c.i-d.i)),ae.optimal={m:ae.fillArray(s,"object"),pi:ae.fillArray(s,"object"),g:ae.fillArray(s,"object")};for(let l=0;l<s;l+=1)o[l].forEach(c=>{c.i>0?Object.keys(ae.optimal.m[c.i-1]).forEach(d=>{ae.update(c,parseInt(d,10)+1)}):ae.update(c,1)}),ae.bruteforceUpdate(l);const a=ae.unwind(s),r=a.length,i=this.getGuesses(e,r);return{password:e,guesses:i,guessesLog10:ye.log10(i),sequence:a}},getGuesses(e,t){const n=e.length;let s=0;return e.length===0?s=1:s=ae.optimal.g[n-1][t],s}};class Ko{match({password:t,omniMatch:n}){const s=[];let o=0;for(;o<t.length;){const r=this.getGreedyMatch(t,o),i=this.getLazyMatch(t,o);if(r==null)break;const{match:l,baseToken:c}=this.setMatchToken(r,i);if(l){const d=l.index+l[0].length-1,p=this.getBaseGuesses(c,n);s.push(this.normalizeMatch(c,d,l,p)),o=d+1}}return s.some(r=>r instanceof Promise)?Promise.all(s):s}normalizeMatch(t,n,s,o){const a={pattern:"repeat",i:s.index,j:n,token:s[0],baseToken:t,baseGuesses:0,repeatCount:s[0].length/t.length};return o instanceof Promise?o.then(r=>te(k({},a),{baseGuesses:r})):te(k({},a),{baseGuesses:o})}getGreedyMatch(t,n){const s=/(.+)\1+/g;return s.lastIndex=n,s.exec(t)}getLazyMatch(t,n){const s=/(.+?)\1+/g;return s.lastIndex=n,s.exec(t)}setMatchToken(t,n){const s=/^(.+?)\1+$/;let o,a="";if(n&&t[0].length>n[0].length){o=t;const r=s.exec(o[0]);r&&(a=r[1])}else o=n,o&&(a=o[1]);return{match:o,baseToken:a}}getBaseGuesses(t,n){const s=n.match(t);return s instanceof Promise?s.then(a=>Je.mostGuessableMatchSequence(t,a).guesses):Je.mostGuessableMatchSequence(t,s).guesses}}class Xo{constructor(){this.MAX_DELTA=5}match({password:t}){const n=[];if(t.length===1)return[];let s=0,o=null;const a=t.length;for(let r=1;r<a;r+=1){const i=t.charCodeAt(r)-t.charCodeAt(r-1);if(o==null&&(o=i),i!==o){const l=r-1;this.update({i:s,j:l,delta:o,password:t,result:n}),s=l,o=i}}return this.update({i:s,j:a-1,delta:o,password:t,result:n}),n}update({i:t,j:n,delta:s,password:o,result:a}){if(n-t>1||Math.abs(s)===1){const r=Math.abs(s);if(r>0&&r<=this.MAX_DELTA){const i=o.slice(t,+n+1||9e9),{sequenceName:l,sequenceSpace:c}=this.getSequence(i);return a.push({pattern:"sequence",i:t,j:n,token:o.slice(t,+n+1||9e9),sequenceName:l,sequenceSpace:c,ascending:s>0})}}return null}getSequence(t){let n="unicode",s=26;return po.test(t)?(n="lower",s=26):fo.test(t)?(n="upper",s=26):yo.test(t)&&(n="digits",s=10),{sequenceName:n,sequenceSpace:s}}}class Zo{constructor(){this.SHIFTED_RX=/[~!@#$%^&*()_+QWERTYUIOP{}|ASDFGHJKL:"ZXCVBNM<>?]/}match({password:t}){const n=[];return Object.keys(_.graphs).forEach(s=>{const o=_.graphs[s];Ze(n,this.helper(t,o,s))}),Te(n)}checkIfShifted(t,n,s){return!t.includes("keypad")&&this.SHIFTED_RX.test(n.charAt(s))?1:0}helper(t,n,s){let o;const a=[];let r=0;const i=t.length;for(;r<i-1;){let l=r+1,c=0,d=0;for(o=this.checkIfShifted(s,t,r);;){const p=t.charAt(l-1),h=n[p]||[];let v=!1,u=-1,f=-1;if(l<i){const S=t.charAt(l),w=h.length;for(let b=0;b<w;b+=1){const P=h[b];if(f+=1,P){const T=P.indexOf(S);if(T!==-1){v=!0,u=f,T===1&&(o+=1),c!==u&&(d+=1,c=u);break}}}}if(v)l+=1;else{l-r>2&&a.push({pattern:"spatial",i:r,j:l-1,token:t.slice(r,l),graph:s,turns:d,shiftedCount:o}),r=l;break}}}return a}}class Jo{constructor(){this.matchers={date:Ao,dictionary:Do,regex:Ro,repeat:Ko,sequence:Xo,spatial:Zo}}match(t){const n=[],s=[];return[...Object.keys(this.matchers),...Object.keys(_.matchers)].forEach(a=>{if(!this.matchers[a]&&!_.matchers[a])return;const r=this.matchers[a]?this.matchers[a]:_.matchers[a].Matching,l=new r().match({password:t,omniMatch:this});l instanceof Promise?(l.then(c=>{Ze(n,c)}),s.push(l)):Ze(n,l)}),s.length>0?new Promise(a=>{Promise.all(s).then(()=>{a(Te(n))})}):Te(n)}}const qt=1,Ht=qt*60,Kt=Ht*60,Xt=Kt*24,Zt=Xt*31,Jt=Zt*12,Qo=Jt*100,ze={second:qt,minute:Ht,hour:Kt,day:Xt,month:Zt,year:Jt,century:Qo};class ea{translate(t,n){let s=t;n!==void 0&&n!==1&&(s+="s");const{timeEstimation:o}=_.translations;return o[s].replace("{base}",`${n}`)}estimateAttackTimes(t){const n={onlineThrottling100PerHour:t/.027777777777777776,onlineNoThrottling10PerSecond:t/10,offlineSlowHashing1e4PerSecond:t/1e4,offlineFastHashing1e10PerSecond:t/1e10},s={onlineThrottling100PerHour:"",onlineNoThrottling10PerSecond:"",offlineSlowHashing1e4PerSecond:"",offlineFastHashing1e10PerSecond:""};return Object.keys(n).forEach(o=>{const a=n[o];s[o]=this.displayTime(a)}),{crackTimesSeconds:n,crackTimesDisplay:s,score:this.guessesToScore(t)}}guessesToScore(t){return t<1e3+5?0:t<1e6+5?1:t<1e8+5?2:t<1e10+5?3:4}displayTime(t){let n="centuries",s;const o=Object.keys(ze),a=o.findIndex(r=>t<ze[r]);return a>-1&&(n=o[a-1],a!==0?s=Math.round(t/ze[n]):n="ltSecond"),this.translate(n,s)}}var ta=()=>null,na=()=>({warning:_.translations.warnings.dates,suggestions:[_.translations.suggestions.dates]});const sa=(e,t)=>{let n="";return t&&!e.l33t&&!e.reversed?e.rank<=10?n=_.translations.warnings.topTen:e.rank<=100?n=_.translations.warnings.topHundred:n=_.translations.warnings.common:e.guessesLog10<=4&&(n=_.translations.warnings.similarToCommon),n},oa=(e,t)=>{let n="";return t&&(n=_.translations.warnings.wordByItself),n},aa=(e,t)=>t?_.translations.warnings.namesByThemselves:_.translations.warnings.commonNames,ra=(e,t)=>{let n="";const s=e.dictionaryName,o=s==="lastnames"||s.toLowerCase().includes("firstnames");return s==="passwords"?n=sa(e,t):s.includes("wikipedia")?n=oa(e,t):o?n=aa(e,t):s==="userInputs"&&(n=_.translations.warnings.userInputs),n};var ia=(e,t)=>{const n=ra(e,t),s=[],o=e.token;return o.match(zt)?s.push(_.translations.suggestions.capitalization):o.match(Wt)&&o.toLowerCase()!==o&&s.push(_.translations.suggestions.allUppercase),e.reversed&&e.token.length>=4&&s.push(_.translations.suggestions.reverseWords),e.l33t&&s.push(_.translations.suggestions.l33t),{warning:n,suggestions:s}},la=e=>e.regexName==="recentYear"?{warning:_.translations.warnings.recentYears,suggestions:[_.translations.suggestions.recentYears,_.translations.suggestions.associatedYears]}:{warning:"",suggestions:[]},ca=e=>{let t=_.translations.warnings.extendedRepeat;return e.baseToken.length===1&&(t=_.translations.warnings.simpleRepeat),{warning:t,suggestions:[_.translations.suggestions.repeated]}},ua=()=>({warning:_.translations.warnings.sequences,suggestions:[_.translations.suggestions.sequences]}),da=e=>{let t=_.translations.warnings.keyPattern;return e.turns===1&&(t=_.translations.warnings.straightRow),{warning:t,suggestions:[_.translations.suggestions.longerKeyboardPattern]}};const At={warning:"",suggestions:[]};class fa{constructor(){this.matchers={bruteforce:ta,date:na,dictionary:ia,regex:la,repeat:ca,sequence:ua,spatial:da},this.defaultFeedback={warning:"",suggestions:[]},this.setDefaultSuggestions()}setDefaultSuggestions(){this.defaultFeedback.suggestions.push(_.translations.suggestions.useWords,_.translations.suggestions.noNeed)}getFeedback(t,n){if(n.length===0)return this.defaultFeedback;if(t>2)return At;const s=_.translations.suggestions.anotherWord,o=this.getLongestMatch(n);let a=this.getMatchFeedback(o,n.length===1);return a!=null?(a.suggestions.unshift(s),a.warning==null&&(a.warning="")):a={warning:"",suggestions:[s]},a}getLongestMatch(t){let n=t[0];return t.slice(1).forEach(o=>{o.token.length>n.token.length&&(n=o)}),n}getMatchFeedback(t,n){return this.matchers[t.pattern]?this.matchers[t.pattern](t,n):_.matchers[t.pattern]&&"feedback"in _.matchers[t.pattern]?_.matchers[t.pattern].feedback(t,n):At}}const Qt=()=>new Date().getTime(),pa=(e,t,n)=>{const s=new fa,o=new ea,a=Je.mostGuessableMatchSequence(t,e),r=Qt()-n,i=o.estimateAttackTimes(a.guesses);return te(k(k({calcTime:r},a),i),{feedback:s.getFeedback(i.score,a.sequence)})},ha=(e,t)=>(t&&_.extendUserInputsDictionary(t),new Jo().match(e)),ma=(e,t)=>{const n=Qt(),s=ha(e,t);if(s instanceof Promise)throw new Error("You are using a Promised matcher, please use `zxcvbnAsync` for it.");return pa(s,e,n)};const ga=J({name:"StrengthMeter",components:{InputPassword:Ie.Password},props:{value:I.string,showInput:I.bool.def(!0),disabled:I.bool},emits:["score-change","change"],setup(e,{emit:t}){const n=N(""),{prefixCls:s}=nt("strength-meter"),o=U(()=>{const{disabled:r}=e;if(r)return-1;const l=m(n)?ma(m(n)).score:-1;return t("score-change",l),l});function a(r){n.value=r.target.value}return De(()=>{n.value=e.value||""}),H(()=>m(n),r=>{t("change",r)}),{getPasswordStrength:o,handleChange:a,prefixCls:s,innerValueRef:n}}}),ba=["data-score"];function ya(e,t,n,s,o,a){const r=D("InputPassword");return R(),se("div",{class:Se([e.prefixCls,"relative"])},[e.showInput?(R(),x(r,q({key:0},e.$attrs,{allowClear:"",value:e.innerValueRef,onChange:e.handleChange,disabled:e.disabled}),be({_:2},[de(Object.keys(e.$slots),i=>({name:i,fn:O(l=>[re(e.$slots,i,le(he(l||{})),void 0,!0)])}))]),1040,["value","onChange","disabled"])):X("",!0),ke("div",{class:Se(`${e.prefixCls}-bar`)},[ke("div",{class:Se(`${e.prefixCls}-bar--fill`),"data-score":e.getPasswordStrength},null,10,ba)],2)],2)}var va=oe(ga,[["render",ya],["__scopeId","data-v-367aeb21"]]);const Aa=It(va),B=new Map;B.set("Input",Ie);B.set("InputGroup",Ie.Group);B.set("InputPassword",Ie.Password);B.set("InputSearch",Ie.Search);B.set("InputTextArea",Ie.TextArea);B.set("InputNumber",Pn);B.set("AutoComplete",_n);B.set("Select",St);B.set("ApiSelect",fs);B.set("ApiTree",ms);B.set("TreeSelect",Ct);B.set("ApiTreeSelect",ys);B.set("ApiRadioGroup",rs);B.set("Switch",Fn);B.set("RadioButtonGroup",cs);B.set("RadioGroup",Ae.Group);B.set("Checkbox",Pt);B.set("CheckboxGroup",Pt.Group);B.set("ApiCascader",ws);B.set("Cascader",qe);B.set("Slider",Dn);B.set("Rate",Rn);B.set("DatePicker",Be);B.set("MonthPicker",Be.MonthPicker);B.set("RangePicker",Be.RangePicker);B.set("WeekPicker",Be.WeekPicker);B.set("TimePicker",On);B.set("StrengthMeter",Aa);B.set("IconPicker",$n);B.set("InputCountDown",Hn);B.set("Upload",so);B.set("Divider",tt);const{t:We}=ce();function wt(e){return e.includes("Input")||e.includes("Complete")?We("common.inputText"):e.includes("Picker")||e.includes("Select")||e.includes("Cascader")||e.includes("Checkbox")||e.includes("Radio")||e.includes("Switch")?We("common.chooseText"):""}const wa=["DatePicker","MonthPicker","WeekPicker","TimePicker"];function Sa(){return[...wa,"RangePicker"]}function Ca(e,t,n){["DatePicker","MonthPicker","WeekPicker","TimePicker"].includes(t)?e.type=n?"string":"object":["RangePicker","Upload","CheckboxGroup","TimePicker"].includes(t)?e.type="array":["InputNumber"].includes(t)&&(e.type="number")}function ka(e,t){return e&&["Input","InputPassword","InputSearch","InputTextArea"].includes(e)&&t&&st(t)?`${t}`:t}const en=Sa(),Ma=["Input","InputPassword","InputSearch","InputTextArea"];function Ta(e,t){return U(()=>{const n=m(e),{labelCol:s={},wrapperCol:o={}}=n.itemProps||{},{labelWidth:a,disabledLabelWidth:r}=n,{labelWidth:i,labelCol:l,wrapperCol:c,layout:d}=m(t);if(!i&&!a&&!l||r)return s.style={textAlign:"left"},{labelCol:s,wrapperCol:o};let p=a||i;const h=k(k({},l),s),v=k(k({},c),o);return p&&(p=st(p)?`${p}px`:p),{labelCol:k({style:{width:p}},h),wrapperCol:k({style:{width:d==="vertical"?"100%":`calc(100% - ${p})`}},v)}})}function Ye(e){return typeof e=="function"||Object.prototype.toString.call(e)==="[object Object]"&&!Bn(e)}var Ia=J({name:"BasicFormItem",inheritAttrs:!1,props:{schema:{type:Object,default:()=>({})},formProps:{type:Object,default:()=>({})},allDefaultValues:{type:Object,default:()=>({})},formModel:{type:Object,default:()=>({})},setFormModel:{type:Function,default:null},tableAction:{type:Object},formActionType:{type:Object}},setup(e,{slots:t}){const{t:n}=ce(),{schema:s,formProps:o}=Tt(e),a=Ta(s,o),r=U(()=>{const{allDefaultValues:u,formModel:f,schema:S}=e,{mergeDynamicData:w}=e.formProps;return{field:S.field,model:f,values:k(k(k({},w),u),f),schema:S}}),i=U(()=>{var P;const{schema:u,tableAction:f,formModel:S,formActionType:w}=e;let{componentProps:b={}}=u;return Y(b)&&(b=(P=b({schema:u,tableAction:f,formModel:S,formActionType:w}))!=null?P:{}),u.component==="Divider"&&(b=Object.assign({type:"horizontal"},b,{orientation:"left",plain:!0})),b}),l=U(()=>{const{disabled:u}=e.formProps,{dynamicDisabled:f}=e.schema,{disabled:S=!1}=m(i);let w=!!u||S;return ve(f)&&(w=f),Y(f)&&(w=f(m(r))),w});function c(){const{show:u,ifShow:f}=e.schema,{showAdvancedButton:S}=e.formProps,w=S&&ve(e.schema.isAdvanced)?e.schema.isAdvanced:!0;let b=!0,P=!0;return ve(u)&&(b=u),ve(f)&&(P=f),Y(u)&&(b=u(m(r))),Y(f)&&(P=f(m(r))),b=b&&w,{isShow:b,isIfShow:P}}function d(){var E;const{rules:u=[],component:f,rulesMessageJoinLabel:S,label:w,dynamicRules:b,required:P}=e.schema;if(Y(b))return b(m(r));let T=Ke(u);const{rulesMessageJoinLabel:L}=e.formProps,z=Reflect.has(e.schema,"rulesMessageJoinLabel")?S:L,y=wt(f)+`${z?w:""}`;function g($,j){const W=$.message||y;return j===void 0||Un(j)||Array.isArray(j)&&j.length===0||typeof j=="string"&&j.trim()===""||typeof j=="object"&&Reflect.has(j,"checked")&&Reflect.has(j,"halfChecked")&&Array.isArray(j.checked)&&Array.isArray(j.halfChecked)&&j.checked.length===0&&j.halfChecked.length===0?Promise.reject(W):Promise.resolve()}const C=Y(P)?P(m(r)):P;C&&(!T||T.length===0?T=[{required:C,validator:g}]:T.findIndex(j=>Reflect.has(j,"required"))===-1&&T.push({required:C,validator:g}));const A=T.findIndex($=>Reflect.has($,"required")&&!Reflect.has($,"validator"));if(A!==-1){const $=T[A],{isShow:j}=c();if(j||($.required=!1),f){Reflect.has($,"type")||($.type=f==="InputNumber"?"number":"string"),$.message=$.message||y,(f.includes("Input")||f.includes("Textarea"))&&($.whitespace=!0);const W=(E=m(i))==null?void 0:E.valueFormat;Ca($,f,W)}}const F=T.findIndex($=>$.max);return F!==-1&&!T[F].validator&&(T[F].message=T[F].message||n("component.form.maxTip",[T[F].max])),T}function p(){var j;const{renderComponentContent:u,component:f,field:S,changeEvent:w="change",valueField:b}=e.schema,P=f&&["Switch","Checkbox"].includes(f),T=`on${ss(w)}`,L={[T]:(...W)=>{const[Pe]=W;C[T]&&C[T](...W);const _e=Pe?Pe.target:null,Ue=_e?P?_e.checked:_e.value:Pe;e.setFormModel(S,Ue)}},z=B.get(f),{autoSetPlaceHolder:y,size:g}=e.formProps,C=te(k({allowClear:!0,getPopupContainer:W=>W.parentNode,size:g},m(i)),{disabled:m(l)});!C.disabled&&y&&f!=="RangePicker"&&f&&(C.placeholder=((j=m(i))==null?void 0:j.placeholder)||wt(f)),C.codeField=S,C.formValues=m(r);const F={[b||(P?"checked":"value")]:e.formModel[S]},E=k(k(k({},C),L),F);if(!u)return M(z,E,null);const $=Y(u)?k({},u(m(r))):{default:()=>u};return M(z,E,Ye($)?$:{default:()=>[$]})}function h(){const{label:u,helpMessage:f,helpComponentProps:S,subLabel:w}=e.schema,b=w?M("span",null,[u,K(" "),M("span",{class:"text-secondary"},[w])]):u,P=Y(f)?f(m(r)):f;return!P||Array.isArray(P)&&P.length===0?b:M("span",null,[b,M(jn,q({placement:"top",class:"mx-1",text:P},S),null)])}function v(){const{itemProps:u,slot:f,render:S,field:w,suffix:b,component:P}=e.schema,{labelCol:T,wrapperCol:L}=m(a),{colon:z}=e.formProps;if(P==="Divider"){let y;return M(Oe,{span:24},{default:()=>[M(tt,m(i),Ye(y=h())?y:{default:()=>[y]})]})}else{const y=()=>f?ft(t,f,m(r)):S?S(m(r)):p(),g=!!b,C=Y(b)?b(m(r)):b;return M(ot.Item,q({name:w,colon:z,class:{"suffix-item":g}},u,{label:h(),rules:d(),labelCol:T,wrapperCol:L}),{default:()=>[M("div",{style:"display:flex"},[M("div",{style:"flex:1;"},[y()]),g&&M("span",{class:"suffix"},[C])])]})}}return()=>{let u;const{colProps:f={},colSlot:S,renderColContent:w,component:b}=e.schema;if(!B.has(b))return null;const{baseColProps:P={}}=e.formProps,T=k(k({},P),f),{isIfShow:L,isShow:z}=c(),y=m(r);return L&&Ln(M(Oe,T,Ye(u=(()=>S?ft(t,S,y):w?w(y):v())())?u:{default:()=>[u]}),[[En,z]])}}});const tn=Symbol();function Pa(e){return xn(e,tn)}function _a(){return Nn(tn)}const Fa=J({name:"BasicFormAction",components:{FormItem:ot.Item,Button:Gn,BasicArrow:Vn,[Oe.name]:Oe},props:{showActionButtonGroup:I.bool.def(!0),showResetButton:I.bool.def(!0),showSubmitButton:I.bool.def(!0),showAdvancedButton:I.bool.def(!0),resetButtonOptions:{type:Object,default:()=>({})},submitButtonOptions:{type:Object,default:()=>({})},actionColOptions:{type:Object,default:()=>({})},actionSpan:I.number.def(6),isAdvanced:I.bool,hideAdvanceBtn:I.bool},emits:["toggle-advanced"],setup(e,{emit:t}){const{t:n}=ce(),s=U(()=>{const{showAdvancedButton:i,actionSpan:l,actionColOptions:c}=e,d=24-l,p=i?{span:d<6?24:d}:{};return k(k({style:{textAlign:"right"},span:i?6:4},p),c)}),o=U(()=>Object.assign({text:n("common.resetText")},e.resetButtonOptions)),a=U(()=>Object.assign({text:n("common.queryText")},e.submitButtonOptions));function r(){t("toggle-advanced")}return k({t:n,actionColOpt:s,getResetBtnOptions:o,getSubmitBtnOptions:a,toggleAdvanced:r},_a())}});function Da(e,t,n,s,o,a){const r=D("Button"),i=D("BasicArrow"),l=D("FormItem"),c=D("a-col");return e.showActionButtonGroup?(R(),x(c,le(q({key:0},e.actionColOpt)),{default:O(()=>[ke("div",{style:zn([{width:"100%"},{textAlign:e.actionColOpt.style.textAlign}])},[M(l,null,{default:O(()=>[re(e.$slots,"resetBefore"),e.showResetButton?(R(),x(r,q({key:0,type:"default",class:"mr-2"},e.getResetBtnOptions,{onClick:e.resetAction}),{default:O(()=>[K(Z(e.getResetBtnOptions.text),1)]),_:1},16,["onClick"])):X("",!0),re(e.$slots,"submitBefore"),e.showSubmitButton?(R(),x(r,q({key:1,type:"primary",class:"mr-2"},e.getSubmitBtnOptions,{onClick:e.submitAction}),{default:O(()=>[K(Z(e.getSubmitBtnOptions.text),1)]),_:1},16,["onClick"])):X("",!0),re(e.$slots,"advanceBefore"),e.showAdvancedButton&&!e.hideAdvanceBtn?(R(),x(r,{key:2,type:"link",size:"small",onClick:e.toggleAdvanced},{default:O(()=>[K(Z(e.isAdvanced?e.t("component.form.putAway"):e.t("component.form.unfold"))+" ",1),M(i,{class:"ml-1",expand:!e.isAdvanced,up:""},null,8,["expand"])]),_:1},8,["onClick"])):X("",!0),re(e.$slots,"advanceAfter")]),_:3})],4)]),_:3},16)):X("",!0)}var Ra=oe(Fa,[["render",Da]]);function Oa(e,t,n){const s=/^\[(.+)\]$/;if(s.test(e)){const o=e.match(s);if(o&&o[1]){const a=o[1].split(",");return t=Array.isArray(t)?t:[t],a.forEach((r,i)=>{at(n,r.trim(),t[i])}),!0}}}function $a(e,t,n){const s=/^\{(.+)\}$/;if(s.test(e)){const o=e.match(s);if(o&&o[1]){const a=o[1].split(",");return t=ge(t)?t:{},a.forEach(r=>{at(n,r.trim(),t[r.trim()])}),!0}}}function La({defaultValueRef:e,getSchema:t,formModel:n,getProps:s}){function o(i){var c,d;if(!ge(i))return{};const l={};for(const p of Object.entries(i)){let[,h]=p;const[v]=p;if(!v||pe(h)&&h.length===0||Y(h))continue;const u=m(s).transformDateFunc;ge(h)&&(h=u==null?void 0:u(h)),pe(h)&&((c=h[0])==null?void 0:c.format)&&((d=h[1])==null?void 0:d.format)&&(h=h.map(f=>u==null?void 0:u(f))),we(h)&&(h=h.trim()),!Oa(v,h,l)&&!$a(v,h,l)&&at(l,v,h)}return a(l)}function a(i){const l=m(s).fieldMapToTime;if(!l||!Array.isArray(l))return i;for(const[c,[d,p],h="YYYY-MM-DD"]of l){if(!c||!d||!p||!i[c])continue;const[v,u]=i[c];i[d]=Me(v).format(h),i[p]=Me(u).format(h),Reflect.deleteProperty(i,c)}return i}function r(){const i=m(t),l={};i.forEach(c=>{const{defaultValue:d}=c;_t(d)||(l[c.field]=d,n[c.field]=d)}),e.value=l}return{handleFormValues:o,initDefault:r}}const me=24;function Ea({advanceState:e,emit:t,getProps:n,getSchema:s,formModel:o,defaultValueRef:a}){const{realWidthRef:r,screenEnum:i,screenRef:l}=Wn(),c=U(()=>{if(!e.isAdvanced)return 0;const u=m(n).emptySpan||0;if(st(u))return u;if(ge(u)){const{span:f=0}=u,S=m(l);return u[S.toLowerCase()]||f||0}return 0}),d=Ft(h,30);H([()=>m(s),()=>e.isAdvanced,()=>m(r)],()=>{const{showAdvancedButton:u}=m(n);u&&d()},{immediate:!0});function p(u,f=0,S=!1){const w=m(r),b=parseInt(u.md)||parseInt(u.xs)||parseInt(u.sm)||u.span||me,P=parseInt(u.lg)||b,T=parseInt(u.xl)||P,L=parseInt(u.xxl)||T;return w<=i.LG?f+=b:w<i.XL?f+=P:w<i.XXL?f+=T:f+=L,S?(e.hideAdvanceBtn=!1,f<=me*2?(e.hideAdvanceBtn=!0,e.isAdvanced=!0):f>me*2&&f<=me*(m(n).autoAdvancedLine||3)?e.hideAdvanceBtn=!1:e.isLoad||(e.isLoad=!0,e.isAdvanced=!e.isAdvanced),{isAdvanced:e.isAdvanced,itemColSum:f}):f>me*(m(n).alwaysShowLines||1)?{isAdvanced:e.isAdvanced,itemColSum:f}:{isAdvanced:!0,itemColSum:f}}function h(){let u=0,f=0;const{baseColProps:S={}}=m(n);for(const w of m(s)){const{show:b,colProps:P}=w;let T=!0;if(ve(b)&&(T=b),Y(b)&&(T=b({schema:w,model:o,field:w.field,values:k(k({},m(a)),o)})),T&&(P||S)){const{itemColSum:L,isAdvanced:z}=p(k(k({},S),P),u);u=L||0,z&&(f=u),w.isAdvanced=z}}e.actionSpan=f%me+m(c),p(m(n).actionColOptions||{span:me},u,!0),t("advanced-change")}function v(){e.isAdvanced=!e.isAdvanced}return{handleToggleAdvanced:v}}function Ba({emit:e,getProps:t,formModel:n,getSchema:s,defaultValueRef:o,formElRef:a,schemaRef:r,handleFormValues:i}){function l(){return V(this,null,function*(){const{resetFunc:y,submitOnReset:g}=m(t);y&&Y(y)&&(yield y()),m(a)&&(Object.keys(n).forEach(A=>{const F=m(s).find($=>$.field===A),E=(F==null?void 0:F.component)&&Ma.includes(F.component);n[A]=E?o.value[A]||"":o.value[A]}),Ee(()=>T()),e("reset",Re(n)),g&&z())})}function c(y){return V(this,null,function*(){const g=m(s).map(A=>A.field).filter(Boolean),C=[];Object.keys(y).forEach(A=>{const F=m(s).find(j=>j.field===A);let E=y[A];const $=Reflect.has(y,A);if(E=ka(F==null?void 0:F.component,E),$&&g.includes(A)){if(w(A))if(Array.isArray(E)){const j=[];for(const W of E)j.push(W?Me(W):null);n[A]=j}else{const{componentProps:j}=F||{};let W=j;typeof j=="function"&&(W=W({formModel:n})),n[A]=E?W!=null&&W.valueFormat?E:Me(E):null}else n[A]=E;C.push(A)}}),b(C).catch(A=>{})})}function d(y){return V(this,null,function*(){const g=Ke(m(s));if(!y)return;let C=we(y)?[y]:y;we(y)&&(C=[y]);for(const A of C)p(A,g);r.value=g})}function p(y,g){if(we(y)){const C=g.findIndex(A=>A.field===y);C!==-1&&(delete n[y],g.splice(C,1))}}function h(y,g,C=!1){return V(this,null,function*(){const A=Ke(m(s)),F=A.findIndex(E=>E.field===g);if(!g||F===-1||C){C?A.unshift(y):A.push(y),r.value=A,f(y);return}F!==-1&&A.splice(F+1,0,y),f(y),r.value=A})}function v(y){return V(this,null,function*(){let g=[];if(ge(y)&&g.push(y),pe(y)&&(g=[...y]),!g.every(A=>A.component==="Divider"||Reflect.has(A,"field")&&A.field)){pt("All children of the form Schema array that need to be updated must contain the `field` field");return}r.value=g})}function u(y){return V(this,null,function*(){let g=[];if(ge(y)&&g.push(y),pe(y)&&(g=[...y]),!g.every(F=>F.component==="Divider"||Reflect.has(F,"field")&&F.field)){pt("All children of the form Schema array that need to be updated must contain the `field` field");return}const A=[];g.forEach(F=>{m(s).forEach(E=>{if(E.field===F.field){const $=Dt(E,F);A.push($)}else A.push(E)})}),f(A),r.value=Xn(A,"field")})}function f(y){let g=[];ge(y)&&g.push(y),pe(y)&&(g=[...y]);const C={};g.forEach(A=>{A.component!="Divider"&&Reflect.has(A,"field")&&A.field&&!_t(A.defaultValue)&&(C[A.field]=A.defaultValue)}),c(C)}function S(){return m(a)?i(Re(m(n))):{}}function w(y){return m(s).some(g=>g.field===y?en.includes(g.component):!1)}function b(y){return V(this,null,function*(){var g;return(g=m(a))==null?void 0:g.validateFields(y)})}function P(y){return V(this,null,function*(){var g;return yield(g=m(a))==null?void 0:g.validate(y)})}function T(y){return V(this,null,function*(){var g;yield(g=m(a))==null?void 0:g.clearValidate(y)})}function L(y,g){return V(this,null,function*(){var C;yield(C=m(a))==null?void 0:C.scrollToField(y,g)})}function z(y){return V(this,null,function*(){y&&y.preventDefault();const{submitFunc:g}=m(t);if(g&&Y(g)){yield g();return}if(!!m(a))try{const A=yield P(),F=i(A);e("submit",F)}catch(A){throw new Error(A)}})}return{handleSubmit:z,clearValidate:T,validate:P,validateFields:b,getFieldsValue:S,updateSchema:u,resetSchema:v,appendSchemaByField:h,removeSchemaByFiled:d,resetFields:l,setFieldsValue:c,scrollToField:L}}function ja(o){return V(this,arguments,function*({getSchema:e,getProps:t,formElRef:n,isInitedDefault:s}){De(()=>V(this,null,function*(){if(m(s)||!m(t).autoFocusFirstItem)return;yield Ee();const a=m(e),r=m(n),i=r==null?void 0:r.$el;if(!r||!i||!a||a.length===0||!a[0].component.includes("Input"))return;const c=i.querySelector(".ant-row:first-child input");!c||c==null||c.focus()}))})}const Ua={model:{type:Object,default:{}},labelWidth:{type:[Number,String],default:0},fieldMapToTime:{type:Array,default:()=>[]},compact:I.bool,schemas:{type:[Array],default:()=>[]},mergeDynamicData:{type:Object,default:null},baseRowStyle:{type:Object},baseColProps:{type:Object},autoSetPlaceHolder:I.bool.def(!0),autoSubmitOnEnter:I.bool.def(!1),submitOnReset:I.bool,submitOnChange:I.bool,size:I.oneOf(["default","small","large"]).def("default"),disabled:I.bool,emptySpan:{type:[Number,Object],default:0},showAdvancedButton:I.bool,transformDateFunc:{type:Function,default:e=>{var t,n;return(n=(t=e==null?void 0:e.format)==null?void 0:t.call(e,"YYYY-MM-DD HH:mm:ss"))!=null?n:e}},rulesMessageJoinLabel:I.bool.def(!0),autoAdvancedLine:I.number.def(3),alwaysShowLines:I.number.def(1),showActionButtonGroup:I.bool.def(!0),actionColOptions:Object,showResetButton:I.bool.def(!0),autoFocusFirstItem:I.bool,resetButtonOptions:Object,showSubmitButton:I.bool.def(!0),submitButtonOptions:Object,resetFunc:Function,submitFunc:Function,hideRequiredMark:I.bool,labelCol:Object,layout:I.oneOf(["horizontal","vertical","inline"]).def("horizontal"),tableAction:{type:Object},wrapperCol:Object,colon:I.bool,labelAlign:I.string,rowProps:Object};const Na=J({name:"BasicForm",components:{FormItem:Ia,Form:ot,Row:Yn,FormAction:Ra},props:Ua,emits:["advanced-change","reset","submit","register"],setup(e,{emit:t,attrs:n}){const s=He({}),o=Rt(),a=He({isAdvanced:!0,hideAdvanceBtn:!1,isLoad:!1,actionSpan:6}),r=N({}),i=N(!1),l=N({}),c=N(null),d=N(null),{prefixCls:p}=nt("basic-form"),h=U(()=>k(k({},e),m(l))),v=U(()=>[p,{[`${p}--compact`]:m(h).compact}]),u=U(()=>{const{baseRowStyle:G={},rowProps:ee}=m(h);return k({style:G},ee)}),f=U(()=>k(k(k({},n),e),m(h))),S=U(()=>{const G=m(c)||m(h).schemas;for(const ee of G){const{defaultValue:ie,component:lt}=ee;if(ie&&en.includes(lt))if(!Array.isArray(ie))ee.defaultValue=Me(ie);else{const ct=[];ie.forEach(nn=>{ct.push(Me(nn))}),ee.defaultValue=ct}}return m(h).showAdvancedButton?G.filter(ee=>ee.component!=="Divider"):G}),{handleToggleAdvanced:w}=Ea({advanceState:a,emit:t,getProps:h,getSchema:S,formModel:s,defaultValueRef:r}),{handleFormValues:b,initDefault:P}=La({getProps:h,defaultValueRef:r,getSchema:S,formModel:s});ja({getSchema:S,getProps:h,isInitedDefault:i,formElRef:d});const{handleSubmit:T,setFieldsValue:L,clearValidate:z,validate:y,validateFields:g,getFieldsValue:C,updateSchema:A,resetSchema:F,appendSchemaByField:E,removeSchemaByFiled:$,resetFields:j,scrollToField:W}=Ba({emit:t,getProps:h,formModel:s,getSchema:S,defaultValueRef:r,formElRef:d,schemaRef:c,handleFormValues:b});Pa({resetAction:j,submitAction:T}),H(()=>m(h).model,()=>{const{model:G}=m(h);!G||L(G)},{immediate:!0}),H(()=>m(h).schemas,G=>{F(G!=null?G:[])}),H(()=>S.value,G=>{Ee(()=>{var ee;(ee=o==null?void 0:o.redoModalHeight)==null||ee.call(o)}),!m(i)&&G!=null&&G.length&&(P(),i.value=!0)}),H(()=>s,Ft(()=>{m(h).submitOnChange&&T()},300),{deep:!0});function Pe(G){return V(this,null,function*(){l.value=Dt(m(l)||{},G)})}function _e(G,ee){s[G]=ee;const{validateTrigger:ie}=m(f);(!ie||ie==="change")&&g([G]).catch(lt=>{})}function Ue(G){const{autoSubmitOnEnter:ee}=m(h);if(!!ee&&G.key==="Enter"&&G.target&&G.target instanceof HTMLElement){const ie=G.target;ie&&ie.tagName&&ie.tagName.toUpperCase()=="INPUT"&&T()}}const Ne={getFieldsValue:C,setFieldsValue:L,resetFields:j,updateSchema:A,resetSchema:F,setProps:Pe,removeSchemaByFiled:$,appendSchemaByField:E,clearValidate:z,validateFields:g,validate:y,submit:T,scrollToField:W};return et(()=>{P(),t("register",Ne)}),k({getBindValue:f,handleToggleAdvanced:w,handleEnterPress:Ue,formModel:s,defaultValueRef:r,advanceState:a,getRow:u,getProps:h,formElRef:d,getSchema:S,formActionType:Ne,setFormModel:_e,getFormClass:v,getFormActionBindProps:U(()=>k(k({},h.value),a))},Ne)}});function xa(e,t,n,s,o,a){const r=D("FormItem"),i=D("FormAction"),l=D("Row"),c=D("Form");return R(),x(c,q(e.getBindValue,{class:e.getFormClass,ref:"formElRef",model:e.formModel,onKeypress:qn(e.handleEnterPress,["enter"])}),{default:O(()=>[M(l,le(he(e.getRow)),{default:O(()=>[re(e.$slots,"formHeader"),(R(!0),se(ue,null,de(e.getSchema,d=>(R(),x(r,{key:d.field,tableAction:e.tableAction,formActionType:e.formActionType,schema:d,formProps:e.getProps,allDefaultValues:e.defaultValueRef,formModel:e.formModel,setFormModel:e.setFormModel},be({_:2},[de(Object.keys(e.$slots),p=>({name:p,fn:O(h=>[re(e.$slots,p,le(he(h||{})))])}))]),1032,["tableAction","formActionType","schema","formProps","allDefaultValues","formModel","setFormModel"]))),128)),M(i,q(e.getFormActionBindProps,{onToggleAdvanced:e.handleToggleAdvanced}),be({_:2},[de(["resetBefore","submitBefore","advanceBefore","advanceAfter"],d=>({name:d,fn:O(p=>[re(e.$slots,d,le(he(p||{})))])}))]),1040,["onToggleAdvanced"]),re(e.$slots,"formFooter")]),_:3},16)]),_:3},16,["class","model","onKeypress"])}var gr=oe(Na,[["render",xa]]);export{fs as A,gr as B,hr as D,ur as F,mr as I,cr as P,ir as R,jt as T,lr as a,ys as b,Es as c,Ys as d,fr as e,pr as f,dr as g,rr as h,Ps as u};
