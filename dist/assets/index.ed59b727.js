var D=(t,i,s)=>new Promise((w,n)=>{var d=o=>{try{g(s.next(o))}catch(B){n(B)}},C=o=>{try{g(s.throw(o))}catch(B){n(B)}},g=o=>o.done?w(o.value):Promise.resolve(o.value).then(d,C);g((s=s.apply(t,i)).next())});import{av as H,r as O,f as G,a as J,b6 as X,cD as Y,s as Z,v as x,N as ee,E as F,o as c,j as b,y as m,m as T,q as L,h as y,n as _,k as p,t as k,z as v,D as te}from"./index.976f028d.js";import{cardList as ue}from"./data.34f5ed9b.js";import{P as ae}from"./index.9126614a.js";import{C as j}from"./index.7b813a52.js";import"./index.21e7287e.js";/* empty css               */import{L as S}from"./index.347fba13.js";import{g as se,d as oe}from"./info.5d6226a5.js";import{T as re,B as ie}from"./BasicForm.4ff9ea41.js";import{u as ne}from"./useForm.0b456d22.js";import{getBasicColumns as z}from"./tableData.1da06a33.js";import{g as le}from"./question.f4b5a34e.js";import{duox as ce,dx as me,pd as pe}from"./choose.209a17f0.js";import{B as de}from"./TableImg.5adf77e9.js";import{u as ge}from"./useTable.dd834775.js";import{R as N,C as P}from"./index.651a19c8.js";import"./index.2440c5f5.js";import"./index.b556a78a.js";import"./useSize.a0f971b4.js";import"./eagerComputed.b4caa6b1.js";import"./useWindowSizeFn.43b44744.js";import"./useContentViewHeight.fa21b489.js";import"./ArrowLeftOutlined.6cbdd482.js";import"./index.d76d5ff0.js";import"./transButton.a71e0ac3.js";import"./index.be0e7c6d.js";import"./useRefs.78498e36.js";import"./PlusOutlined.b74f1fca.js";import"./Col.dd538940.js";import"./useFlexGapSupport.4b430c1e.js";/* empty css              */import"./index.093def42.js";import"./index.1d81a672.js";import"./Checkbox.77af456b.js";import"./index.53bde1b9.js";import"./index.4e9d050c.js";import"./index.5d9f2293.js";import"./index.b4585842.js";import"./index.d04c7300.js";import"./get.177428c4.js";import"./index.a30387ae.js";import"./index.354b005f.js";import"./_baseIteratee.6f2aea4e.js";import"./DeleteOutlined.b2cc13f1.js";import"./index.04eaadeb.js";import"./Form.50c6b0cf.js";import"./index.8e4fa7db.js";import"./index.448301d3.js";import"./FullscreenOutlined.31e68573.js";import"./index.e5e60202.js";import"./index.185f09b6.js";import"./uuid.2b29000c.js";import"./download.ed803174.js";import"./base64Conver.08b9f4ec.js";import"./index.7944a3bb.js";import"./uniqBy.c45ce52f.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.dd657224.js";import"./scrollTo.5c1783ce.js";import"./index.d384ecff.js";import"./index.b2e43c68.js";const{notification:r}=te(),Be=O(),V=G(()=>Be.getUserInfo),fe=J({components:{Icon:X,PageWrapper:ae,[j.name]:j,[S.name]:S,[S.Item.name]:S.Item,[N.name]:N,[P.name]:P,BasicTable:de,TableAction:re,BasicForm:ie,CollapseContainer:Y},setup(){const[t,{setFieldsValue:i,getFieldsValue:s,submit:w}]=ne({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),n=Z(!0),[d,{setLoading:C,setColumns:g,getColumns:o,getDataSource:B,getRawDataSource:_e,reload:ke,getPaginationRef:l,setPagination:Se,getSelectRows:ve,getSelectRowKeys:qe,setSelectedRowKeys:Ie,clearSelectedRowKeys:Re}]=ge({title:"\u70B9\u51FB\u5220\u9664\u6309\u94AE \u6CE8\u610F\u4E0D\u80FD\u64A4\u9500 \u6CA1\u6709\u786E\u8BA4\u6846 \u8BF7\u8C28\u614E\u5220\u9664\uFF01",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:z(),showTableSetting:!0,pagination:n,showTableSetting:!0,tableSetting:{fullScreen:!0},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=x({colList:[],obj:{pageNum:1,pageSize:10},quesDetail:{},detail:!1,schemas:[],detailId:0,answerIf:!1});function E(){return D(this,null,function*(){const a=yield se(e.obj);e.colList=a.data.list,e.colList.map(u=>{switch(u.level){case 1:u.level="\u7B80\u5355";break;case 2:u.level="\u4E2D\u7B49";break;case 3:u.level="\u56F0\u96BE";break}switch(u.type){case 1:u.type="\u5224\u65AD\u9898";break;case 2:u.type="\u5355\u9009\u9898";break;case 3:u.type="\u591A\u9009\u9898";break;case 4:u.type="\u586B\u7A7A\u9898";break;case 5:u.type="\u8BBA\u8FF0\u9898";break}}),n.value={total:a.data.total},e.colList})}function M(){Math.floor(l().total/l().pageSize)+1==l().current&&(e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,E()),e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,E(),l()}function W(a){return D(this,null,function*(){V.value,(yield oe({quesId:a,userId:V.value.id})).code==="ITEST-200"?r.success({message:"\u5220\u9664\u6210\u529F",duration:3}):r.error({message:"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3}),E()})}function q(a){return D(this,null,function*(){e.detailId=a.id;let u=I(a.type);switch(u){case 1:e.schemas=pe();break;case 2:e.schemas=me();break;case 3:e.schemas=ce();break}yield R(a.id,u)})}const I=a=>{switch(a){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function R(a,u){return D(this,null,function*(){const f=yield le(a,u);e.quesDetail=f.data,e.detail=!0})}ee(()=>{E()});function K(a,u){return[{label:"\u67E5\u770B",color:"success",onClick:q.bind(null,a)},{label:"\u5220\u9664",color:"error",onClick:W.bind(null,a.id)}]}const Q=()=>{e.detail=!1,A()},U=()=>{if(s().answer1,s().answer1==null){r.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==s().answer1?(i({answer1:null}),A(),r.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),h()):(i({answer1:null}),r.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})):e.quesDetail.type===2?(e.quesDetail.rightAnswer,s(),e.quesDetail.rightAnswer==s().answer1?(i({answer1:null}),A(),r.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),h()):(i({answer1:null}),r.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}))):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,s().answer1.join(""),e.quesDetail.rightAnswer==s().answer1.join("")?(i({answer1:null}),A(),r.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),h()):(i({answer1:null}),r.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})))},h=()=>{try{e.colList.some((a,u,f)=>{if(a.id==e.detailId)throw u+1>=f.length?(r.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=f[u+1].id,R(e.detailId,I(f[u+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(a){}},$=()=>{e.answerIf=!0},A=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:ue,getCollections:E,registerTable:d,data:e,pagination:n,columns:z(),pageChange:M,createActions:K,questionDetail:q,exit:Q,handleSubmit:U,register1:t,nextQues:h,lookAnswer:$,closeAnswer:A}}}),Fe=v(" \u5065\u5EB7\u7684\u8EAB\u4F53\u662F\u5B9E\u73B0\u76EE\u6807\u7684\u57FA\u77F3\u3002 "),Ce={key:0,class:"p-4"},Ee={class:"m-15",style:{"font-size":"20px"}},Ae=v("\u9000\u51FA\u8BAD\u7EC3"),De=v("\u67E5\u770B\u7B54\u6848"),we={key:0},he={key:1},be={key:2};function ye(t,i){const s=F("TableAction"),w=F("BasicTable"),n=F("BasicForm"),d=F("a-button"),C=F("CollapseContainer"),g=F("PageWrapper");return c(),b(g,{class:L(t.prefixCls),title:"\u6536\u85CF"},{headerContent:m(()=>[Fe,T("div",{class:L(`${t.prefixCls}__link`)},null,2)]),default:m(()=>[t.data.detail?p("",!0):(c(),y("div",Ce,[_(w,{onRegister:t.registerTable,dataSource:t.data.colList,onChange:t.pageChange},{action:m(({record:o,column:B})=>[_(s,{actions:t.createActions(o,B)},null,8,["actions"])]),_:1},8,["onRegister","dataSource","onChange"])])),t.data.detail?(c(),b(C,{key:1,title:`\u9898\u76EEID\uFF1A${t.data.quesDetail.id}`},{default:m(()=>[T("div",Ee,k(t.data.quesDetail.content),1),t.data.detail?(c(),b(n,{key:0,onRegister:t.register1,onSubmit:t.handleSubmit,onReset:t.handleReset,schemas:t.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])):p("",!0),_(d,{onClick:t.exit,class:"m-5"},{default:m(()=>[Ae]),_:1},8,["onClick"]),_(d,{onClick:t.lookAnswer,class:"m-5"},{default:m(()=>[De]),_:1},8,["onClick"])]),_:1},8,["title"])):p("",!0),t.data.answerIf?(c(),b(C,{key:2,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:m(()=>[t.data.quesDetail.answer?(c(),y("h1",we,"\u7B54\u6848\uFF1A"+k(t.data.quesDetail.answer),1)):p("",!0),t.data.quesDetail.rightAnswer?(c(),y("h1",he,"\u7B54\u6848\uFF1A"+k(t.data.quesDetail.rightAnswer),1)):p("",!0),t.data.quesDetail.analysis?(c(),y("h1",be,"\u7B54\u6848\u89E3\u6790\uFF1A"+k(t.data.quesDetail.analysis),1)):p("",!0)]),_:1})):p("",!0)]),_:1},8,["class"])}var Wt=H(fe,[["render",ye],["__scopeId","data-v-a824fa86"]]);export{Wt as default};
