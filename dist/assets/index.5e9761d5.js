var g=(u,f,o)=>new Promise((i,q)=>{var v=r=>{try{F(o.next(r))}catch(n){q(n)}},m=r=>{try{F(o.throw(r))}catch(n){q(n)}},F=r=>r.done?i(r.value):Promise.resolve(r.value).then(v,m);F((o=o.apply(u,f)).next())});import{U as ae,r as oe,f as G,a as ne,an as le,bF as K,bI as R,R as W,G as $,bC as ie,s as M,v as re,a5 as ce,J as b,o as l,j as h,y as d,k as B,m as Q,n as C,t as w,h as k,Y as de,E as me,q as pe,z as y,H as ge}from"./index.dd87d40a.js";import{P as Be}from"./index.ef71507d.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{a as Fe,g as Ee}from"./question.ac1d9ff9.js";import{B as Ce}from"./TableImg.8102a7c5.js";import{B as fe,T as Ae}from"./BasicForm.f8200627.js";import{u as De}from"./useTable.4b5df510.js";import{getBasicColumns as be}from"./tableData.57b9d957.js";import{u as U}from"./useForm.a7a1da29.js";import{a as he,b as ye}from"./info.88f92374.js";import{duox as we,dx as ke,pd as qe}from"./choose.8745ba12.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.ba5070cb.js";import"./useContentViewHeight.25d38b2f.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import"./index.4dda775a.js";import"./FullscreenOutlined.87f5bef8.js";/* empty css               */import"./sortable.esm.2632adaa.js";import"./RedoOutlined.796f116b.js";/* empty css                *//* empty css                */import"./index.015f9bd2.js";/* empty css               */import"./index.3f815269.js";/* empty css                *//* empty css                *//* empty css                */import"./download.302161fe.js";import"./uniqBy.fe41e18a.js";const{notification:a}=ge(),ve=oe(),H=G(()=>ve.getUserInfo),Se=ne({components:{Icon:le,PageWrapper:Be,[K.name]:K,[R.name]:R,[R.Item.name]:R.Item,[W.name]:W,[$.name]:$,BasicTable:Ce,BasicForm:fe,TableAction:Ae,CollapseContainer:ie},setup(){const u=()=>[{field:"level",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u96BE\u5EA6",options:[{label:"\u7B80\u5355",value:"1",key:"1"},{label:"\u4E2D\u7B49",value:"2",key:"2"},{label:"\u56F0\u96BE",value:"3",key:"3"}],onChange:s=>{T(s,"levelChange")}}},{field:"type",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u7C7B\u578B",onChange:s=>{T(s,"typeChange")},options:[{label:"\u5224\u65AD",value:"1",key:"1"},{label:"\u5355\u9009",value:"2",key:"2"},{label:"\u591A\u9009",value:"3",key:"3"},{label:"\u586B\u7A7A",value:"4",key:"4"},{label:"\u8BBA\u8FF0",value:"5",key:"5"}]}}];M("");const[f,{setFieldsValue:o,getFieldsValue:i,submit:q}]=U({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),[v]=U({labelWidth:10,schemas:u(),showSubmitButton:!1}),m=M(!0),[F,{setLoading:r,setColumns:n,getColumns:j,getDataSource:z,getRawDataSource:A,reload:P,getPaginationRef:c,setPagination:We,getSelectRows:J,getSelectRowKeys:$e,setSelectedRowKeys:Me,clearSelectedRowKeys:Ue}]=De({title:"\u9898\u5E93",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:be(),showTableSetting:!0,pagination:m,sortFn:()=>{J()},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=re({questionList:[],formData:{},obj:{orderRule:0,pageNum:1,pageSize:10,level:0,typ:0},detail:!0,quesDetail:{},detailId:0,schemas:[],answerIf:!1}),T=(s,t)=>{t=="typeChange",s?t=="typeChange"?e.obj.type=s:e.obj.level=s:t=="typeChange"?e.obj.type=0:e.obj.level=0,e.obj,E()},O=()=>{e.obj.type=0,e.obj.level=0,E()};function E(){return g(this,null,function*(){e.obj;const s=yield Fe(e.obj);m.value={total:s.data.total},m.value={total:s.data.total},e.questionList=s.data.list,e.questionList,e.questionList.map(t=>{switch(t.level){case 1:t.level="\u7B80\u5355";break;case 2:t.level="\u4E2D\u7B49";break;case 3:t.level="\u56F0\u96BE";break}switch(t.type){case 1:t.type="\u5224\u65AD\u9898";break;case 2:t.type="\u5355\u9009\u9898";break;case 3:t.type="\u591A\u9009\u9898";break;case 4:t.type="\u586B\u7A7A\u9898";break;case 5:t.type="\u8BBA\u8FF0\u9898";break}})})}function V(s){return g(this,null,function*(){e.detailId=s.id;let t=_(s.type);if(t===4||t===5){a.warning({message:"\u6682\u4E0D\u652F\u6301\u7EC3\u4E60",duration:3});return}switch(t){case 1:e.schemas=qe();break;case 2:e.schemas=ke();break;case 3:e.schemas=we();break}yield S(s.id,t)})}ce(()=>{E(e.obj)}),G(()=>(Math.floor(c().total/c().pageSize)+1==c().current&&(e.obj.pageNum=c().current,e.obj.pageSize=c().pageSize,E()),c().current));function Y(){return g(this,null,function*(){e.obj.pageNum=c().current,e.obj.pageSize=c().pageSize,E()})}const X=()=>{e.detail=!0};function S(s,t){return g(this,null,function*(){const p=yield Ee(s,t);e.quesDetail=p.data,e.detail=!1})}const Z=()=>{},x=()=>{try{e.questionList.some((s,t,p)=>{if(s.id==e.detailId)throw t-1<0?(a.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=p[t-1].id,D(),S(e.detailId,_(p[t-1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(s){}},I=()=>{try{e.questionList.some((s,t,p)=>{if(s.id==e.detailId)throw t+1>=p.length?(a.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=p[t+1].id,D(),S(e.detailId,_(p[t+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(s){}},_=s=>{switch(s){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function L(){return g(this,null,function*(){const s=yield he({quesId:e.quesDetail.id,userId:+H.value.id});s.code==="ITEST-200"?a.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):a.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}function ee(){return g(this,null,function*(){const s=yield ye({questionId:e.quesDetail.id,userId:+H.value.id});s.code==="ITEST-200"?a.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):a.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}const ue=()=>{if(i().answer1,i().answer1==null){a.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==i().answer1?(o({answer1:null}),D(),a.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),a.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}),L()):e.quesDetail.type===2?(e.quesDetail.rightAnswer,i(),e.quesDetail.rightAnswer==i().answer1?(o({answer1:null}),D(),a.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),a.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3}),L())):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,i().answer1.join(""),e.quesDetail.rightAnswer==i().answer1.join("")?(o({answer1:null}),D(),a.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),a.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3})))};function se(s,t){return[{label:"\u67E5\u770B",color:"success",onClick:V.bind(null,s)},{label:"\u5220\u9664",color:"success",onClick:N.bind(null,s)}]}function N(s){return g(this,null,function*(){})}const te=()=>{e.answerIf=!0},D=()=>{e.answerIf=!1};return{prefixCls:"list-card",getQuestions:E,selectQuestions:T,data:e,pagination:m,register:v,register1:f,questionDetail:V,registerTable:F,pageChange:Y,resetQuestions:O,exit:X,QuestionDetail:S,lastQues:x,nextQues:I,typeToId:_,addErrK:L,addCollK:ee,getContent:Z,handleSubmit:ue,createActions:se,lookAnswer:te,closeAnswer:D,sortByTime:()=>{e.obj.orderRule=(e.obj.orderRule+1)%2,e.obj.pageNum=c().current,e.obj.pageSize=c().pageSize,E()},del:N}}}),Ie={class:"p-4"},_e={class:"m-15"},Re=y("\u9000\u51FA\u8BAD\u7EC3"),je=y("\u67E5\u770B\u7B54\u6848"),Te=y("\u4E0A\u4E00\u4E2A"),Le=y("\u4E0B\u4E00\u4E2A"),Qe=y("\u6DFB\u52A0\u5230\u9519\u9898\u5E93"),ze=y("\u6DFB\u52A0\u5230\u6536\u85CF\u5939"),Pe={key:0},Ve={key:1},Ne={key:2};function Ke(u,f,o,i,q,v){const m=b("BasicForm"),F=b("TableAction"),r=b("BasicTable"),n=b("a-button"),j=b("CollapseContainer"),z=b("PageWrapper");return l(),h(z,{class:pe(u.prefixCls)},{default:d(()=>[u.data.detail?(l(),h(m,{key:0,onRegister:u.register,modelValue:u.level,"onUpdate:modelValue":f[0]||(f[0]=A=>u.level=A),style:{margin:"10px"},onReset:u.resetQuestions},null,8,["onRegister","modelValue","onReset"])):B("",!0),Q("div",Ie,[u.data.detail?(l(),h(r,{key:0,onRegister:u.registerTable,onRowClick:u.questionDetail,dataSource:u.data.questionList,onChange:u.pageChange},{action:d(({record:A,column:P})=>[C(F,{actions:u.createActions(A,P)},null,8,["actions"])]),_:1},8,["onRegister","onRowClick","dataSource","onChange"])):B("",!0)]),u.data.detail?B("",!0):(l(),h(j,{key:1,title:`\u9898\u76EEID\uFF1A${u.data.quesDetail.id}`},{default:d(()=>[Q("div",_e,w(u.data.quesDetail.content),1),(l(!0),k(me,null,de(u.data.quesDetail.selectionList,A=>(l(),k("ul",{class:"m-15",key:u.data.quesDetail.id},[Q("li",null,w(A),1)]))),128)),u.data.detail?B("",!0):(l(),h(m,{key:0,onRegister:u.register1,onSubmit:u.handleSubmit,onReset:u.handleReset,schemas:u.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])),C(n,{onClick:u.exit,class:"m-5"},{default:d(()=>[Re]),_:1},8,["onClick"]),C(n,{onClick:u.lookAnswer,class:"m-5"},{default:d(()=>[je]),_:1},8,["onClick"]),C(n,{onClick:u.lastQues,class:"m-5"},{default:d(()=>[Te]),_:1},8,["onClick"]),C(n,{onClick:u.nextQues,class:"m-5"},{default:d(()=>[Le]),_:1},8,["onClick"]),C(n,{onClick:u.addErrK,class:"m-5"},{default:d(()=>[Qe]),_:1},8,["onClick"]),C(n,{onClick:u.addCollK,class:"m-5"},{default:d(()=>[ze]),_:1},8,["onClick"])]),_:1},8,["title"])),u.data.answerIf?(l(),h(j,{key:2,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:d(()=>[u.data.quesDetail.answer?(l(),k("h1",Pe,"\u7B54\u6848\uFF1A"+w(u.data.quesDetail.answer),1)):B("",!0),u.data.quesDetail.rightAnswer?(l(),k("h1",Ve,"\u7B54\u6848\uFF1A"+w(u.data.quesDetail.rightAnswer),1)):B("",!0),u.data.quesDetail.analysis?(l(),k("h1",Ne,"\u7B54\u6848\u89E3\u6790\uFF1A"+w(u.data.quesDetail.analysis),1)):B("",!0)]),_:1})):B("",!0)]),_:1},8,["class"])}var Ru=ae(Se,[["render",Ke],["__scopeId","data-v-af2b0f62"]]);export{Ru as default};
