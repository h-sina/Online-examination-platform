var D=(a,i,s)=>new Promise((b,r)=>{var g=o=>{try{B(s.next(o))}catch(h){r(h)}},f=o=>{try{B(s.throw(o))}catch(h){r(h)}},B=o=>o.done?b(o.value):Promise.resolve(o.value).then(g,f);B((s=s.apply(a,i)).next())});import{U,r as H,f as W,a as G,an as J,bF as q,bI as S,R,G as T,bC as O,s as $,v as X,a5 as Y,J as E,o as Z,h as x,w as c,x as d,m,n as p,y as C,t as v,z,H as ee}from"./index.66dc6cca.js";import{cardList as ae}from"./data.34f5ed9b.js";import{P as ue}from"./index.2adec96f.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{g as te,d as se}from"./info.f1994477.js";import{T as oe,B as ne}from"./BasicForm.5910004e.js";import{u as ie}from"./useForm.49e0e708.js";import{getBasicColumns as L}from"./tableData.1da06a33.js";import{g as re}from"./question.f3eeb088.js";import{duox as le,dx as ce,pd as de}from"./choose.d9417bb2.js";import{B as me}from"./TableImg.8eef3a03.js";import{u as pe}from"./useTable.784416e6.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.42dc6d89.js";import"./useContentViewHeight.1394d2f2.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.dd449670.js";/* empty css                *//* empty css                */import"./index.b75ea1a3.js";import"./FullscreenOutlined.72d58049.js";/* empty css                *//* empty css                *//* empty css                */import"./download.5b2676c7.js";import"./uniqBy.e1e9a821.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.f37638f5.js";/* empty css                */import"./index.2a4ae6b3.js";const{notification:n}=ee(),ge=H(),j=W(()=>ge.getUserInfo),Be=G({components:{Icon:J,PageWrapper:ue,[q.name]:q,[S.name]:S,[S.Item.name]:S.Item,[R.name]:R,[T.name]:T,BasicTable:me,TableAction:oe,BasicForm:ne,CollapseContainer:O},setup(){const[a,{setFieldsValue:i,getFieldsValue:s,submit:b}]=ie({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),r=$(!0),[g,{setLoading:f,setColumns:B,getColumns:o,getDataSource:h,getRawDataSource:Ee,reload:Ce,getPaginationRef:l,setPagination:be,getSelectRows:he,getSelectRowKeys:ye,setSelectedRowKeys:Se,clearSelectedRowKeys:ve}]=pe({title:"\u70B9\u51FB\u5220\u9664\u6309\u94AE \u6CE8\u610F\u4E0D\u80FD\u64A4\u9500 \u6CA1\u6709\u786E\u8BA4\u6846 \u8BF7\u8C28\u614E\u5220\u9664\uFF01",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:L(),showTableSetting:!0,pagination:r,showTableSetting:!0,tableSetting:{fullScreen:!0},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=X({colList:[],obj:{pageNum:1,pageSize:10},quesDetail:{},detail:!1,schemas:[],detailId:0,answerIf:!1});function w(){return D(this,null,function*(){const t=yield te(e.obj);e.colList=t.data.list,e.colList.map(u=>{switch(u.level){case 1:u.level="\u7B80\u5355";break;case 2:u.level="\u4E2D\u7B49";break;case 3:u.level="\u56F0\u96BE";break}switch(u.type){case 1:u.type="\u5224\u65AD\u9898";break;case 2:u.type="\u5355\u9009\u9898";break;case 3:u.type="\u591A\u9009\u9898";break;case 4:u.type="\u586B\u7A7A\u9898";break;case 5:u.type="\u8BBA\u8FF0\u9898";break}}),r.value={total:t.data.total},e.colList})}function N(){Math.floor(l().total/l().pageSize)+1==l().current&&(e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,w()),e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,w(),l()}function V(t){return D(this,null,function*(){j.value,(yield se({quesId:t,userId:j.value.id})).code==="ITEST-200"?n.success({message:"\u5220\u9664\u6210\u529F",duration:3}):n.error({message:"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3}),w()})}function k(t){return D(this,null,function*(){e.detailId=t.id;let u=_(t.type);switch(u){case 1:e.schemas=de();break;case 2:e.schemas=ce();break;case 3:e.schemas=le();break}yield I(t.id,u)})}const _=t=>{switch(t){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function I(t,u){return D(this,null,function*(){const F=yield re(t,u);e.quesDetail=F.data,e.detail=!0})}Y(()=>{w()});function M(t,u){return[{label:"\u67E5\u770B",color:"success",onClick:k.bind(null,t)},{label:"\u5220\u9664",color:"error",onClick:V.bind(null,t.id)}]}const P=()=>{e.detail=!1,A()},K=()=>{if(s().answer1,s().answer1==null){n.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==s().answer1?(i({answer1:null}),A(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),y()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})):e.quesDetail.type===2?(e.quesDetail.rightAnswer,s(),e.quesDetail.rightAnswer==s().answer1?(i({answer1:null}),A(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),y()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}))):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,s().answer1.join(""),e.quesDetail.rightAnswer==s().answer1.join("")?(i({answer1:null}),A(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),y()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})))},y=()=>{try{e.colList.some((t,u,F)=>{if(t.id==e.detailId)throw u+1>=F.length?(n.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=F[u+1].id,I(e.detailId,_(F[u+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(t){}},Q=()=>{e.answerIf=!0},A=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:ae,getCollections:w,registerTable:g,data:e,pagination:r,columns:L(),pageChange:N,createActions:M,questionDetail:k,exit:P,handleSubmit:K,register1:a,nextQues:y,lookAnswer:Q,closeAnswer:A}}}),Fe={class:"p-4"},fe={class:"m-15",style:{"font-size":"20px"}},we=z("\u9000\u51FA\u8BAD\u7EC3"),Ae=z("\u67E5\u770B\u7B54\u6848");function De(a,i){const s=E("TableAction"),b=E("BasicTable"),r=E("BasicForm"),g=E("a-button"),f=E("CollapseContainer");return Z(),x("div",null,[c(m("div",Fe,[p(b,{onRegister:a.registerTable,dataSource:a.data.colList,onChange:a.pageChange},{action:C(({record:B,column:o})=>[p(s,{actions:a.createActions(B,o)},null,8,["actions"])]),_:1},8,["onRegister","dataSource","onChange"])],512),[[d,!a.data.detail]]),c(m("div",null,[p(f,{title:`\u9898\u76EEID\uFF1A${a.data.quesDetail.id}`},{default:C(()=>[m("div",fe,v(a.data.quesDetail.content),1),c(p(r,{onRegister:a.register1,onSubmit:a.handleSubmit,onReset:a.handleReset,schemas:a.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"]),[[d,a.data.detail]]),p(g,{onClick:a.exit,class:"m-5"},{default:C(()=>[we]),_:1},8,["onClick"]),p(g,{onClick:a.lookAnswer,class:"m-5"},{default:C(()=>[Ae]),_:1},8,["onClick"])]),_:1},8,["title"])],512),[[d,a.data.detail]]),c(m("div",null,[p(f,{title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:C(()=>[c(m("h1",null,"\u7B54\u6848\uFF1A"+v(a.data.quesDetail.answer),513),[[d,a.data.quesDetail.answer]]),c(m("h1",null,"\u7B54\u6848\uFF1A"+v(a.data.quesDetail.rightAnswer),513),[[d,a.data.quesDetail.rightAnswer]]),c(m("h1",null,"\u7B54\u6848\u89E3\u6790\uFF1A"+v(a.data.quesDetail.analysis),513),[[d,a.data.quesDetail.analysis]])]),_:1})],512),[[d,a.data.answerIf]])])}var ga=U(Be,[["render",De],["__scopeId","data-v-5893253a"]]);export{ga as default};
