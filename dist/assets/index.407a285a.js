var b=(e,a,o)=>new Promise((n,r)=>{var q=d=>{try{B(o.next(d))}catch(A){r(A)}},m=d=>{try{B(o.throw(d))}catch(A){r(A)}},B=d=>d.done?n(d.value):Promise.resolve(d.value).then(q,m);B((o=o.apply(e,a)).next())});import{n as f,af as X,U as ie,r as ce,f as Z,a as de,an as pe,bF as N,bI as _,R as V,G as K,bC as me,s as U,v as ge,a5 as fe,J as F,o as c,h as D,j as v,k as h,m as k,y as E,t as S,E as be,Y as he,z as y,H as Be}from"./index.66dc6cca.js";import{P as we}from"./index.2adec96f.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{a as Fe,g as Ee}from"./question.f3eeb088.js";import{B as Ae}from"./TableImg.8eef3a03.js";import{B as Ce,T as De}from"./BasicForm.5910004e.js";import{u as ye}from"./useTable.784416e6.js";import{getBasicColumns as Te}from"./tableData.57b9d957.js";import{u as W}from"./useForm.49e0e708.js";import{a as ve,b as ke}from"./info.f1994477.js";import{duox as Se,dx as qe,pd as je}from"./choose.8745ba12.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.42dc6d89.js";import"./useContentViewHeight.1394d2f2.js";/* empty css              *//* empty css                *//* empty css                *//* empty css                *//* empty css               */import"./index.b75ea1a3.js";import"./FullscreenOutlined.72d58049.js";/* empty css               */import"./sortable.esm.2632adaa.js";import"./RedoOutlined.f37638f5.js";/* empty css                *//* empty css                */import"./index.2a4ae6b3.js";/* empty css               */import"./index.dd449670.js";/* empty css                *//* empty css                *//* empty css                */import"./download.5b2676c7.js";import"./uniqBy.e1e9a821.js";var Ie={icon:function(a,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M923 283.6a260.04 260.04 0 00-56.9-82.8 264.4 264.4 0 00-84-55.5A265.34 265.34 0 00679.7 125c-49.3 0-97.4 13.5-139.2 39-10 6.1-19.5 12.8-28.5 20.1-9-7.3-18.5-14-28.5-20.1-41.8-25.5-89.9-39-139.2-39-35.5 0-69.9 6.8-102.4 20.3-31.4 13-59.7 31.7-84 55.5a258.44 258.44 0 00-56.9 82.8c-13.9 32.3-21 66.6-21 101.9 0 33.3 6.8 68 20.3 103.3 11.3 29.5 27.5 60.1 48.2 91 32.8 48.9 77.9 99.9 133.9 151.6 92.8 85.7 184.7 144.9 188.6 147.3l23.7 15.2c10.5 6.7 24 6.7 34.5 0l23.7-15.2c3.9-2.5 95.7-61.6 188.6-147.3 56-51.7 101.1-102.7 133.9-151.6 20.7-30.9 37-61.5 48.2-91 13.5-35.3 20.3-70 20.3-103.3.1-35.3-7-69.6-20.9-101.9zM512 814.8S156 586.7 156 385.5C156 283.6 240.3 201 344.3 201c73.1 0 136.5 40.8 167.7 100.4C543.2 241.8 606.6 201 679.7 201c104 0 188.3 82.6 188.3 184.5 0 201.2-356 429.3-356 429.3z",fill:a}},{tag:"path",attrs:{d:"M679.7 201c-73.1 0-136.5 40.8-167.7 100.4C480.8 241.8 417.4 201 344.3 201c-104 0-188.3 82.6-188.3 184.5 0 201.2 356 429.3 356 429.3s356-228.1 356-429.3C868 283.6 783.7 201 679.7 201z",fill:o}}]}},name:"heart",theme:"twotone"},Pe=Ie;function G(e){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){_e(e,r,o[r])})}return e}function _e(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}var z=function(a,o){var n=G({},a,o.attrs);return f(X,G({},n,{icon:Pe}),null)};z.displayName="HeartTwoTone";z.inheritAttrs=!1;var Re=z,Oe={icon:function(a,o){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M474.8 357.7l-24.5 24.5-34.4-3.8c-9.6-1.1-19.3-1.6-28.9-1.6-29 0-57.5 4.7-84.7 14.1-14 4.8-27.4 10.8-40.3 17.9l353.1 353.3a259.92 259.92 0 0030.4-153.9l-3.8-34.4 24.5-24.5L800 415.5 608.5 224 474.8 357.7z",fill:o}},{tag:"path",attrs:{d:"M878.3 392.1L631.9 145.7c-6.5-6.5-15-9.7-23.5-9.7s-17 3.2-23.5 9.7L423.8 306.9c-12.2-1.4-24.5-2-36.8-2-73.2 0-146.4 24.1-206.5 72.3a33.23 33.23 0 00-2.7 49.4l181.7 181.7-215.4 215.2a15.8 15.8 0 00-4.6 9.8l-3.4 37.2c-.9 9.4 6.6 17.4 15.9 17.4.5 0 1 0 1.5-.1l37.2-3.4c3.7-.3 7.2-2 9.8-4.6l215.4-215.4 181.7 181.7c6.5 6.5 15 9.7 23.5 9.7 9.7 0 19.3-4.2 25.9-12.4 56.3-70.3 79.7-158.3 70.2-243.4l161.1-161.1c12.9-12.8 12.9-33.8 0-46.8zM666.2 549.3l-24.5 24.5 3.8 34.4a259.92 259.92 0 01-30.4 153.9L262 408.8c12.9-7.1 26.3-13.1 40.3-17.9 27.2-9.4 55.7-14.1 84.7-14.1 9.6 0 19.3.5 28.9 1.6l34.4 3.8 24.5-24.5L608.5 224 800 415.5 666.2 549.3z",fill:a}}]}},name:"pushpin",theme:"twotone"},Le=Oe;function J(e){for(var a=1;a<arguments.length;a++){var o=arguments[a]!=null?Object(arguments[a]):{},n=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(o).filter(function(r){return Object.getOwnPropertyDescriptor(o,r).enumerable}))),n.forEach(function(r){ze(e,r,o[r])})}return e}function ze(e,a,o){return a in e?Object.defineProperty(e,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[a]=o,e}var H=function(a,o){var n=J({},a,o.attrs);return f(X,J({},n,{icon:Le}),null)};H.displayName="PushpinTwoTone";H.inheritAttrs=!1;var He=H;const{notification:l}=Be(),Qe=ce(),Y=Z(()=>Qe.getUserInfo),$e=de({components:{Icon:pe,PageWrapper:we,[N.name]:N,[_.name]:_,[_.Item.name]:_.Item,[V.name]:V,[K.name]:K,BasicTable:Ae,BasicForm:Ce,TableAction:De,CollapseContainer:me,HeartTwoTone:Re,PushpinTwoTone:He},setup(){const e=()=>[{field:"level",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u96BE\u5EA6",options:[{label:"\u7B80\u5355",value:"1",key:"1"},{label:"\u4E2D\u7B49",value:"2",key:"2"},{label:"\u56F0\u96BE",value:"3",key:"3"}],onChange:u=>{O(u,"levelChange")}}},{field:"type",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u7C7B\u578B",onChange:u=>{O(u,"typeChange")},options:[{label:"\u5224\u65AD",value:"1",key:"1"},{label:"\u5355\u9009",value:"2",key:"2"},{label:"\u591A\u9009",value:"3",key:"3"},{label:"\u586B\u7A7A",value:"4",key:"4"},{label:"\u8BBA\u8FF0",value:"5",key:"5"}]}}];U("");const[a,{setFieldsValue:o,getFieldsValue:n,submit:r}]=W({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),[q]=W({labelWidth:10,schemas:e(),showSubmitButton:!1}),m=U(!0),[B,{setLoading:d,setColumns:A,getColumns:Q,getDataSource:T,getRawDataSource:R,reload:p,getPaginationRef:i,setPagination:et,getSelectRows:x,getSelectRowKeys:tt,setSelectedRowKeys:ut,clearSelectedRowKeys:at}]=ye({title:"\u9898\u5E93",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:Te(),showTableSetting:!0,pagination:m,sortFn:()=>{x()},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),t=ge({questionList:[],formData:{},obj:{orderRule:0,pageNum:1,pageSize:10,level:0,typ:0},detail:!0,quesDetail:{},detailId:0,schemas:[],answerIf:!1}),O=(u,s)=>{s=="typeChange",u?s=="typeChange"?t.obj.type=u:t.obj.level=u:s=="typeChange"?t.obj.type=0:t.obj.level=0,t.obj,w()},ee=()=>{t.obj.type=0,t.obj.level=0,w()};function w(){return b(this,null,function*(){t.obj;const u=yield Fe(t.obj);m.value={total:u.data.total},m.value={total:u.data.total},t.questionList=u.data.list,t.questionList,t.questionList.map(s=>{switch(s.level){case 1:s.level="\u7B80\u5355";break;case 2:s.level="\u4E2D\u7B49";break;case 3:s.level="\u56F0\u96BE";break}switch(s.type){case 1:s.type="\u5224\u65AD\u9898";break;case 2:s.type="\u5355\u9009\u9898";break;case 3:s.type="\u591A\u9009\u9898";break;case 4:s.type="\u586B\u7A7A\u9898";break;case 5:s.type="\u8BBA\u8FF0\u9898";break}})})}function $(u){return b(this,null,function*(){t.detailId=u.id;let s=P(u.type);if(s===4||s===5){l.warning({message:"\u6682\u4E0D\u652F\u6301\u7EC3\u4E60",duration:3});return}switch(s){case 1:t.schemas=je();break;case 2:t.schemas=qe();break;case 3:t.schemas=Se();break}yield j(u.id,s)})}fe(()=>{t.answerIf=!1,w(t.obj)}),Z(()=>(Math.floor(i().total/i().pageSize)+1==i().current&&(t.obj.pageNum=i().current,t.obj.pageSize=i().pageSize,w()),i().current));function te(){return b(this,null,function*(){t.obj.pageNum=i().current,t.obj.pageSize=i().pageSize,w()})}const ue=()=>{t.detail=!0,t.answerIf=!1};function j(u,s){return b(this,null,function*(){const g=yield Ee(u,s);t.quesDetail=g.data,t.detail=!1})}const ae=()=>{},oe=()=>{try{t.questionList.some((u,s,g)=>{if(u.id==t.detailId)throw 0>s-1?(l.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(t.detailId=g[s-1].id,C(),j(t.detailId,P(g[s-1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(u){}},I=()=>{try{t.questionList.some((u,s,g)=>{if(u.id==t.detailId)throw s+1>=g.length?(l.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(t.detailId=g[s+1].id,C(),j(t.detailId,P(g[s+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(u){}},P=u=>{switch(u){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function L(){return b(this,null,function*(){const u=yield ve({quesId:t.quesDetail.id,userId:+Y.value.id});u.code==="ITEST-200"?l.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):l.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}function se(){return b(this,null,function*(){const u=yield ke({questionId:t.quesDetail.id,userId:+Y.value.id});u.code==="ITEST-200"?l.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):l.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}const ne=()=>{if(n().answer1,n().answer1==null){l.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}t.quesDetail.type===1?t.quesDetail.answer==n().answer1?(o({answer1:null}),C(),l.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),l.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}),L()):t.quesDetail.type===2?(t.quesDetail.rightAnswer,n(),t.quesDetail.rightAnswer==n().answer1?(o({answer1:null}),C(),l.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),l.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3}),L())):t.quesDetail.type===3&&(t.quesDetail.rightAnswer,n().answer1.join(""),t.quesDetail.rightAnswer==n().answer1.join("")?(o({answer1:null}),C(),l.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(o({answer1:null}),l.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3})))};function re(u,s){return[{label:"\u67E5\u770B",color:"success",onClick:$.bind(null,u)},{label:"\u5220\u9664",color:"success",onClick:M.bind(null,u)}]}function M(u){return b(this,null,function*(){})}const le=()=>{t.answerIf=!0},C=()=>{t.answerIf=!1};return{prefixCls:"list-card",getQuestions:w,selectQuestions:O,data:t,pagination:m,register:q,register1:a,questionDetail:$,registerTable:B,pageChange:te,resetQuestions:ee,exit:ue,QuestionDetail:j,lastQues:oe,nextQues:I,typeToId:P,addErrK:L,addCollK:se,getContent:ae,handleSubmit:ne,createActions:re,lookAnswer:le,closeAnswer:C,sortByTime:()=>{t.obj.orderRule=(t.obj.orderRule+1)%2,t.obj.pageNum=i().current,t.obj.pageSize=i().pageSize,w()},del:M}}}),Me={class:"p-4"},Ne=y("\u6DFB\u81F3\u9519\u9898 "),Ve=y("\u6536\u85CF\u672C\u9898 "),Ke={class:"m-10"},Ue=y("\u9000\u51FA\u8BAD\u7EC3"),We=y("\u4E0A\u4E00\u4E2A"),Ge=y("\u4E0B\u4E00\u4E2A"),Je=y("\u67E5\u770B\u7B54\u6848"),Ye={key:0},Xe={key:1},Ze={key:2};function xe(e,a,o,n,r,q){const m=F("BasicForm"),B=F("TableAction"),d=F("BasicTable"),A=F("PushpinTwoTone"),Q=F("HeartTwoTone"),T=F("a-button"),R=F("CollapseContainer");return c(),D("div",null,[e.data.detail?(c(),v(m,{key:0,onRegister:e.register,modelValue:e.level,"onUpdate:modelValue":a[0]||(a[0]=p=>e.level=p),style:{margin:"10px"},onReset:e.resetQuestions},null,8,["onRegister","modelValue","onReset"])):h("",!0),k("div",Me,[e.data.detail?(c(),v(d,{key:0,onRegister:e.registerTable,dataSource:e.data.questionList,onChange:e.pageChange},{action:E(({record:p,column:i})=>[f(B,{actions:e.createActions(p,i)},null,8,["actions"])]),_:1},8,["onRegister","dataSource","onChange"])):h("",!0)]),e.data.detail?h("",!0):(c(),v(R,{key:1,title:`\u9898\u76EEID\uFF1A${e.data.quesDetail.id}`},{default:E(()=>[k("a",{shape:"round",onClick:a[1]||(a[1]=(...p)=>e.addErrK&&e.addErrK(...p)),class:"m-2"},[f(A),Ne]),k("a",{shape:"round",onClick:a[2]||(a[2]=(...p)=>e.addCollK&&e.addCollK(...p)),class:"m-2"},[f(Q),Ve]),k("div",Ke,S(e.data.quesDetail.content),1),(c(!0),D(be,null,he(e.data.quesDetail.selectionList,p=>(c(),D("ul",{class:"m-5 ml-10",key:e.data.quesDetail.id},[k("li",null,S(p),1)]))),128)),e.data.detail?h("",!0):(c(),v(m,{key:0,onRegister:e.register1,onSubmit:e.handleSubmit,onReset:e.handleReset,schemas:e.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])),f(T,{onClick:e.exit,class:"m-5"},{default:E(()=>[Ue]),_:1},8,["onClick"]),f(T,{shape:"round",onClick:e.lastQues,class:"m-5"},{default:E(()=>[We]),_:1},8,["onClick"]),f(T,{shape:"round",onClick:e.nextQues,class:"m-5"},{default:E(()=>[Ge]),_:1},8,["onClick"]),f(T,{onClick:e.lookAnswer,class:"m-5"},{default:E(()=>[Je]),_:1},8,["onClick"])]),_:1},8,["title"])),!e.data.detail&&e.data.answerIf?(c(),v(R,{key:2,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:E(()=>[e.data.quesDetail.answer?(c(),D("h1",Ye,"\u7B54\u6848\uFF1A"+S(e.data.quesDetail.answer),1)):h("",!0),e.data.quesDetail.rightAnswer?(c(),D("h1",Xe,"\u7B54\u6848\uFF1A"+S(e.data.quesDetail.rightAnswer),1)):h("",!0),e.data.quesDetail.analysis?(c(),D("h1",Ze,"\u7B54\u6848\u89E3\u6790\uFF1A"+S(e.data.quesDetail.analysis),1)):h("",!0)]),_:1})):h("",!0)])}var Vt=ie($e,[["render",xe],["__scopeId","data-v-5d72c261"]]);export{Vt as default};
