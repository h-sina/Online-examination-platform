var w=(t,i,s)=>new Promise((h,r)=>{var p=o=>{try{g(s.next(o))}catch(B){r(B)}},C=o=>{try{g(s.throw(o))}catch(B){r(B)}},g=o=>o.done?h(o.value):Promise.resolve(o.value).then(p,C);g((s=s.apply(t,i)).next())});import{U as $,r as G,f as J,a as O,an as X,bF as T,bI as b,R as j,G as z,bC as Y,s as Z,v as x,a5 as ee,J as f,o as c,j as y,y as d,m as L,q as N,h as _,n as k,k as m,t as S,z as q,H as te}from"./index.5903aaea.js";import{cardList as ue}from"./data.54f35b77.js";import{P as ae}from"./index.2cbd72b1.js";/* empty css                *//* empty css               *//* empty css               *//* empty css                */import{c as se,e as oe}from"./info.b3379be4.js";import{T as ne,B as ie}from"./BasicForm.d88c9cb9.js";import{u as re}from"./useForm.522fb0fd.js";import{getBasicColumns as P}from"./tableData.98c64252.js";import{g as le}from"./question.a0439744.js";import{duox as ce,dx as de,pd as me}from"./choose.d9417bb2.js";import{B as pe}from"./TableImg.f41acf2c.js";import{u as ge}from"./useTable.88a45bec.js";/* empty css               *//* empty css                */import"./useWindowSizeFn.9bc4a4d0.js";import"./useContentViewHeight.0ad58928.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.b1c133f4.js";/* empty css                *//* empty css                */import"./index.2670c85d.js";import"./FullscreenOutlined.115d63d2.js";/* empty css                *//* empty css                *//* empty css                */import"./download.8156160a.js";import"./uniqBy.03c90016.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.4a997f15.js";/* empty css                */import"./index.3f4b20fc.js";const{notification:n}=te(),Be=G(),V=J(()=>Be.getUserInfo),Fe=O({components:{Icon:X,PageWrapper:ae,[T.name]:T,[b.name]:b,[b.Item.name]:b.Item,[j.name]:j,[z.name]:z,BasicTable:pe,TableAction:ne,BasicForm:ie,CollapseContainer:Y},setup(){const[t,{setFieldsValue:i,getFieldsValue:s,submit:h}]=re({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),r=Z(!0),[p,{setLoading:C,setColumns:g,getColumns:o,getDataSource:B,getRawDataSource:_e,reload:ke,getPaginationRef:l,setPagination:Se,getSelectRows:qe,getSelectRowKeys:Ie,setSelectedRowKeys:ve,clearSelectedRowKeys:Re}]=ge({title:"\u70B9\u51FB\u5220\u9664\u6309\u94AE \u6CE8\u610F\u4E0D\u80FD\u64A4\u9500 \u6CA1\u6709\u786E\u8BA4\u6846 \u8BF7\u8C28\u614E\u5220\u9664\uFF01",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:P(),showTableSetting:!0,pagination:r,showTableSetting:!0,tableSetting:{fullScreen:!0},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=x({colList:[],obj:{pageNum:1,pageSize:10},quesDetail:{},detail:!1,schemas:[],detailId:0,answerIf:!1});function A(){return w(this,null,function*(){const a=yield se(e.obj);e.colList=a.data.list,e.colList.map(u=>{switch(u.level){case 1:u.level="\u7B80\u5355";break;case 2:u.level="\u4E2D\u7B49";break;case 3:u.level="\u56F0\u96BE";break}switch(u.type){case 1:u.type="\u5224\u65AD\u9898";break;case 2:u.type="\u5355\u9009\u9898";break;case 3:u.type="\u591A\u9009\u9898";break;case 4:u.type="\u586B\u7A7A\u9898";break;case 5:u.type="\u8BBA\u8FF0\u9898";break}}),r.value={total:a.data.total},e.colList})}function M(){Math.floor(l().total/l().pageSize)+1==l().current&&(e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,A()),e.obj.pageNum=l().current,e.obj.pageSize=l().pageSize,A(),l()}function W(a){return w(this,null,function*(){V.value,(yield oe({questionId:a,userId:V.value.id})).code==="ITEST-200"?n.success({message:"\u5220\u9664\u6210\u529F",duration:3}):n.error({message:"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3}),A()})}function I(a){return w(this,null,function*(){e.detailId=a.id;let u=v(a.type);switch(u){case 1:e.schemas=me();break;case 2:e.schemas=de();break;case 3:e.schemas=ce();break}yield R(a.id,u)})}const v=a=>{switch(a){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function R(a,u){return w(this,null,function*(){const F=yield le(a,u);e.quesDetail=F.data,e.detail=!0})}ee(()=>{A()});function K(a,u){return[{label:"\u67E5\u770B",color:"success",onClick:I.bind(null,a)},{label:"\u5220\u9664",color:"error",onClick:W.bind(null,a.id)}]}const Q=()=>{e.detail=!1,E()},U=()=>{if(s().answer1,s().answer1==null){n.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==s().answer1?(i({answer1:null}),E(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),D()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})):e.quesDetail.type===2?(e.quesDetail.rightAnswer,s(),e.quesDetail.rightAnswer==s().answer1?(i({answer1:null}),E(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),D()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}))):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,s().answer1.join(""),e.quesDetail.rightAnswer==s().answer1.join("")?(i({answer1:null}),E(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),D()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})))},D=()=>{try{e.colList.some((a,u,F)=>{if(a.id==e.detailId)throw u+1>=F.length?(n.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=F[u+1].id,R(e.detailId,v(F[u+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(a){}},H=()=>{e.answerIf=!0},E=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:ue,getCollections:A,registerTable:p,data:e,pagination:r,columns:P(),pageChange:M,createActions:K,questionDetail:I,exit:Q,handleSubmit:U,register1:t,nextQues:D,lookAnswer:H,closeAnswer:E}}}),fe=q(" \u5065\u5EB7\u7684\u8EAB\u4F53\u662F\u5B9E\u73B0\u76EE\u6807\u7684\u57FA\u77F3\u3002 "),Ce={key:0,class:"p-4"},Ae={class:"m-15",style:{"font-size":"20px"}},Ee=q("\u9000\u51FA\u8BAD\u7EC3"),we=q("\u67E5\u770B\u7B54\u6848"),he={key:0},De={key:1},be={key:2};function ye(t,i){const s=f("TableAction"),h=f("BasicTable"),r=f("BasicForm"),p=f("a-button"),C=f("CollapseContainer"),g=f("PageWrapper");return c(),y(g,{class:N(t.prefixCls),title:"\u6536\u85CF"},{headerContent:d(()=>[fe,L("div",{class:N(`${t.prefixCls}__link`)},null,2)]),default:d(()=>[t.data.detail?m("",!0):(c(),_("div",Ce,[k(h,{onRegister:t.registerTable,dataSource:t.data.colList,onChange:t.pageChange},{action:d(({record:o,column:B})=>[k(s,{actions:t.createActions(o,B)},null,8,["actions"])]),_:1},8,["onRegister","dataSource","onChange"])])),t.data.detail?(c(),y(C,{key:1,title:`\u9898\u76EEID\uFF1A${t.data.quesDetail.id}`},{default:d(()=>[L("div",Ae,S(t.data.quesDetail.content),1),t.data.detail?(c(),y(r,{key:0,onRegister:t.register1,onSubmit:t.handleSubmit,onReset:t.handleReset,schemas:t.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"])):m("",!0),k(p,{onClick:t.exit,class:"m-5"},{default:d(()=>[Ee]),_:1},8,["onClick"]),k(p,{onClick:t.lookAnswer,class:"m-5"},{default:d(()=>[we]),_:1},8,["onClick"])]),_:1},8,["title"])):m("",!0),t.data.answerIf?(c(),y(C,{key:2,title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:d(()=>[t.data.quesDetail.answer?(c(),_("h1",he,"\u7B54\u6848\uFF1A"+S(t.data.quesDetail.answer),1)):m("",!0),t.data.quesDetail.rightAnswer?(c(),_("h1",De,"\u7B54\u6848\uFF1A"+S(t.data.quesDetail.rightAnswer),1)):m("",!0),t.data.quesDetail.analysis?(c(),_("h1",be,"\u7B54\u6848\u89E3\u6790\uFF1A"+S(t.data.quesDetail.analysis),1)):m("",!0)]),_:1})):m("",!0)]),_:1},8,["class"])}var At=$(Fe,[["render",ye],["__scopeId","data-v-6aa5b941"]]);export{At as default};
