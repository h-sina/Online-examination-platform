var D=(u,i,a)=>new Promise((r,k)=>{var v=c=>{try{E(a.next(c))}catch(b){k(b)}},p=c=>{try{E(a.throw(c))}catch(b){k(b)}},E=c=>c.done?r(c.value):Promise.resolve(c.value).then(v,p);E((a=a.apply(u,i)).next())});import{U as ue,r as se,f as U,a as te,an as oe,bF as V,bK as R,R as N,G as $,bC as ae,s as ne,v as le,a5 as ie,J as C,o as L,h as Q,w as g,x as B,n as l,m as F,y as f,t as q,E as re,Y as ce,z as w,H as de}from"./index.7213dd96.js";import{cardList as pe}from"./data.05aca618.js";import{P as me}from"./index.4975d5c5.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                */import{a as ge,g as Be}from"./question.f7a7f083.js";import{B as Fe,u as Ee}from"./useTable.47254d5f.js";import{B as Ae,T as De,u as H}from"./useForm.ad1cea57.js";import{getBasicColumns as Ce}from"./tableData.72f39dd1.js";import{a as fe,b as be}from"./info.867dfa16.js";import{duox as he,dx as we,pd as ye}from"./choose.3af73037.js";import{H as qe,P as ke}from"./PushpinTwoTone.199a1430.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.6a6377e0.js";import"./useContentViewHeight.3ed0bf88.js";/* empty css              *//* empty css                *//* empty css                *//* empty css               */import"./index.f479f48f.js";import"./FullscreenOutlined.10ec0dd9.js";/* empty css               */import"./sortable.esm.2632adaa.js";import"./RedoOutlined.451aef28.js";/* empty css                */import"./index.667c5c2c.js";/* empty css               */import"./index.739838ce.js";/* empty css              */import"./download.9569db53.js";import"./uniqBy.5cba7abe.js";const{notification:o}=de(),ve=se(),M=U(()=>ve.getUserInfo),Se=te({components:{Icon:oe,PageWrapper:me,[V.name]:V,[R.name]:R,[R.Item.name]:R.Item,[N.name]:N,[$.name]:$,BasicTable:Fe,BasicForm:Ae,TableAction:De,CollapseContainer:ae,HeartTwoTone:qe,PushpinTwoTone:ke},setup(){const u=()=>[{field:"level",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u96BE\u5EA6",options:[{label:"\u7B80\u5355",value:"1",key:"1"},{label:"\u4E2D\u7B49",value:"2",key:"2"},{label:"\u56F0\u96BE",value:"3",key:"3"}],onChange:s=>{j(s,"levelChange")}}},{field:"type",component:"Select",label:"",colProps:{span:3},componentProps:{placeholder:"\u7C7B\u578B",onChange:s=>{j(s,"typeChange")},options:[{label:"\u5224\u65AD",value:"1",key:"1"},{label:"\u5355\u9009",value:"2",key:"2"},{label:"\u591A\u9009",value:"3",key:"3"},{label:"\u586B\u7A7A",value:"4",key:"4"},{label:"\u8BBA\u8FF0",value:"5",key:"5"}]}}],[i,{setFieldsValue:a,getFieldsValue:r,submit:k}]=H({labelWidth:50,submitButtonOptions:{text:"\u63D0\u4EA4"}}),[v]=H({labelWidth:10,schemas:u(),showSubmitButton:!1}),p=ne(!0),[E,{setLoading:c,setColumns:b,getColumns:K,getDataSource:y,getRawDataSource:T,reload:d,getPaginationRef:n,setPagination:ze,getSelectRows:W,getSelectRowKeys:Ve,setSelectedRowKeys:Ne,clearSelectedRowKeys:$e}]=Ee({title:"\u9898\u5E93",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:Ce(),showTableSetting:!0,pagination:p,sortFn:()=>{W()},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=le({questionList:[],questionListc:[],formData:{},obj:{orderRule:0,pageNum:1,pageSize:10,level:0,type:0},detail:!0,quesDetail:{},detailId:0,schemas:[],answerIf:!1}),j=(s,t)=>{t=="typeChange",s?t=="typeChange"?e.obj.type=s:e.obj.level=s:t=="typeChange"?e.obj.type=0:e.obj.level=0,e.obj,A()},G=()=>{e.obj.type=0,e.obj.level=0,A()};function A(){return D(this,null,function*(){e.obj;const s=yield ge(e.obj);p.value={total:s.data.total},p.value={total:s.data.total},e.questionList=s.data.list,e.questionListc=s.data.list.filter(t=>t.type!==4&&t.type!==5),e.questionListc,e.questionList,e.questionList.map(t=>{switch(t.level){case 1:t.level="\u7B80\u5355";break;case 2:t.level="\u4E2D\u7B49";break;case 3:t.level="\u56F0\u96BE";break}switch(t.type){case 1:t.type="\u5224\u65AD\u9898";break;case 2:t.type="\u5355\u9009\u9898";break;case 3:t.type="\u591A\u9009\u9898";break;case 4:t.type="\u586B\u7A7A\u9898";break;case 5:t.type="\u8BBA\u8FF0\u9898";break}})})}function S(s){return D(this,null,function*(){e.detailId=s.id;let t=z(s.type);if(t===4||t===5){o.warning({message:"\u6682\u4E0D\u652F\u6301\u7EC3\u4E60",duration:3});return}switch(t){case 1:e.schemas=ye();break;case 2:e.schemas=we();break;case 3:e.schemas=he();break}yield P(s.id,t)})}ie(()=>{A(e.obj)}),U(()=>(Math.floor(n().total/n().pageSize)+1==n().current&&(e.obj.pageNum=n().current,e.obj.pageSize=n().pageSize,A()),n().current));function J(){return D(this,null,function*(){e.obj.pageNum=n().current,e.obj.pageSize=n().pageSize,A()})}const O=()=>{e.detail=!0};function P(s,t){return D(this,null,function*(){const m=yield Be(s,t);e.quesDetail=m.data,e.detail=!1})}const Y=()=>{try{e.questionListc.some((s,t,m)=>{if(s.id==e.detailId)throw t-1<0?(o.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u7B2C\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=m[t-1].id,h(),S({id:e.detailId,type:m[t-1].type}),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(s){}},I=()=>{try{e.questionListc,e.questionListc.some((s,t,m)=>{if(s.id==e.detailId)throw t+1>=m.length?(o.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=m[t+1].id,h(),S({id:e.detailId,type:m[t+1].type}),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(s){}},z=s=>{switch(s){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function _(){return D(this,null,function*(){const s=yield fe({quesId:e.quesDetail.id,userId:+M.value.id});s.code==="ITEST-200"?o.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):o.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}function X(){return D(this,null,function*(){const s=yield be({questionId:e.quesDetail.id,userId:+M.value.id});s.code==="ITEST-200"?o.success({message:"\u6DFB\u52A0\u6210\u529F",duration:3}):o.error({message:"\u6DFB\u52A0\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3})})}const Z=()=>{if(r().answer1,r().answer1==null){o.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==r().answer1?(a({answer1:null}),h(),o.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(a({answer1:null}),o.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}),_()):e.quesDetail.type===2?(e.quesDetail.rightAnswer,r(),e.quesDetail.rightAnswer==r().answer1?(a({answer1:null}),h(),o.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(a({answer1:null}),o.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3}),_())):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,r().answer1.join(""),e.quesDetail.rightAnswer==r().answer1.join("")?(a({answer1:null}),h(),o.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),I()):(a({answer1:null}),o.error({message:"\u7B54\u6848\u9519\u8BEF \u9898\u76EE\u81EA\u52A8\u6DFB\u52A0\u5230\u9519\u9898\u5E93\u4E2D...",duration:3})))};function x(s,t){return[{label:"\u67E5\u770B",color:"success",onClick:S.bind(null,s)}]}const ee=()=>{e.answerIf=!0},h=()=>{e.answerIf=!1};return{prefixCls:"list-card",list:pe,getQuestions:A,selectQuestions:j,data:e,pagination:p,register:v,register1:i,questionDetail:S,registerTable:E,pageChange:J,resetQuestions:G,exit:O,QuestionDetail:P,lastQues:Y,nextQues:I,typeToId:z,addErrK:_,addCollK:X,handleSubmit:Z,createActions:x,lookAnswer:ee,closeAnswer:h,sortByTime:()=>{e.obj.orderRule=(e.obj.orderRule+1)%2,e.obj.pageNum=n().current,e.obj.pageSize=n().pageSize,A()}}}}),Ie={class:"p-4"},Re=w("\u6DFB\u52A0\u5230\u6536\u85CF\u5939 "),Te=w("\u6DFB\u52A0\u5230\u9519\u9898\u5E93 "),je={class:"m-5"},_e=w("\u9000\u51FA\u8BAD\u7EC3"),Le=w("\u4E0A\u4E00\u4E2A"),Qe=w("\u4E0B\u4E00\u4E2A"),Ke=w("\u67E5\u770B\u7B54\u6848");function Pe(u,i,a,r,k,v){const p=C("BasicForm"),E=C("TableAction"),c=C("BasicTable"),b=C("heart-two-tone"),K=C("pushpin-two-tone"),y=C("a-button"),T=C("CollapseContainer");return L(),Q("div",null,[g(l(p,{onRegister:u.register,modelValue:u.level,"onUpdate:modelValue":i[0]||(i[0]=d=>u.level=d),style:{margin:"10px"},onReset:u.resetQuestions},null,8,["onRegister","modelValue","onReset"]),[[B,u.data.detail]]),F("div",Ie,[g(l(c,{onRegister:u.registerTable,onRowClick:u.questionDetail,dataSource:u.data.questionList,onChange:u.pageChange},{action:f(({record:d,column:n})=>[l(E,{actions:u.createActions(d,n)},null,8,["actions"])]),_:1},8,["onRegister","onRowClick","dataSource","onChange"]),[[B,u.data.detail]])]),g(l(T,{title:`\u9898\u76EEID\uFF1A${u.data.quesDetail.id}`},{default:f(()=>[F("a",{onClick:i[1]||(i[1]=(...d)=>u.addErrK&&u.addErrK(...d))},[l(b,{class:"m-3"}),Re]),F("a",{onClick:i[2]||(i[2]=(...d)=>u.addCollK&&u.addCollK(...d))},[l(K,{class:"m-3"}),Te]),F("div",je,q(u.data.quesDetail.content),1),(L(!0),Q(re,null,ce(u.data.quesDetail.selectionList,d=>(L(),Q("ul",{class:"ml-5",key:u.data.quesDetail.id},[F("li",null,q(d),1)]))),128)),g(l(p,{onRegister:u.register1,onSubmit:u.handleSubmit,onReset:u.handleReset,schemas:u.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"]),[[B,!u.data.detail]]),l(y,{onClick:u.exit,class:"m-5"},{default:f(()=>[_e]),_:1},8,["onClick"]),l(y,{shape:"round",type:"primary",onClick:u.lastQues,class:"m-5"},{default:f(()=>[Le]),_:1},8,["onClick"]),l(y,{shape:"round",type:"primary",onClick:u.nextQues,class:"m-5"},{default:f(()=>[Qe]),_:1},8,["onClick"]),l(y,{onClick:u.lookAnswer,class:"m-5"},{default:f(()=>[Ke]),_:1},8,["onClick"])]),_:1},8,["title"]),[[B,!u.data.detail]]),g(l(T,{title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:f(()=>[g(F("h1",null,"\u7B54\u6848\uFF1A"+q(u.data.quesDetail.answer),513),[[B,u.data.quesDetail.answer]]),g(F("h1",null,"\u7B54\u6848\uFF1A"+q(u.data.quesDetail.rightAnswer),513),[[B,u.data.quesDetail.rightAnswer]]),g(F("h1",null,"\u7B54\u6848\u89E3\u6790\uFF1A"+q(u.data.quesDetail.analysis),513),[[B,u.data.quesDetail.analysis]])]),_:1},512),[[B,u.data.answerIf]])])}var yu=ue(Se,[["render",Pe],["__scopeId","data-v-ae9023c0"]]);export{yu as default};
