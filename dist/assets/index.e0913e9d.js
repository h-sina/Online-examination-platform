var A=(a,i,t)=>new Promise((h,l)=>{var B=o=>{try{r(t.next(o))}catch(y){l(y)}},f=o=>{try{r(t.throw(o))}catch(y){l(y)}},r=o=>o.done?h(o.value):Promise.resolve(o.value).then(B,f);r((t=t.apply(a,i)).next())});import{U as W,r as G,f as J,a as O,an as Y,bF as T,bK as v,R as L,G as j,bC as $,s as X,v as Z,a5 as x,J as E,o as k,h as q,w as m,x as p,m as d,n as g,y as C,t as b,E as ee,Y as ae,z as V,H as ue}from"./index.7213dd96.js";import{P as se}from"./index.4975d5c5.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                */import{g as te,d as oe}from"./info.867dfa16.js";import{T as ne,B as ie,u as le}from"./useForm.ad1cea57.js";import{getBasicColumns as z}from"./tableData.95ab03fd.js";import{g as re}from"./question.f7a7f083.js";import{duox as ce,dx as de,pd as me}from"./choose.3af73037.js";import{B as pe,u as ge}from"./useTable.47254d5f.js";/* empty css               *//* empty css               */import"./useWindowSizeFn.6a6377e0.js";import"./useContentViewHeight.3ed0bf88.js";/* empty css               *//* empty css               *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.739838ce.js";/* empty css              */import"./index.f479f48f.js";import"./FullscreenOutlined.10ec0dd9.js";import"./download.9569db53.js";import"./uniqBy.5cba7abe.js";import"./sortable.esm.2632adaa.js";import"./RedoOutlined.451aef28.js";/* empty css                */import"./index.667c5c2c.js";const{notification:n}=ue(),Be=G(),N=J(()=>Be.getUserInfo),Fe=O({components:{Icon:Y,PageWrapper:se,[T.name]:T,[v.name]:v,[v.Item.name]:v.Item,[L.name]:L,[j.name]:j,BasicTable:pe,TableAction:ne,BasicForm:ie,CollapseContainer:$},setup(){const[a,{setFieldsValue:i,getFieldsValue:t,submit:h}]=le({labelWidth:120,submitButtonOptions:{text:"\u63D0\u4EA4"}}),l=X(!0),[B,{setLoading:f,setColumns:r,getColumns:o,getDataSource:y,getRawDataSource:Ce,reload:be,getPaginationRef:c,setPagination:he,getSelectRows:ye,getSelectRowKeys:Se,setSelectedRowKeys:ve,clearSelectedRowKeys:ke}]=ge({title:"\u70B9\u51FB\u5220\u9664\u6309\u94AE \u6CE8\u610F\u4E0D\u80FD\u64A4\u9500 \u6CA1\u6709\u786E\u8BA4\u6846 \u8BF7\u8C28\u614E\u5220\u9664\uFF01",titleHelpMessage:"\u6E29\u99A8\u63D0\u9192",columns:z(),showTableSetting:!0,pagination:l,showTableSetting:!0,tableSetting:{fullScreen:!0},actionColumn:{width:160,title:"Action",dataIndex:"action",slots:{customRender:"action"}}}),e=Z({colList:[],obj:{pageNum:1,pageSize:10},quesDetail:{},detail:!1,schemas:[],detailId:0,answerIf:!1});function w(){return A(this,null,function*(){const s=yield te(e.obj);e.colList=s.data.list,e.colList.map(u=>{switch(u.level){case 1:u.level="\u7B80\u5355";break;case 2:u.level="\u4E2D\u7B49";break;case 3:u.level="\u56F0\u96BE";break}switch(u.type){case 1:u.type="\u5224\u65AD\u9898";break;case 2:u.type="\u5355\u9009\u9898";break;case 3:u.type="\u591A\u9009\u9898";break;case 4:u.type="\u586B\u7A7A\u9898";break;case 5:u.type="\u8BBA\u8FF0\u9898";break}}),l.value={total:s.data.total},e.colList})}function K(){Math.floor(c().total/c().pageSize)+1==c().current&&(e.obj.pageNum=c().current,e.obj.pageSize=c().pageSize,w()),e.obj.pageNum=c().current,e.obj.pageSize=c().pageSize,w(),c()}function M(s){return A(this,null,function*(){N.value,(yield oe({quesId:s,userId:N.value.id})).code==="ITEST-200"?n.success({message:"\u5220\u9664\u6210\u529F",duration:3}):n.error({message:"\u5220\u9664\u5931\u8D25\uFF0C\u8BF7\u7A0D\u540E\u518D\u8BD5",duration:3}),w()})}function _(s){return A(this,null,function*(){e.detailId=s.id;let u=I(s.type);switch(u){case 1:e.schemas=me();break;case 2:e.schemas=de();break;case 3:e.schemas=ce();break}yield R(s.id,u)})}const I=s=>{switch(s){case"\u5224\u65AD\u9898":return 1;case"\u5355\u9009\u9898":return 2;case"\u591A\u9009\u9898":return 3;case"\u586B\u7A7A\u9898":return 4;case"\u8BBA\u8FF0\u9898":return 5}};function R(s,u){return A(this,null,function*(){const F=yield re(s,u);e.quesDetail=F.data,e.detail=!0})}x(()=>{w()});function P(s,u){return[{label:"\u67E5\u770B",color:"success",onClick:_.bind(null,s)},{label:"\u5220\u9664",color:"error",onClick:M.bind(null,s.id)}]}const Q=()=>{e.detail=!1,D()},U=()=>{if(t().answer1,t().answer1==null){n.error({message:"\u8BF7\u8F93\u5165\u7B54\u6848",duration:3});return}e.quesDetail.type===1?e.quesDetail.answer==t().answer1?(i({answer1:null}),D(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),S()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})):e.quesDetail.type===2?(e.quesDetail.rightAnswer,t(),e.quesDetail.rightAnswer==t().answer1?(i({answer1:null}),D(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),S()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3}))):e.quesDetail.type===3&&(e.quesDetail.rightAnswer,t().answer1.join(""),e.quesDetail.rightAnswer==t().answer1.join("")?(i({answer1:null}),D(),n.success({message:"\u7B54\u6848\u6B63\u786E \u7CFB\u7EDF\u5C06\u81EA\u52A8\u8DF3\u8F6C\u5230\u4E0B\u4E00\u9898...",duration:3}),S()):(i({answer1:null}),n.error({message:"\u7B54\u6848\u9519\u8BEF",duration:3})))},S=()=>{try{e.colList.some((s,u,F)=>{if(s.id==e.detailId)throw u+1>=F.length?(n.warning({message:"\u8FD9\u5DF2\u7ECF\u662F\u6700\u540E\u4E00\u9898\u4E86",duration:3}),"\u5FAA\u73AF\u7EC8\u6B62"):(e.detailId=F[u+1].id,R(e.detailId,I(F[u+1].type)),"\u5FAA\u73AF\u7EC8\u6B62")})}catch(s){}},H=()=>{e.answerIf=!0},D=()=>{e.answerIf=!1};return{prefixCls:"list-card",getCollections:w,registerTable:B,data:e,pagination:l,columns:z(),pageChange:K,createActions:P,questionDetail:_,exit:Q,handleSubmit:U,register1:a,nextQues:S,lookAnswer:H,closeAnswer:D}}}),fe={class:"p-4"},we={class:"m-5"},De=V("\u9000\u51FA\u8BAD\u7EC3"),Ae=V("\u67E5\u770B\u7B54\u6848");function Ee(a,i){const t=E("TableAction"),h=E("BasicTable"),l=E("BasicForm"),B=E("a-button"),f=E("CollapseContainer");return k(),q("div",null,[m(d("div",fe,[g(h,{onRegister:a.registerTable,dataSource:a.data.colList,onChange:a.pageChange},{action:C(({record:r,column:o})=>[g(t,{actions:a.createActions(r,o)},null,8,["actions"])]),_:1},8,["onRegister","dataSource","onChange"])],512),[[p,!a.data.detail]]),m(d("div",null,[g(f,{title:`\u9898\u76EEID\uFF1A${a.data.quesDetail.id}`},{default:C(()=>[d("div",we,b(a.data.quesDetail.content),1),(k(!0),q(ee,null,ae(a.data.quesDetail.selectionList,r=>(k(),q("ul",{class:"ml-15",key:a.data.quesDetail.id},[d("li",null,b(r),1)]))),128)),m(g(l,{onRegister:a.register1,onSubmit:a.handleSubmit,onReset:a.handleReset,schemas:a.data.schemas},null,8,["onRegister","onSubmit","onReset","schemas"]),[[p,a.data.detail]]),g(B,{onClick:a.exit,class:"m-5"},{default:C(()=>[De]),_:1},8,["onClick"]),g(B,{onClick:a.lookAnswer,class:"m-5"},{default:C(()=>[Ae]),_:1},8,["onClick"])]),_:1},8,["title"])],512),[[p,a.data.detail]]),m(d("div",null,[g(f,{title:"\u9898\u76EE\u7B54\u6848",canExpan:!1},{default:C(()=>[m(d("h1",null,"\u7B54\u6848\uFF1A"+b(a.data.quesDetail.answer),513),[[p,a.data.quesDetail.answer]]),m(d("h1",null,"\u7B54\u6848\uFF1A"+b(a.data.quesDetail.rightAnswer),513),[[p,a.data.quesDetail.rightAnswer]]),m(d("h1",null,"\u7B54\u6848\u89E3\u6790\uFF1A"+b(a.data.quesDetail.analysis),513),[[p,a.data.quesDetail.analysis]])]),_:1})],512),[[p,a.data.answerIf]])])}var la=W(Fe,[["render",Ee],["__scopeId","data-v-20ed386f"]]);export{la as default};
