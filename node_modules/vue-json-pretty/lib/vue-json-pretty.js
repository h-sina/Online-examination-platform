!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VueJsonPretty=t(require("vue")):e.VueJsonPretty=t(e.Vue)}(this,(function(e){return function(){"use strict";var t={452:function(t){t.exports=e}},n={};function r(e){var o=n[e];if(void 0!==o)return o.exports;var a=n[e]={exports:{}};return t[e](a,a.exports,r),a.exports}r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var o={};return function(){r.r(o),r.d(o,{default:function(){return O}});var e=r(452);function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],c=!0,l=!1;try{for(n=n.call(e);!(c=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);c=!0);}catch(e){l=!0,o=e}finally{try{c||null==n.return||n.return()}finally{if(l)throw o}}return a}}(e,t)||n(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||n(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var i=(0,e.defineComponent)({props:{data:{required:!0,type:String},onClick:Function},render:function(){var t=this.data,n=this.onClick;return(0,e.createVNode)("span",{class:"vjs-tree__brackets",onClick:n},[t])}}),u=(0,e.defineComponent)({emits:["change","update:modelValue"],props:{checked:{type:Boolean,default:!1},isMultiple:Boolean,onChange:Function},setup:function(t,n){var r=n.emit;return{uiType:(0,e.computed)((function(){return t.isMultiple?"checkbox":"radio"})),model:(0,e.computed)({get:function(){return t.checked},set:function(e){return r("update:modelValue",e)}})}},render:function(){var t=this.uiType,n=this.model,r=this.$emit;return(0,e.createVNode)("label",{class:["vjs-check-controller",n?"is-checked":""],onClick:function(e){return e.stopPropagation()}},[(0,e.createVNode)("span",{class:"vjs-check-controller__inner is-".concat(t)},null),(0,e.createVNode)("input",{checked:n,class:"vjs-check-controller__original is-".concat(t),type:t,onChange:function(){return r("change",n)}},null)])}});function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}function h(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"root",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3?arguments[3]:void 0,o=r||{},c=o.key,i=o.index,u=o.type,s=void 0===u?"content":u,f=o.showComma,y=void 0!==f&&f,m=o.length,v=void 0===m?1:m,b=p(e);if("array"===b){var g=e.map((function(e,r,o){return h(e,"".concat(t,"[").concat(r,"]"),n+1,{index:r,showComma:r!==o.length-1,length:v,type:s})})).reduce((function(e,t){return e.concat(t)}),[]);return[h("[",t,n,{showComma:!1,key:c,length:e.length,type:"arrayStart"})[0]].concat(g,h("]",t,n,{showComma:y,length:e.length,type:"arrayEnd"})[0])}if("object"===b){var k=Object.keys(e),O=k.map((function(r,o,a){return h(e[r],r.includes(".")?"".concat(t,'["').concat(r,'"]'):"".concat(t,".").concat(r),n+1,{key:r,showComma:o!==a.length-1,length:v,type:s})})).reduce((function(e,t){return e.concat(t)}),[]);return[h("{",t,n,{showComma:!1,key:c,index:i,length:k.length,type:"objectStart"})[0]].concat(O,h("}",t,n,{showComma:y,length:k.length,type:"objectEnd"})[0])}var j=Object.entries({content:e,level:n,key:c,index:i,path:t,showComma:y,length:v,type:s}).reduce((function(e,t){var n=a(t,2),r=n[0],o=n[1];return void 0!==o?d(d({},e),{},l({},r,o)):e}),{});return[j]}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m={showLength:{type:Boolean,default:!1},showDoubleQuotes:{type:Boolean,default:!0},customValueFormatter:Function,selectableType:String,showSelectController:{type:Boolean,default:!1},showLine:{type:Boolean,default:!0},selectOnClickNode:{type:Boolean,default:!0},collapsedOnClickBrackets:{type:Boolean,default:!0},pathSelectable:{type:Function,default:function(){return!0}},highlightSelectedNode:{type:Boolean,default:!0}},v=(0,e.defineComponent)({name:"TreeNode",props:y(y({},m),{},{node:{type:Object,required:!0},collapsed:Boolean,checked:Boolean,onTreeNodeClick:{type:Function},onBracketsClick:{type:Function},onSelectedChange:{type:Function}}),setup:function(t,n){var r=n.emit,o=(0,e.computed)((function(){return p(t.node.content)})),a=(0,e.computed)((function(){return"vjs-value vjs-value__".concat(o.value)})),c=(0,e.computed)((function(){return t.showDoubleQuotes?'"'.concat(t.node.key,'"'):t.node.key})),l=(0,e.computed)((function(){return"multiple"===t.selectableType})),i=(0,e.computed)((function(){return"single"===t.selectableType})),u=(0,e.computed)((function(){return t.pathSelectable(t.node.path,t.node.content)&&(l.value||i.value)})),s=function(e){var t=e+"";return"string"===o.value&&(t='"'.concat(t,'"')),t};return{state:(0,e.reactive)({valueClass:a,prettyKey:c,isMultiple:l,selectable:u}),defaultFormatter:s,customFormatter:function(e){return t.customValueFormatter?t.customValueFormatter(e,t.node.key,t.node.path,s(e)):s(e)},onBracketsClickHandler:function(){t.collapsedOnClickBrackets&&r("brackets-click",!t.collapsed,t.node.path)},onCheckedChange:function(){r("selected-change",t.node)},onNodeClick:function(){r("tree-node-click",t.node),u.value&&t.selectOnClickNode&&r("selected-change",t.node)}}},render:function(){var t=this.state,n=this.node,r=this.showSelectController,o=this.highlightSelectedNode,a=this.checked,c=this.showLength,l=this.collapsed,s=this.showLine,d=this.customValueFormatter,p=this.defaultFormatter,h=this.customFormatter,f=this.onNodeClick,y=this.onCheckedChange,m=this.onBracketsClickHandler;return(0,e.createVNode)("div",{class:{"vjs-tree__node":!0,"has-selector":r,"is-highlight":o&&a},onClick:f},[r&&t.selectable&&"objectEnd"!==n.type&&"arrayEnd"!==n.type&&(0,e.createVNode)(u,{isMultiple:t.isMultiple,checked:a,onChange:y},null),Array.from(Array(n.level)).map((function(t,n){return(0,e.createVNode)("div",{key:n,class:{"vjs-tree__indent":!0,"has-line":s}},null)})),n.key&&(0,e.createVNode)("span",{class:"vjs-key"},["".concat(t.prettyKey,": ")]),(0,e.createVNode)("span",null,["content"!==n.type?(0,e.createVNode)(i,{data:n.content,onClick:m},null):d?(0,e.createVNode)("span",{class:t.valueClass,innerHTML:h(n.content)},null):(0,e.createVNode)("span",{class:t.valueClass},[p(n.content)]),n.showComma&&(0,e.createVNode)("span",null,[","]),c&&l&&(0,e.createVNode)("span",{class:"vjs-comment"},[(0,e.createTextVNode)(" // "),n.length,(0,e.createTextVNode)(" items ")])])])}});function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=(0,e.defineComponent)({name:"Tree",props:g(g({},m),{},{data:{type:Object,default:null},deep:{type:Number,default:1/0},deepCollapseChildren:{type:Boolean,default:!1},path:{type:String,default:"root"},virtual:{type:Boolean,default:!1},virtualLines:{type:Number,default:10},itemHeight:{type:Number,default:20},modelValue:{type:[String,Array],default:function(){return""}}}),emits:["click","change","update:modelValue"],setup:function(t,n){var r=n.emit,o=(0,e.ref)(),i=(0,e.reactive)({translateY:0,visibleData:null,hiddenPaths:h(t.data,t.path).reduce((function(e,n){var r=t.deepCollapseChildren?n.level>=t.deep:n.level===t.deep;return"objectStart"!==n.type&&"arrayStart"!==n.type||!r?e:g(g({},e),{},l({},n.path,1))}),{})}),u=(0,e.computed)((function(){var e=null;return h(t.data,t.path).reduce((function(t,n,r){var o=g(g({},n),{},{id:r}),a=i.hiddenPaths[o.path];if(e&&e.path===o.path){var c="objectStart"===e.type,l=g(g(g({},e),o),{},{content:c?"{...}":"[...]",type:c?"objectCollapsed":"arrayCollapsed"});return e=null,t.concat(l)}return a&&!e?(e=o,t):e?t:t.concat(o)}),[])})),s=(0,e.computed)((function(){var e=t.modelValue;return e&&"multiple"===t.selectableType&&Array.isArray(e)?e:[e]})),d=(0,e.computed)((function(){return!t.selectableType||t.selectOnClickNode||t.showSelectController?"":"When selectableType is not null, selectOnClickNode and showSelectController cannot be false at the same time, because this will cause the selection to fail."})),p=function(e){if(t.virtual){var n=o.value,r=t.virtualLines,a=n&&n.scrollTop||0,c=Math.floor(a/t.itemHeight),l=c<0?0:c+r>e.length?e.length-r:c;l<0&&(l=0);var u=l+r;i.translateY=l*t.itemHeight,i.visibleData=e.filter((function(e,t){return t>=l&&t<u}))}else i.visibleData=e};return(0,e.watchEffect)((function(){d.value&&function(e){throw new Error("[VueJSONPretty] ".concat(e))}(d.value)})),(0,e.watchEffect)((function(){u.value&&p(u.value)})),{tree:o,state:i,flatData:u,selectedPaths:s,onTreeScroll:function(){p(u.value)},onSelectedChange:function(e){var n=e.path,o=t.selectableType;if("multiple"===o){var l=s.value.findIndex((function(e){return e===n})),i=c(s.value);-1!==l?i.splice(l,1):i.push(n),r("update:modelValue",i),r("change",i,c(s.value))}else if("single"===o&&s.value[0]!==n){var u=a(s.value,1)[0],d=n;r("update:modelValue",d),r("change",d,u)}},onTreeNodeClick:function(e){var t=e.content,n=e.path;r("click",n,t)},onBracketsClick:function(e,t){if(e)i.hiddenPaths=g(g({},i.hiddenPaths),{},l({},t,1));else{var n=g({},i.hiddenPaths);delete n[t],i.hiddenPaths=n}}}},render:function(){var t=this.virtual,n=this.itemHeight,r=this.customValueFormatter,o=this.showDoubleQuotes,a=this.showLength,c=this.showLine,l=this.showSelectController,i=this.selectOnClickNode,u=this.pathSelectable,s=this.highlightSelectedNode,d=this.collapsedOnClickBrackets,p=this.state,h=this.flatData,f=this.selectedPaths,y=this.selectableType,m=this.onTreeNodeClick,b=this.onBracketsClick,g=this.onSelectedChange,k=this.onTreeScroll,O=p.visibleData&&p.visibleData.map((function(t){return(0,e.createVNode)(v,{key:t.id,node:t,collapsed:!!p.hiddenPaths[t.path],"custom-value-formatter":r,"show-double-quotes":o,"show-length":a,"collapsed-on-click-brackets":d,checked:f.includes(t.path),"selectable-type":y,"show-line":c,"show-select-controller":l,"select-on-click-node":i,"path-selectable":u,"highlight-selected-node":s,onTreeNodeClick:m,onBracketsClick:b,onSelectedChange:g},null)}));return(0,e.createVNode)("div",{ref:"tree",class:{"vjs-tree":!0,"is-virtual":t},onScroll:k},[t?(0,e.createVNode)("div",{style:{height:"".concat(h.length*n,"px")}},[(0,e.createVNode)("div",{style:{transform:"translateY(".concat(p.translateY,"px)")}},[O])]):O])}}),O=(0,e.defineComponent)(k)}(),o}()}));